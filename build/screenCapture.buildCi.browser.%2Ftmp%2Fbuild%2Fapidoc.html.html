<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/sidorares/node-mysql2#readme">mysql2 (v1.2.0)</a>
</h1>
<h4>fast mysql driver. Implements core protocol, prepared statements, ssl and compression in native JS</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2">module mysql2</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection">
            function <span class="apidocSignatureSpan">mysql2.</span>Connection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request">
            function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request_more_data">
            function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request_more_data
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_response">
            function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_response
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binary_row">
            function <span class="apidocSignatureSpan">mysql2.</span>binary_row
            <span class="apidocSignatureSpan">(columns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binlog_dump">
            function <span class="apidocSignatureSpan">mysql2.</span>binlog_dump
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.change_user">
            function <span class="apidocSignatureSpan">mysql2.</span>change_user
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake">
            function <span class="apidocSignatureSpan">mysql2.</span>client_handshake
            <span class="apidocSignatureSpan">(clientFlags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.close_statement">
            function <span class="apidocSignatureSpan">mysql2.</span>close_statement
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.column_definition">
            function <span class="apidocSignatureSpan">mysql2.</span>column_definition
            <span class="apidocSignatureSpan">(packet, clientEncoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.command">
            function <span class="apidocSignatureSpan">mysql2.</span>command
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connect">
            function <span class="apidocSignatureSpan">mysql2.</span>connect
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connection_config">
            function <span class="apidocSignatureSpan">mysql2.</span>connection_config
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.createConnection">
            function <span class="apidocSignatureSpan">mysql2.</span>createConnection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.createConnectionPromise">
            function <span class="apidocSignatureSpan">mysql2.</span>createConnectionPromise
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.createPool">
            function <span class="apidocSignatureSpan">mysql2.</span>createPool
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.createPoolCluster">
            function <span class="apidocSignatureSpan">mysql2.</span>createPoolCluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.createPoolPromise">
            function <span class="apidocSignatureSpan">mysql2.</span>createPoolPromise
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.createServer">
            function <span class="apidocSignatureSpan">mysql2.</span>createServer
            <span class="apidocSignatureSpan">(handler)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.escape">
            function <span class="apidocSignatureSpan">mysql2.</span>escape
            <span class="apidocSignatureSpan">(val, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.escapeId">
            function <span class="apidocSignatureSpan">mysql2.</span>escapeId
            <span class="apidocSignatureSpan">(val, forbidQualified)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute">
            function <span class="apidocSignatureSpan">mysql2.</span>execute
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.format">
            function <span class="apidocSignatureSpan">mysql2.</span>format
            <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake">
            function <span class="apidocSignatureSpan">mysql2.</span>handshake
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake_response">
            function <span class="apidocSignatureSpan">mysql2.</span>handshake_response
            <span class="apidocSignatureSpan">(handshake)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet">
            function <span class="apidocSignatureSpan">mysql2.</span>packet
            <span class="apidocSignatureSpan">(id, buffer, start, end)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser">
            function <span class="apidocSignatureSpan">mysql2.</span>packet_parser
            <span class="apidocSignatureSpan">(onPacket, packetHeaderLength)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ping">
            function <span class="apidocSignatureSpan">mysql2.</span>ping
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool">
            function <span class="apidocSignatureSpan">mysql2.</span>pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster">
            function <span class="apidocSignatureSpan">mysql2.</span>pool_cluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection">
            function <span class="apidocSignatureSpan">mysql2.</span>pool_connection
            <span class="apidocSignatureSpan">(pool, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare">
            function <span class="apidocSignatureSpan">mysql2.</span>prepare
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare_statement">
            function <span class="apidocSignatureSpan">mysql2.</span>prepare_statement
            <span class="apidocSignatureSpan">(sql, charsetNumber)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query">
            function <span class="apidocSignatureSpan">mysql2.</span>query
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.quit">
            function <span class="apidocSignatureSpan">mysql2.</span>quit
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.register_slave">
            function <span class="apidocSignatureSpan">mysql2.</span>register_slave
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.resultset_header">
            function <span class="apidocSignatureSpan">mysql2.</span>resultset_header
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server">
            function <span class="apidocSignatureSpan">mysql2.</span>server
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server_handshake">
            function <span class="apidocSignatureSpan">mysql2.</span>server_handshake
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ssl_request">
            function <span class="apidocSignatureSpan">mysql2.</span>ssl_request
            <span class="apidocSignatureSpan">(flags, charset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.text_row">
            function <span class="apidocSignatureSpan">mysql2.</span>text_row
            <span class="apidocSignatureSpan">(columns)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>CharsetToEncoding</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>Charsets</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>Connection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>Types</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>auth_41</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request_more_data.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>auth_switch_response.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>binary_row.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>binlog_dump.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>change_user.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>client_handshake.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>close_statement.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>column_definition.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>command.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>compressed_protocol</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>execute.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>handshake.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>handshake_response.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>helpers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>packet.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>packet_parser.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>ping.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>pool.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>pool_cluster.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>pool_connection.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>prepare.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>prepare_statement.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>promise</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>query.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>quit.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>register_slave.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>server.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>server_handshake.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>ssl_request.prototype</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">mysql2.</span>string</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.Connection">module mysql2.Connection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.Connection">
            function <span class="apidocSignatureSpan">mysql2.</span>Connection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.createQuery">
            function <span class="apidocSignatureSpan">mysql2.Connection.</span>createQuery
            <span class="apidocSignatureSpan">(sql, values, cb, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.statementKey">
            function <span class="apidocSignatureSpan">mysql2.Connection.</span>statementKey
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.super_">
            function <span class="apidocSignatureSpan">mysql2.Connection.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.Connection.prototype">module mysql2.Connection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._addCommandClosedState">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_addCommandClosedState
            <span class="apidocSignatureSpan">(cmd)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._binlogDump">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_binlogDump
            <span class="apidocSignatureSpan">(opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._bumpCompressedSequenceId">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_bumpCompressedSequenceId
            <span class="apidocSignatureSpan">(numPackets)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._bumpSequenceId">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_bumpSequenceId
            <span class="apidocSignatureSpan">(numPackets)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._handleFatalError">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_handleFatalError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._handleNetworkError">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_handleNetworkError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._handleTimeoutError">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_handleTimeoutError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._notifyError">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_notifyError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._registerSlave">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_registerSlave
            <span class="apidocSignatureSpan">(opts, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._resetSequenceId">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_resetSequenceId
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype._resolveNamedPlaceholders">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_resolveNamedPlaceholders
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.addCommand">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>addCommand
            <span class="apidocSignatureSpan">(cmd)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.beginTransaction">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>beginTransaction
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.changeUser">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>changeUser
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.close">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>close
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.commit">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>commit
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.connect">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>connect
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.createBinlogStream">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>createBinlogStream
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.destroy">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.end">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>end
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.escape">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>escape
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.escapeId">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>escapeId
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.execute">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>execute
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.format">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>format
            <span class="apidocSignatureSpan">(sql, values)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.handlePacket">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>handlePacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.keyFromFields">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>keyFromFields
            <span class="apidocSignatureSpan">(fields, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.pause">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>pause
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.ping">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>ping
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.pipe">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>pipe
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.prepare">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>prepare
            <span class="apidocSignatureSpan">(options, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.protocolError">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>protocolError
            <span class="apidocSignatureSpan">(message, code)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.query">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.resume">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>resume
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.rollback">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>rollback
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.serverHandshake">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>serverHandshake
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.startTLS">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>startTLS
            <span class="apidocSignatureSpan">(onSecure)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.unprepare">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>unprepare
            <span class="apidocSignatureSpan">(sql)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.write">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>write
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.writeColumns">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeColumns
            <span class="apidocSignatureSpan">(columns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.writeEof">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeEof
            <span class="apidocSignatureSpan">(warnings, statusFlags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.writeError">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeError
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.writeOk">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeOk
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.writePacket">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writePacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.writeTextResult">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeTextResult
            <span class="apidocSignatureSpan">(rows, columns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.Connection.prototype.writeTextRow">
            function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeTextRow
            <span class="apidocSignatureSpan">(column)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.auth_41">module mysql2.auth_41</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_41.calculateToken">
            function <span class="apidocSignatureSpan">mysql2.auth_41.</span>calculateToken
            <span class="apidocSignatureSpan">(password, scramble1, scramble2)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_41.calculateTokenFromPasswordSha">
            function <span class="apidocSignatureSpan">mysql2.auth_41.</span>calculateTokenFromPasswordSha
            <span class="apidocSignatureSpan">(passwordSha, scramble1, scramble2)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_41.doubleSha1">
            function <span class="apidocSignatureSpan">mysql2.auth_41.</span>doubleSha1
            <span class="apidocSignatureSpan">(password)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_41.verifyToken">
            function <span class="apidocSignatureSpan">mysql2.auth_41.</span>verifyToken
            <span class="apidocSignatureSpan">(publicSeed1, publicSeed2, token, doubleSha)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.auth_switch_request">module mysql2.auth_switch_request</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request.auth_switch_request">
            function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request.fromPacket">
            function <span class="apidocSignatureSpan">mysql2.auth_switch_request.</span>fromPacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.auth_switch_request.prototype">module mysql2.auth_switch_request.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.auth_switch_request.prototype.</span>toPacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.auth_switch_request_more_data">module mysql2.auth_switch_request_more_data</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request_more_data.auth_switch_request_more_data">
            function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request_more_data
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request_more_data.fromPacket">
            function <span class="apidocSignatureSpan">mysql2.auth_switch_request_more_data.</span>fromPacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request_more_data.verifyMarker">
            function <span class="apidocSignatureSpan">mysql2.auth_switch_request_more_data.</span>verifyMarker
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.auth_switch_request_more_data.prototype">module mysql2.auth_switch_request_more_data.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_request_more_data.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.auth_switch_request_more_data.prototype.</span>toPacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.auth_switch_response">module mysql2.auth_switch_response</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_response.auth_switch_response">
            function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_response
            <span class="apidocSignatureSpan">(data)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_response.fromPacket">
            function <span class="apidocSignatureSpan">mysql2.auth_switch_response.</span>fromPacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.auth_switch_response.prototype">module mysql2.auth_switch_response.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.auth_switch_response.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.auth_switch_response.prototype.</span>toPacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.binary_row">module mysql2.binary_row</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binary_row.binary_row">
            function <span class="apidocSignatureSpan">mysql2.</span>binary_row
            <span class="apidocSignatureSpan">(columns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binary_row.fromPacket">
            function <span class="apidocSignatureSpan">mysql2.binary_row.</span>fromPacket
            <span class="apidocSignatureSpan">(fields, packet)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.binary_row.prototype">module mysql2.binary_row.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binary_row.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.binary_row.prototype.</span>toPacket
            <span class="apidocSignatureSpan">(sequenceId)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.binlog_dump">module mysql2.binlog_dump</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binlog_dump.binlog_dump">
            function <span class="apidocSignatureSpan">mysql2.</span>binlog_dump
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binlog_dump.super_">
            function <span class="apidocSignatureSpan">mysql2.binlog_dump.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.binlog_dump.prototype">module mysql2.binlog_dump.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binlog_dump.prototype.binlogData">
            function <span class="apidocSignatureSpan">mysql2.binlog_dump.prototype.</span>binlogData
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.binlog_dump.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.binlog_dump.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.change_user">module mysql2.change_user</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.change_user.change_user">
            function <span class="apidocSignatureSpan">mysql2.</span>change_user
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.change_user.super_">
            function <span class="apidocSignatureSpan">mysql2.change_user.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.change_user.prototype">module mysql2.change_user.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.change_user.prototype.calculateNativePasswordAuthToken">
            function <span class="apidocSignatureSpan">mysql2.change_user.prototype.</span>calculateNativePasswordAuthToken
            <span class="apidocSignatureSpan">(authPluginData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.change_user.prototype.handshakeResult">
            function <span class="apidocSignatureSpan">mysql2.change_user.prototype.</span>handshakeResult
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.change_user.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.change_user.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.client_handshake">module mysql2.client_handshake</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.client_handshake">
            function <span class="apidocSignatureSpan">mysql2.</span>client_handshake
            <span class="apidocSignatureSpan">(clientFlags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.super_">
            function <span class="apidocSignatureSpan">mysql2.client_handshake.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.client_handshake.prototype">module mysql2.client_handshake.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.prototype.calculateNativePasswordAuthToken">
            function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>calculateNativePasswordAuthToken
            <span class="apidocSignatureSpan">(authPluginData)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.prototype.handshakeInit">
            function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>handshakeInit
            <span class="apidocSignatureSpan">(helloPacket, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.prototype.handshakeResult">
            function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>handshakeResult
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.prototype.sendCredentials">
            function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>sendCredentials
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.prototype.sendSSLRequest">
            function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>sendSSLRequest
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.client_handshake.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>start
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.close_statement">module mysql2.close_statement</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.close_statement.close_statement">
            function <span class="apidocSignatureSpan">mysql2.</span>close_statement
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.close_statement.super_">
            function <span class="apidocSignatureSpan">mysql2.close_statement.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.close_statement.prototype">module mysql2.close_statement.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.close_statement.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.close_statement.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.column_definition">module mysql2.column_definition</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.column_definition.column_definition">
            function <span class="apidocSignatureSpan">mysql2.</span>column_definition
            <span class="apidocSignatureSpan">(packet, clientEncoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.column_definition.toPacket">
            function <span class="apidocSignatureSpan">mysql2.column_definition.</span>toPacket
            <span class="apidocSignatureSpan">(column, sequenceId)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.column_definition.prototype">module mysql2.column_definition.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.column_definition.prototype.inspect">
            function <span class="apidocSignatureSpan">mysql2.column_definition.prototype.</span>inspect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.command">module mysql2.command</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.command.command">
            function <span class="apidocSignatureSpan">mysql2.</span>command
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.command.super_">
            function <span class="apidocSignatureSpan">mysql2.command.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.command.prototype">module mysql2.command.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.command.prototype.execute">
            function <span class="apidocSignatureSpan">mysql2.command.prototype.</span>execute
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.command.prototype.stateName">
            function <span class="apidocSignatureSpan">mysql2.command.prototype.</span>stateName
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.compressed_protocol">module mysql2.compressed_protocol</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.compressed_protocol.enableCompression">
            function <span class="apidocSignatureSpan">mysql2.compressed_protocol.</span>enableCompression
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.connection_config">module mysql2.connection_config</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connection_config.connection_config">
            function <span class="apidocSignatureSpan">mysql2.</span>connection_config
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connection_config.getCharsetNumber">
            function <span class="apidocSignatureSpan">mysql2.connection_config.</span>getCharsetNumber
            <span class="apidocSignatureSpan">(charset)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connection_config.getDefaultFlags">
            function <span class="apidocSignatureSpan">mysql2.connection_config.</span>getDefaultFlags
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connection_config.getSSLProfile">
            function <span class="apidocSignatureSpan">mysql2.connection_config.</span>getSSLProfile
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connection_config.mergeFlags">
            function <span class="apidocSignatureSpan">mysql2.connection_config.</span>mergeFlags
            <span class="apidocSignatureSpan">(default_flags, user_flags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.connection_config.parseUrl">
            function <span class="apidocSignatureSpan">mysql2.connection_config.</span>parseUrl
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.execute">module mysql2.execute</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.execute">
            function <span class="apidocSignatureSpan">mysql2.</span>execute
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.super_">
            function <span class="apidocSignatureSpan">mysql2.execute.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.execute.prototype">module mysql2.execute.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype._findOrCreateReadStream">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>_findOrCreateReadStream
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype._streamLocalInfile">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>_streamLocalInfile
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.buildParserFromFields">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>buildParserFromFields
            <span class="apidocSignatureSpan">(fields, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.done">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>done
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.doneInsert">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>doneInsert
            <span class="apidocSignatureSpan">(rs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.fieldsEOF">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>fieldsEOF
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.readField">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>readField
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.resultsetHeader">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>resultsetHeader
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.row">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>row
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.execute.prototype.stream">
            function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>stream
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.handshake">module mysql2.handshake</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake.handshake">
            function <span class="apidocSignatureSpan">mysql2.</span>handshake
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake.fromPacket">
            function <span class="apidocSignatureSpan">mysql2.handshake.</span>fromPacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.handshake.prototype">module mysql2.handshake.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake.prototype.setScrambleData">
            function <span class="apidocSignatureSpan">mysql2.handshake.prototype.</span>setScrambleData
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.handshake.prototype.</span>toPacket
            <span class="apidocSignatureSpan">(sequenceId)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.handshake_response">module mysql2.handshake_response</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake_response.handshake_response">
            function <span class="apidocSignatureSpan">mysql2.</span>handshake_response
            <span class="apidocSignatureSpan">(handshake)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake_response.fromPacket">
            function <span class="apidocSignatureSpan">mysql2.handshake_response.</span>fromPacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.handshake_response.prototype">module mysql2.handshake_response.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake_response.prototype.serializeResponse">
            function <span class="apidocSignatureSpan">mysql2.handshake_response.prototype.</span>serializeResponse
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.handshake_response.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.handshake_response.prototype.</span>toPacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.helpers">module mysql2.helpers</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.helpers.srcEscape">
            function <span class="apidocSignatureSpan">mysql2.helpers.</span>srcEscape
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.packet">module mysql2.packet</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.packet">
            function <span class="apidocSignatureSpan">mysql2.</span>packet
            <span class="apidocSignatureSpan">(id, buffer, start, end)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.MockBuffer">
            function <span class="apidocSignatureSpan">mysql2.packet.</span>MockBuffer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.lengthCodedNumberLength">
            function <span class="apidocSignatureSpan">mysql2.packet.</span>lengthCodedNumberLength
            <span class="apidocSignatureSpan">(n)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.lengthCodedStringLength">
            function <span class="apidocSignatureSpan">mysql2.packet.</span>lengthCodedStringLength
            <span class="apidocSignatureSpan">(str, encoding)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.packet.prototype">module mysql2.packet.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.asError">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>asError
            <span class="apidocSignatureSpan">(encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.clone">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>clone
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.dump">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>dump
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.eofStatusFlags">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>eofStatusFlags
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.eofWarningCount">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>eofWarningCount
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.haveMoreData">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>haveMoreData
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.isAlt">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>isAlt
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.isEOF">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>isEOF
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.isError">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>isError
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.length">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>length
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseDate">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseDate
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseDateTime">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseDateTime
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseFloat">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseFloat
            <span class="apidocSignatureSpan">(len)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseGeometryValue">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseGeometryValue
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseInt">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseInt
            <span class="apidocSignatureSpan">(len, supportBigNumbers)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseIntNoBigCheck">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseIntNoBigCheck
            <span class="apidocSignatureSpan">(len)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedFloat">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedFloat
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedInt">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedInt
            <span class="apidocSignatureSpan">(supportBigNumbers)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedIntNoBigCheck">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedIntNoBigCheck
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedIntString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedIntString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.peekByte">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>peekByte
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readBuffer">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readBuffer
            <span class="apidocSignatureSpan">(len)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readDateTime">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readDateTime
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readDateTimeString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readDateTimeString
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readDouble">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readDouble
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readFloat">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readFloat
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readInt16">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt16
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readInt24">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt24
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readInt32">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt32
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readInt64">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt64
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readInt64JSNumber">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt64JSNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readInt64String">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt64String
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readInt8">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt8
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readLengthCodedBuffer">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedBuffer
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readLengthCodedNumber">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedNumber
            <span class="apidocSignatureSpan">(bigNumberStrings, signed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readLengthCodedNumberExt">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedNumberExt
            <span class="apidocSignatureSpan">(tag, bigNumberStrings, signed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readLengthCodedNumberSigned">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedNumberSigned
            <span class="apidocSignatureSpan">(bigNumberStrings)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readLengthCodedString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedString
            <span class="apidocSignatureSpan">(encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readNullTerminatedString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readNullTerminatedString
            <span class="apidocSignatureSpan">(encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readSInt16">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt16
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readSInt32">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt32
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readSInt64">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt64
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readSInt64JSNumber">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt64JSNumber
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readSInt64String">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt64String
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readSInt8">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt8
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readString
            <span class="apidocSignatureSpan">(len, encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.readTimeString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readTimeString
            <span class="apidocSignatureSpan">(convertTtoMs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.reset">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>reset
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.skip">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>skip
            <span class="apidocSignatureSpan">(num)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.slice">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>slice
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.type">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>type
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeBuffer">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeBuffer
            <span class="apidocSignatureSpan">(b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeHeader">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeHeader
            <span class="apidocSignatureSpan">(sequenceId)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeInt16">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt16
            <span class="apidocSignatureSpan">(n)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeInt24">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt24
            <span class="apidocSignatureSpan">(n)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeInt32">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt32
            <span class="apidocSignatureSpan">(n)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeInt8">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt8
            <span class="apidocSignatureSpan">(n)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeLengthCodedBuffer">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeLengthCodedBuffer
            <span class="apidocSignatureSpan">(b)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeLengthCodedNumber">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeLengthCodedNumber
            <span class="apidocSignatureSpan">(n)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeLengthCodedString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeLengthCodedString
            <span class="apidocSignatureSpan">(s, encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeNull">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeNull
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeNullTerminatedString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeNullTerminatedString
            <span class="apidocSignatureSpan">(s, encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet.prototype.writeString">
            function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeString
            <span class="apidocSignatureSpan">(s, encoding)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.packet_parser">module mysql2.packet_parser</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser.packet_parser">
            function <span class="apidocSignatureSpan">mysql2.</span>packet_parser
            <span class="apidocSignatureSpan">(onPacket, packetHeaderLength)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.packet_parser.prototype">module mysql2.packet_parser.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser.prototype._flushLargePacket4">
            function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>_flushLargePacket4
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser.prototype._flushLargePacket7">
            function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>_flushLargePacket7
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser.prototype.executeHeader2">
            function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executeHeader2
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser.prototype.executeHeader3">
            function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executeHeader3
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser.prototype.executePayload">
            function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executePayload
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.packet_parser.prototype.executeStart">
            function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executeStart
            <span class="apidocSignatureSpan">(chunk)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.ping">module mysql2.ping</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ping.ping">
            function <span class="apidocSignatureSpan">mysql2.</span>ping
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ping.super_">
            function <span class="apidocSignatureSpan">mysql2.ping.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.ping.prototype">module mysql2.ping.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ping.prototype.pingResponse">
            function <span class="apidocSignatureSpan">mysql2.ping.prototype.</span>pingResponse
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ping.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.ping.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.pool">module mysql2.pool</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.pool">
            function <span class="apidocSignatureSpan">mysql2.</span>pool
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.super_">
            function <span class="apidocSignatureSpan">mysql2.pool.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.pool.prototype">module mysql2.pool.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype._removeConnection">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>_removeConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype.end">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>end
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype.escape">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>escape
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype.escapeId">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>escapeId
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype.execute">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>execute
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype.query">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>query
            <span class="apidocSignatureSpan">(sql, values, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool.prototype.releaseConnection">
            function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>releaseConnection
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.pool_cluster">module mysql2.pool_cluster</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.pool_cluster">
            function <span class="apidocSignatureSpan">mysql2.</span>pool_cluster
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.super_">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.pool_cluster.prototype">module mysql2.pool_cluster.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype._clearFindCaches">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_clearFindCaches
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype._decreaseErrorCount">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_decreaseErrorCount
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype._findNodeIds">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_findNodeIds
            <span class="apidocSignatureSpan">(pattern)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype._getConnection">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_getConnection
            <span class="apidocSignatureSpan">(node, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype._getNode">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_getNode
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype._increaseErrorCount">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_increaseErrorCount
            <span class="apidocSignatureSpan">(node)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype.add">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>add
            <span class="apidocSignatureSpan">(id, config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype.end">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype.getConnection">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>getConnection
            <span class="apidocSignatureSpan">(pattern, selector, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_cluster.prototype.of">
            function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>of
            <span class="apidocSignatureSpan">(pattern, selector)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.pool_connection">module mysql2.pool_connection</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.pool_connection">
            function <span class="apidocSignatureSpan">mysql2.</span>pool_connection
            <span class="apidocSignatureSpan">(pool, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.statementKey">
            function <span class="apidocSignatureSpan">mysql2.pool_connection.</span>statementKey
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.super_">
            function <span class="apidocSignatureSpan">mysql2.pool_connection.</span>super_
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.pool_connection.prototype">module mysql2.pool_connection.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.prototype._realEnd">
            function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>_realEnd
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.prototype._removeFromPool">
            function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>_removeFromPool
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.prototype.destroy">
            function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>destroy
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.prototype.end">
            function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>end
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.pool_connection.prototype.release">
            function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>release
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.prepare">module mysql2.prepare</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prepare">
            function <span class="apidocSignatureSpan">mysql2.</span>prepare
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.super_">
            function <span class="apidocSignatureSpan">mysql2.prepare.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.prepare.prototype">module mysql2.prepare.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prototype.fieldsEOF">
            function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>fieldsEOF
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prototype.parametersEOF">
            function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>parametersEOF
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prototype.prepareDone">
            function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>prepareDone
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prototype.prepareHeader">
            function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>prepareHeader
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prototype.readField">
            function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>readField
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prototype.readParameter">
            function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>readParameter
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.prepare_statement">module mysql2.prepare_statement</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare_statement.prepare_statement">
            function <span class="apidocSignatureSpan">mysql2.</span>prepare_statement
            <span class="apidocSignatureSpan">(sql, charsetNumber)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.prepare_statement.prototype">module mysql2.prepare_statement.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.prepare_statement.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.prepare_statement.prototype.</span>toPacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.promise">module mysql2.promise</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.promise.createConnection">
            function <span class="apidocSignatureSpan">mysql2.promise.</span>createConnection
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.promise.createPool">
            function <span class="apidocSignatureSpan">mysql2.promise.</span>createPool
            <span class="apidocSignatureSpan">(opts)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.query">module mysql2.query</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.query">
            function <span class="apidocSignatureSpan">mysql2.</span>query
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.super_">
            function <span class="apidocSignatureSpan">mysql2.query.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.query.prototype">module mysql2.query.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype._findOrCreateReadStream">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>_findOrCreateReadStream
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype._streamLocalInfile">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>_streamLocalInfile
            <span class="apidocSignatureSpan">(connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.done">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>done
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.doneInsert">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>doneInsert
            <span class="apidocSignatureSpan">(rs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.fieldsEOF">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>fieldsEOF
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.infileOk">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>infileOk
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.readField">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>readField
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.resultsetHeader">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>resultsetHeader
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.row">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>row
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.query.prototype.stream">
            function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>stream
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.quit">module mysql2.quit</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.quit.quit">
            function <span class="apidocSignatureSpan">mysql2.</span>quit
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.quit.super_">
            function <span class="apidocSignatureSpan">mysql2.quit.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.quit.prototype">module mysql2.quit.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.quit.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.quit.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.register_slave">module mysql2.register_slave</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.register_slave.register_slave">
            function <span class="apidocSignatureSpan">mysql2.</span>register_slave
            <span class="apidocSignatureSpan">(opts, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.register_slave.super_">
            function <span class="apidocSignatureSpan">mysql2.register_slave.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.register_slave.prototype">module mysql2.register_slave.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.register_slave.prototype.registerResponse">
            function <span class="apidocSignatureSpan">mysql2.register_slave.prototype.</span>registerResponse
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.register_slave.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.register_slave.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.resultset_header">module mysql2.resultset_header</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.resultset_header.resultset_header">
            function <span class="apidocSignatureSpan">mysql2.</span>resultset_header
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.resultset_header.toPacket">
            function <span class="apidocSignatureSpan">mysql2.resultset_header.</span>toPacket
            <span class="apidocSignatureSpan">(fieldCount, insertId, sequenceId)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.server">module mysql2.server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server.server">
            function <span class="apidocSignatureSpan">mysql2.</span>server
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server.super_">
            function <span class="apidocSignatureSpan">mysql2.server.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.server.prototype">module mysql2.server.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server.prototype._handleConnection">
            function <span class="apidocSignatureSpan">mysql2.server.prototype.</span>_handleConnection
            <span class="apidocSignatureSpan">(socket)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server.prototype.close">
            function <span class="apidocSignatureSpan">mysql2.server.prototype.</span>close
            <span class="apidocSignatureSpan">(cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server.prototype.listen">
            function <span class="apidocSignatureSpan">mysql2.server.prototype.</span>listen
            <span class="apidocSignatureSpan">(port, host, backlog, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.server_handshake">module mysql2.server_handshake</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server_handshake.server_handshake">
            function <span class="apidocSignatureSpan">mysql2.</span>server_handshake
            <span class="apidocSignatureSpan">(args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server_handshake.super_">
            function <span class="apidocSignatureSpan">mysql2.server_handshake.</span>super_
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.server_handshake.prototype">module mysql2.server_handshake.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server_handshake.prototype.dispatchCommands">
            function <span class="apidocSignatureSpan">mysql2.server_handshake.prototype.</span>dispatchCommands
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server_handshake.prototype.readClientReply">
            function <span class="apidocSignatureSpan">mysql2.server_handshake.prototype.</span>readClientReply
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.server_handshake.prototype.start">
            function <span class="apidocSignatureSpan">mysql2.server_handshake.prototype.</span>start
            <span class="apidocSignatureSpan">(packet, connection)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.ssl_request">module mysql2.ssl_request</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ssl_request.ssl_request">
            function <span class="apidocSignatureSpan">mysql2.</span>ssl_request
            <span class="apidocSignatureSpan">(flags, charset)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.ssl_request.prototype">module mysql2.ssl_request.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.ssl_request.prototype.toPacket">
            function <span class="apidocSignatureSpan">mysql2.ssl_request.prototype.</span>toPacket
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.string">module mysql2.string</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.string.decode">
            function <span class="apidocSignatureSpan">mysql2.string.</span>decode
            <span class="apidocSignatureSpan">(buffer, encoding, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.string.encode">
            function <span class="apidocSignatureSpan">mysql2.string.</span>encode
            <span class="apidocSignatureSpan">(string, encoding, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.mysql2.text_row">module mysql2.text_row</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.text_row.text_row">
            function <span class="apidocSignatureSpan">mysql2.</span>text_row
            <span class="apidocSignatureSpan">(columns)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.text_row.fromPacket">
            function <span class="apidocSignatureSpan">mysql2.text_row.</span>fromPacket
            <span class="apidocSignatureSpan">(packet)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.mysql2.text_row.toPacket">
            function <span class="apidocSignatureSpan">mysql2.text_row.</span>toPacket
            <span class="apidocSignatureSpan">(columns, encoding)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2" id="apidoc.module.mysql2">module mysql2</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.Connection" id="apidoc.element.mysql2.Connection">
        function <span class="apidocSignatureSpan">mysql2.</span>Connection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts)
{
  EventEmitter.call(this);
  this.config = opts.config;

  // TODO: fill defaults
  // if no params, connect to /var/lib/mysql/mysql.sock ( /tmp/mysql.sock on OSX )
  // if host is given, connect to host:3306

  // TODO: use `/usr/local/mysql/bin/mysql_config --socket` output? as default socketPath
  // if there is no host/port and no socketPath parameters?

  if (!opts.config.stream) {
    if (opts.config.socketPath) {
      this.stream = Net.connect(opts.config.socketPath);
    } else {
      this.stream = Net.connect(opts.config.port, opts.config.host);
    }
  } else {
    // if stream is a function, treat it as "stream agent / factory"
    if (typeof opts.config.stream == 'function') {
      this.stream = opts.config.stream(opts);
    } else {
      this.stream = opts.config.stream;
    }
  }
  this._internalId = _connectionId++;

  this._commands = new Queue();
  this._command = null;

  this._paused = false;
  this._paused_packets = new Queue();

  this._statements = LRU({
    max: this.config.maxPreparedStatements,
    dispose: function (key, statement) { statement.close(); }
  });

  // TODO: make it lru cache
  // https://github.com/mercadolibre/node-simple-lru-cache
  // or https://github.com/rsms/js-lru
  // or https://github.com/monsur/jscache
  // or https://github.com/isaacs/node-lru-cache
  //
  // key is field.name + ':' + field.columnType + ':' field.flags + '/'
  this.textProtocolParsers = {};

  // TODO: not sure if cache should be separate (same key as with textProtocolParsers)
  // or part of prepared statements cache (key is sql query)
  this.binaryProtocolParsers = {};

  this.serverCapabilityFlags = 0;
  this.authorized = false;

  var connection = this;

  this.sequenceId = 0;
  this.compressedSequenceId = 0;

  this.threadId = null;
  this._handshakePacket = null;
  this._fatalError = null;
  this._protocolError = null;
  this._outOfOrderPackets = [];

  this.clientEncoding = CharsetToEncoding[this.config.charsetNumber];

  this.stream.once('error', connection._handleNetworkError.bind(this));

  // see https://gist.github.com/khoomeister/4985691#use-that-instead-of-bind
  this.packetParser = new PacketParser(function (p) {
    connection.handlePacket(p);
  });

  this.stream.on('data', function (data) {
    if (connection.connectTimeout) {
      Timers.clearTimeout(connection.connectTimeout);
      connection.connectTimeout = null;
    }
    connection.packetParser.execute(data);
  });

  this.stream.on('end', function () {
    // we need to set this flag everywhere where we want connection to close
    if (connection._closing) {
      return;
    }

    if (!connection._protocolError) { // no particular error message before disconnect
      connection._protocolError = new Error('Connection lost: The server closed the connection.');
      connection._protocolError.fatal = true;
      connection._protocolError.code = 'PROTOCOL_CONNECTION_LOST';
    }

    connection._notifyError(connection._protocolError);
  });
  var handshakeCommand;
  if (!this.config.isServer) {
    handshakeCommand = new Commands.ClientHandshake(this.config.clientFlags);
    handshakeCommand.on('end', function () {
      connection._handshakePacket = handshakeCommand.handshake;
      connection.threadId = handshakeCommand.handshake.connectionId;
      connection.emit('connect', handshakeCommand.handshake);
    });
    handshakeCommand.on('error', function (err) {
      connection._notifyError(err);
    });
    this.addCommand(handshakeCommand);
  }

  // in case there was no initiall handshake but we need to read sting, assume it utf-8
  // most common example: "Too many connections" error ( packet is sent immediately on connection attempt, we don't know server
encoding yet)
  // will be overwrittedn with actial encoding value as soon as server handshake packet is received
  this.serverEncoding = 'utf8';

  if (this.config.connectTimeout) {
    var timeoutHandler = this._handleTimeoutError.bind(this);
    this.connectTimeout = Timers.setTimeout(timeoutHandler, this.config.connectTimeout);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request" id="apidoc.element.mysql2.auth_switch_request">
        function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AuthSwitchRequest(opts)
{
  this.pluginName = opts.pluginName;
  this.pluginData = opts.pluginData;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request_more_data" id="apidoc.element.mysql2.auth_switch_request_more_data">
        function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request_more_data
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AuthSwitchRequestMoreData(data)
{
  this.data = data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_response" id="apidoc.element.mysql2.auth_switch_response">
        function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_response
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AuthSwitchResponse(data)
{
  if (!Buffer.isBuffer(data)) {
    data = Buffer.from(data);
  }
  this.data = data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.binary_row" id="apidoc.element.mysql2.binary_row">
        function <span class="apidocSignatureSpan">mysql2.</span>binary_row
        <span class="apidocSignatureSpan">(columns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BinaryRow(columns)
{
  this.columns = columns || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.binlog_dump" id="apidoc.element.mysql2.binlog_dump">
        function <span class="apidocSignatureSpan">mysql2.</span>binlog_dump
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BinlogDump(opts)
{
  Command.call(this);
  // this.onResult = callback;
  this.opts = opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.change_user" id="apidoc.element.mysql2.change_user">
        function <span class="apidocSignatureSpan">mysql2.</span>change_user
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ChangeUser(options, callback)
{
  this.onResult = callback;
  this.user = options.user;
  this.password = options.password;
  this.database = options.database;
  this.passwordSha1 = options.passwordSha1;
  this.charsetNumber = options.charsetNumber;
  this.currentConfig = options.currentConfig;
  Command.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.client_handshake" id="apidoc.element.mysql2.client_handshake">
        function <span class="apidocSignatureSpan">mysql2.</span>client_handshake
        <span class="apidocSignatureSpan">(clientFlags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ClientHandshake(clientFlags)
{
  this.handshake = null;
  this.clientFlags = clientFlags;
  Command.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.close_statement" id="apidoc.element.mysql2.close_statement">
        function <span class="apidocSignatureSpan">mysql2.</span>close_statement
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CloseStatement(id)
{
  Command.call(this);
  this.id = id;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.column_definition" id="apidoc.element.mysql2.column_definition">
        function <span class="apidocSignatureSpan">mysql2.</span>column_definition
        <span class="apidocSignatureSpan">(packet, clientEncoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ColumnDefinition(packet, clientEncoding)
{
  this._buf = packet.buffer;
  this._clientEncoding = clientEncoding;

  this._catalogLength = packet.readLengthCodedNumber();
  this._catalogStart = packet.offset;
  packet.offset += this._catalogLength;

  this._schemaLength = packet.readLengthCodedNumber();
  this._schemaStart = packet.offset;
  packet.offset += this._schemaLength;

  this._tableLength = packet.readLengthCodedNumber();
  this._tableStart = packet.offset;
  packet.offset += this._tableLength;

  this._orgTableLength = packet.readLengthCodedNumber();
  this._orgTableStart = packet.offset;
  packet.offset += this._orgTableLength;

  // name is always used, don't make it lazy
  var _nameLength = packet.readLengthCodedNumber();
  var _nameStart = packet.offset;
  packet.offset += _nameLength;

  this._orgNameLength = packet.readLengthCodedNumber();
  this._orgNameStart = packet.offset;
  packet.offset += this._orgNameLength;

  packet.skip(1); //  length of the following fields (always 0x0c)
  this.characterSet = packet.readInt16();
  this.encoding = CharsetToEncoding[this.characterSet];

  this.name = StringParser.decode(this._buf.slice(_nameStart, _nameStart + _nameLength), this.encoding === 'binary' ? this._clientEncoding
 : this.encoding);

  this.columnLength = packet.readInt32();
  this.columnType = packet.readInt8();
  this.flags = packet.readInt16();
  this.decimals = packet.readInt8();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.command" id="apidoc.element.mysql2.command">
        function <span class="apidocSignatureSpan">mysql2.</span>command
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.connect" id="apidoc.element.mysql2.connect">
        function <span class="apidocSignatureSpan">mysql2.</span>connect
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (opts) {
  return new Connection({config: new ConnectionConfig(opts)});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// if host is given, connect to host:3306

// TODO: use `/usr/local/mysql/bin/mysql_config --socket` output? as default socketPath
// if there is no host/port and no socketPath parameters?

if (!opts.config.stream) {
  if (opts.config.socketPath) {
    this.stream = Net.<span class="apidocCodeKeywordSpan">connect</span>(opts.config.socketPath);
  } else {
    this.stream = Net.connect(opts.config.port, opts.config.host);
  }
} else {
  // if stream is a function, treat it as "stream agent / factory"
  if (typeof opts.config.stream == 'function') {
    this.stream = opts.config.stream(opts);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.connection_config" id="apidoc.element.mysql2.connection_config">
        function <span class="apidocSignatureSpan">mysql2.</span>connection_config
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConnectionConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.isServer = options.isServer;
  this.stream = options.stream;

  this.host = options.host || 'localhost';
  this.port = options.port || 3306;
  this.localAddress = options.localAddress;
  this.socketPath = options.socketPath;
  this.user = options.user || undefined;
  this.password = options.password || undefined;
  this.passwordSha1 = options.passwordSha1 || undefined;
  this.database = options.database;
  this.connectTimeout = (options.connectTimeout === undefined)
    ? (10 * 1000)
    : options.connectTimeout;
  this.insecureAuth = options.insecureAuth || false;
  this.supportBigNumbers = options.supportBigNumbers || false;
  this.bigNumberStrings = options.bigNumberStrings || false;
  this.decimalNumbers = options.decimalNumbers || false;
  this.dateStrings = options.dateStrings || false;
  this.debug = options.debug;
  this.trace = options.trace !== false;
  this.stringifyObjects = options.stringifyObjects || false;
  this.timezone = options.timezone || 'local';
  this.queryFormat = options.queryFormat;
  this.pool = options.pool || undefined;
  this.ssl = (typeof options.ssl === 'string')
    ? ConnectionConfig.getSSLProfile(options.ssl)
    : (options.ssl || false);
  this.multipleStatements = options.multipleStatements || false;
  this.rowsAsArray = options.rowsAsArray || false;
  this.namedPlaceholders = options.namedPlaceholders || false;
  this.nestTables = (options.nestTables === undefined) ? undefined : options.nestTables;
  this.typeCast = (options.typeCast === undefined)
    ? true
    : options.typeCast;

  if (this.timezone[0] == ' ') {
    // "+" is a url encoded char for space so it
    // gets translated to space when giving a
    // connection string..
    this.timezone = '+' + this.timezone.substr(1);
  }

  if (this.ssl) {
    // Default rejectUnauthorized to true
    this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
  }

  this.maxPacketSize = 0;
  this.charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8MB4_UNICODE_CI;

  this.compress = options.compress || false;

  this.authSwitchHandler = options.authSwitchHandler;

  this.clientFlags = ConnectionConfig.mergeFlags(ConnectionConfig.getDefaultFlags(options),
                                                 options.flags || '');

  this.connectAttributes = options.connectAttributes;
  this.maxPreparedStatements = options.maxPreparedStatements || 16000;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.createConnection" id="apidoc.element.mysql2.createConnection">
        function <span class="apidocSignatureSpan">mysql2.</span>createConnection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createConnection = function (opts) {
  return new Connection({config: new ConnectionConfig(opts)});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...




var core = require('./index.js');

function createConnection (opts) {
var coreConnection = core.<span class="apidocCodeKeywordSpan">createConnection</span>(opts);
var Promise = opts.Promise || global.Promise;
if (!Promise) {
  throw new Error('no Promise implementation available.' +
    'Use promise-enabled node version or pass userland Promise' +
    ' implementation as parameter, for example: { Promise: require(\'es6-promise\').Promise }');
}
return new Promise(function (resolve, reject) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.createConnectionPromise" id="apidoc.element.mysql2.createConnectionPromise">
        function <span class="apidocSignatureSpan">mysql2.</span>createConnectionPromise
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createConnection(opts) {
  var coreConnection = core.createConnection(opts);
  var Promise = opts.Promise || global.Promise;
  if (!Promise) {
    throw new Error('no Promise implementation available.' +
      'Use promise-enabled node version or pass userland Promise' +
      ' implementation as parameter, for example: { Promise: require(\'es6-promise\').Promise }');
  }
  return new Promise(function (resolve, reject) {
    coreConnection.once('connect', function (connectParams) {
      resolve(new PromiseConnection(coreConnection, Promise));
    });
    coreConnection.once('error', reject);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.createPool" id="apidoc.element.mysql2.createPool">
        function <span class="apidocSignatureSpan">mysql2.</span>createPool
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createPool = function (config) {
  var PoolConfig = require('./lib/pool_config.js');
  var Pool = require('./lib/pool.js');
  return new Pool({config: new PoolConfig(config)});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  c.end(function () {
    resolve();
  });
});
};

function createPool (opts) {
var corePool = core.<span class="apidocCodeKeywordSpan">createPool</span>(opts);
var Promise = opts.Promise || global.Promise || require('es6-promise');

var promisePool = {
  getConnection: function () {
    return new Promise(function (resolve, reject) {
      corePool.getConnection(function (err, coreConnection) {
        if (err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.createPoolCluster" id="apidoc.element.mysql2.createPoolCluster">
        function <span class="apidocSignatureSpan">mysql2.</span>createPoolCluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createPoolCluster = function (config) {
  var PoolCluster = require('./lib/pool_cluster.js');
  return new PoolCluster(config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.createPoolPromise" id="apidoc.element.mysql2.createPoolPromise">
        function <span class="apidocSignatureSpan">mysql2.</span>createPoolPromise
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createPool(opts) {
  var corePool = core.createPool(opts);
  var Promise = opts.Promise || global.Promise || require('es6-promise');

  var promisePool = {
    getConnection: function () {
      return new Promise(function (resolve, reject) {
        corePool.getConnection(function (err, coreConnection) {
          if (err) {
            reject(err);
          } else {
            resolve(new PromiseConnection(coreConnection, Promise));
          }
        });
      });
    },

    query: function (sql, args) {
      return new Promise(function (resolve, reject) {
        var done = makeDoneCb(resolve, reject);
        if (args) {
          corePool.query(sql, args, done);
        } else {
          corePool.query(sql, done);
        }
      });
    },

    execute: function (sql, values) {
      return new Promise(function (resolve, reject) {
        corePool.execute(sql, values, makeDoneCb(resolve, reject));
      });
    },

    end: function () {
      return new Promise(function (resolve, reject) {
        corePool.end(function (err) {
          if (err) {
            reject(err);
          } else {
            resolve();
          }
        });
      });
    }
  };

  return promisePool;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.createServer" id="apidoc.element.mysql2.createServer">
        function <span class="apidocSignatureSpan">mysql2.</span>createServer
        <span class="apidocSignatureSpan">(handler)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createServer = function (handler) {
  var Server = require('./lib/server.js');
  var s = new Server();
  if (handler) {
    s.on('connection', handler);
  }
  return s;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ConnectionConfig = require('./connection_config');

// TODO: inherit Server from net.Server
function Server ()
{
EventEmitter.call(this);
this.connections = [];
this._server = net.<span class="apidocCodeKeywordSpan">createServer</span>(this._handleConnection.bind(this));
}
util.inherits(Server, EventEmitter);

Server.prototype._handleConnection = function (socket) {
var connectionConfig = new ConnectionConfig({stream: socket, isServer: true});
var connection = new Connection({config: connectionConfig});
this.emit('connection', connection);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.escape" id="apidoc.element.mysql2.escape">
        function <span class="apidocSignatureSpan">mysql2.</span>escape
        <span class="apidocSignatureSpan">(val, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escape(val, stringifyObjects, timeZone) {
  if (val === undefined || val === null) {
    return 'NULL';
  }

  switch (typeof val) {
    case 'boolean': return (val) ? 'true' : 'false';
    case 'number': return val+'';
    case 'object':
      if (val instanceof Date) {
        return SqlString.dateToString(val, timeZone || 'local');
      } else if (Array.isArray(val)) {
        return SqlString.arrayToList(val, timeZone);
      } else if (Buffer.isBuffer(val)) {
        return SqlString.bufferToString(val);
      } else if (stringifyObjects) {
        return escapeString(val.toString());
      } else {
        return SqlString.objectToValues(val, timeZone);
      }
    default: return escapeString(val);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    values: values
  };
  this._resolveNamedPlaceholders(opts);
  return SqlString.format(opts.sql, opts.values, this.config.stringifyObjects, this.config.timezone);
};

Connection.prototype.escape = function (value) {
  return SqlString.<span class="apidocCodeKeywordSpan">escape</span>(value, false, this.config.timezone);
};

Connection.prototype.escapeId = function escapeId (value) {
  return SqlString.escapeId(value, false);
};

var convertNamedPlaceholders = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.escapeId" id="apidoc.element.mysql2.escapeId">
        function <span class="apidocSignatureSpan">mysql2.</span>escapeId
        <span class="apidocSignatureSpan">(val, forbidQualified)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(val, forbidQualified) {
  if (Array.isArray(val)) {
    var sql = '';

    for (var i = 0; i &lt; val.length; i++) {
      sql += (i === 0 ? '' : ', ') + SqlString.escapeId(val[i], forbidQualified);
    }

    return sql;
  }

  if (forbidQualified) {
    return '`' + String(val).replace(/`/g, '``') + '`';
  }

  return '`' + String(val).replace(/`/g, '``').replace(/\./g, '`.`') + '`';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- update error codes from node-mysql                         #201 209
- bump named-placeholders to 1.0.0, fixes problems with
  placeholders inside quotation ( https://github.com/sidorares/named-placeholders/issues/2 )
- catch exceptions during named placeholders processing      #187


0.15.8 - 22/06/2015
- Add .<span class="apidocCodeKeywordSpan">escapeId</span>() to Connection and Pool                     #180
- Build: iojs 2.2.1 &amp; 2.3.0
- Binary protocol: fix crash when server return null
  for 'NOT NULL' column                                      #178

0.15.7 - ?

0.15.6 - 04/06/2015
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute" id="apidoc.element.mysql2.execute">
        function <span class="apidocSignatureSpan">mysql2.</span>execute
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Execute(options, callback)
{
  Command.call(this);
  this.statement = options.statement;
  this.sql = options.sql;
  this.values = options.values;
  this.onResult = callback;
  this.parameters = options.values;

  this.insertId = 0;

  this._rows = [];
  this._fields = [];
  this._result = [];
  this._fieldCount = 0;
  this._rowParser = null;
  this._executeOptions = options;
  this._resultIndex = 0;
  this._localStream = null;
  this._unpipeStream = function () {};
  this._streamFactory = options.infileStreamFactory;
  this._connection = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PromiseConnection.prototype.execute = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">execute</span>(query, params, done);
    } else {
      c.execute(query, done);
    }
  });
};

PromiseConnection.prototype.end = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.format" id="apidoc.element.mysql2.format">
        function <span class="apidocSignatureSpan">mysql2.</span>format
        <span class="apidocSignatureSpan">(sql, values, stringifyObjects, timeZone)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function format(sql, values, stringifyObjects, timeZone) {
  if (values == null) {
    return sql;
  }

  if (!(values instanceof Array || Array.isArray(values))) {
    values = [values];
  }

  var chunkIndex        = 0;
  var placeholdersRegex = /\?\??/g;
  var result            = '';
  var valuesIndex       = 0;
  var match;

  while (valuesIndex &lt; values.length &amp;&amp; (match = placeholdersRegex.exec(sql))) {
    var value = match[0] === '??'
        ? SqlString.escapeId(values[valuesIndex])
        : SqlString.escape(values[valuesIndex], stringifyObjects, timeZone);

    result += sql.slice(chunkIndex, match.index) + value;
    chunkIndex = placeholdersRegex.lastIndex;
    valuesIndex++;
  }

  if (chunkIndex === 0) {
    // Nothing was replaced
    return sql;
  }

  if (chunkIndex &lt; sql.length) {
    return result + sql.slice(chunkIndex);
  }

  return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return this.config.queryFormat.call(this, sql, values, this.config.timezone);
  }
  var opts = {
    sql: sql,
    values: values
  };
  this._resolveNamedPlaceholders(opts);
  return SqlString.<span class="apidocCodeKeywordSpan">format</span>(opts.sql, opts.values, this.config.stringifyObjects, this.config
.timezone);
};

Connection.prototype.escape = function (value) {
  return SqlString.escape(value, false, this.config.timezone);
};

Connection.prototype.escapeId = function escapeId (value) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.handshake" id="apidoc.element.mysql2.handshake">
        function <span class="apidocSignatureSpan">mysql2.</span>handshake
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Handshake(args) {
  this.protocolVersion = args.protocolVersion;
  this.serverVersion = args.serverVersion;
  this.capabilityFlags = args.capabilityFlags;
  this.connectionId = args.connectionId;
  this.authPluginData1 = args.authPluginData1;
  this.authPluginData2 = args.authPluginData2;
  this.characterSet = args.characterSet;
  this.statusFlags = args.statusFlags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.handshake_response" id="apidoc.element.mysql2.handshake_response">
        function <span class="apidocSignatureSpan">mysql2.</span>handshake_response
        <span class="apidocSignatureSpan">(handshake)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function HandshakeResponse(handshake)
{
  this.user = handshake.user || '';
  this.database = handshake.database || '';
  this.password = handshake.password || '';
  this.passwordSha1 = handshake.passwordSha1;
  this.authPluginData1 = handshake.authPluginData1;
  this.authPluginData2 = handshake.authPluginData2;
  this.compress = handshake.compress;
  this.clientFlags = handshake.flags;
  // TODO: pre-4.1 auth support
  var authToken;
  if (this.passwordSha1) {
    authToken = auth41.calculateTokenFromPasswordSha(this.passwordSha1, this.authPluginData1, this.authPluginData2);
  } else {
    authToken = auth41.calculateToken(this.password, this.authPluginData1, this.authPluginData2);
  }
  this.authToken = authToken;
  this.charsetNumber = handshake.charsetNumber;
  this.encoding = CharsetToEncoding[handshake.charsetNumber];
  this.connectAttributes = handshake.connectAttributes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet" id="apidoc.element.mysql2.packet">
        function <span class="apidocSignatureSpan">mysql2.</span>packet
        <span class="apidocSignatureSpan">(id, buffer, start, end)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Packet(id, buffer, start, end)
{
  // hot path, enable checks when testing only
  // if (!Buffer.isBuffer(buffer) || typeof start == 'undefined' || typeof end == 'undefined')
  //  throw new Error('invalid packet');
  this.sequenceId = id;
  this.numPackets = 1;
  this.buffer = buffer;
  this.start = start;
  this.offset = start + 4;
  this.end = end;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet_parser" id="apidoc.element.mysql2.packet_parser">
        function <span class="apidocSignatureSpan">mysql2.</span>packet_parser
        <span class="apidocSignatureSpan">(onPacket, packetHeaderLength)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PacketParser(onPacket, packetHeaderLength)
{
  // 4 for normal packets, 7 for comprssed protocol packets
  if (typeof packetHeaderLength == 'undefined') {
    packetHeaderLength = 4;
  }
  // array of last payload chunks
  // only used when current payload is not complete
  this.buffer = [];
  // total length of chunks on buffer
  this.bufferLength = 0;
  this.packetHeaderLength = packetHeaderLength;

  // incomplete header state: number of header bytes received
  this.headerLen = 0;

  // expected payload length
  this.length = 0;

  this.largePacketParts = [];
  this.firstPacketSequenceId = 0;

  this.onPacket = onPacket;
  this.execute = PacketParser.prototype.executeStart;
  this._flushLargePacket = packetHeaderLength == 7 ?
    this._flushLargePacket7 : this._flushLargePacket4;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.ping" id="apidoc.element.mysql2.ping">
        function <span class="apidocSignatureSpan">mysql2.</span>ping
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Ping(callback)
{
  Command.call(this);
  this.onResult = callback;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool" id="apidoc.element.mysql2.pool">
        function <span class="apidocSignatureSpan">mysql2.</span>pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Pool(options) {
  EventEmitter.call(this);
  this.config = options.config;
  this.config.connectionConfig.pool = this;

  this._allConnections = new Queue();
  this._freeConnections = new Queue();
  this._connectionQueue = new Queue();
  this._closed = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster" id="apidoc.element.mysql2.pool_cluster">
        function <span class="apidocSignatureSpan">mysql2.</span>pool_cluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolCluster(config) {
  EventEmitter.call(this);

  config = config || {};
  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;
  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;
  this._defaultSelector = config.defaultSelector || 'RR';

  this._closed = false;
  this._lastId = 0;
  this._nodes = {};
  this._serviceableNodeIds = [];
  this._namespaces = {};
  this._findCaches = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_connection" id="apidoc.element.mysql2.pool_connection">
        function <span class="apidocSignatureSpan">mysql2.</span>pool_connection
        <span class="apidocSignatureSpan">(pool, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConnection(pool, options) {
  Connection.call(this, options);
  this._pool = pool;

  // When a fatal error occurs the connection's protocol ends, which will cause
  // the connection to end as well, thus we only need to watch for the end event
  // and we will be notified of disconnects.
  var connection = this;
  this.on('end', function (err) { this._removeFromPool(); });
  this.on('error', function (err) { this._removeFromPool(); });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare" id="apidoc.element.mysql2.prepare">
        function <span class="apidocSignatureSpan">mysql2.</span>prepare
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Prepare(options, callback)
{
  Command.call(this);
  this.query = options.sql;
  this.onResult = callback;

  this.id = 0;
  this.fieldCount = 0;
  this.parameterCount = 0;
  this.fields = [];
  this.parameterDefinitions = [];
  this.options = options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare_statement" id="apidoc.element.mysql2.prepare_statement">
        function <span class="apidocSignatureSpan">mysql2.</span>prepare_statement
        <span class="apidocSignatureSpan">(sql, charsetNumber)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PrepareStatement(sql, charsetNumber)
{
  this.query = sql;
  this.charsetNumber = charsetNumber;
  this.encoding = CharsetToEncoding[charsetNumber];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query" id="apidoc.element.mysql2.query">
        function <span class="apidocSignatureSpan">mysql2.</span>query
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(options, callback)
{
  Command.call(this);
  this.sql = options.sql;
  this.values = options.values;
  this._queryOptions = options;
  this.onResult = callback;
  this._fieldCount = 0;
  this._rowParser = null;
  this._fields = [];
  this._rows = [];
  this._receivedFieldsCount = 0;
  this._resultIndex = 0;
  this._localStream = null;
  this._unpipeStream = function () {};
  this._streamFactory = options.infileStreamFactory;
  this._connection = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

PromiseConnection.prototype.query = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">query</span>(query, params, done);
    } else {
      c.query(query, done);
    }
  });
};

PromiseConnection.prototype.execute = function (query, params) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.quit" id="apidoc.element.mysql2.quit">
        function <span class="apidocSignatureSpan">mysql2.</span>quit
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Quit(callback)
{
  this.done = callback;
  Command.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.register_slave" id="apidoc.element.mysql2.register_slave">
        function <span class="apidocSignatureSpan">mysql2.</span>register_slave
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RegisterSlave(opts, callback)
{
  Command.call(this);
  this.onResult = callback;
  this.opts = opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.resultset_header" id="apidoc.element.mysql2.resultset_header">
        function <span class="apidocSignatureSpan">mysql2.</span>resultset_header
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ResultSetHeader(packet, connection)
{
  var bigNumberStrings = connection.config.bigNumberStrings;
  var encoding = connection.serverEncoding;

  var flags = connection._handshakePacket.capabilityFlags;

  var isSet = function (flag) {
    return flags &amp; ClientConstants[flag];
  };

  if (packet.buffer[packet.offset] !== 0) {
    this.fieldCount = packet.readLengthCodedNumber();
    if (this.fieldCount === null) {
      this.infileName = packet.readString(undefined, encoding);
    }
    return;
  }

  this.fieldCount = packet.readInt8(); // skip OK byte
  this.affectedRows = packet.readLengthCodedNumber(bigNumberStrings);
  this.insertId = packet.readLengthCodedNumberSigned(bigNumberStrings);
  this.info = '';


  if (isSet('PROTOCOL_41')) {
    this.serverStatus = packet.readInt16();
    this.warningStatus = packet.readInt16();
  } else if (isSet('TRANSACTIONS')) {
    this.serverStatus = packet.readInt16();
  }

  var stateChanges = null;
  if (isSet('SESSION_TRACK') &amp;&amp; packet.offset &lt; packet.end) {
    this.info = packet.readLengthCodedString(encoding);
    if (this.serverStatus &amp;&amp; ServerSatusFlags.SERVER_SESSION_STATE_CHANGED) {

      // session change info record - see
      // https://dev.mysql.com/doc/internals/en/packet-OK_Packet.html#cs-sect-packet-ok-sessioninfo

      var len = packet.offset &lt; packet.end ? packet.readLengthCodedNumber() : 0;
      var end = packet.offset + len;
      var type, len, key, stateEnd;

      if (len &gt; 0) {
        stateChanges = {
          systemVariables: {},
          schema: null,
          // gtids: {},
          trackStateChange: null
        };
      }

      while (packet.offset &lt; end) {
        type = packet.readInt8();
        len = packet.readLengthCodedNumber();
        stateEnd = packet.offset + len;
        key = packet.readLengthCodedString(encoding);
        if (type === 0) {
          var val = packet.readLengthCodedString(encoding);
          stateChanges.systemVariables[key] = val;
          if (key == 'character_set_client') {
            var charsetNumber = EncodingToCharset[val];
            connection.config.charsetNumber = charsetNumber;
          }
        } else if (type === 1) {
          // TODO double check it's supposed to be the only value, not a list.
          stateChanges.schema = key;
        } else if (type === 2) {
          stateChanges.trackStateChange = packet.readLengthCodedString(encoding);
        } else {
          // GTIDs (type == 3) or unknown type - just skip for now
        }
        packet.offset = stateEnd;
      }
    }
  } else {
    this.info = packet.readString(undefined, encoding);
  }

  if (stateChanges) {
    this.stateChanges = stateChanges;
  }

  var m = this.info.match(/\schanged:\s*(\d+)/i);
  if (m !== null) {
    this.changedRows = parseInt(m[1], 10);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server" id="apidoc.element.mysql2.server">
        function <span class="apidocSignatureSpan">mysql2.</span>server
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Server()
{
  EventEmitter.call(this);
  this.connections = [];
  this._server = net.createServer(this._handleConnection.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server_handshake" id="apidoc.element.mysql2.server_handshake">
        function <span class="apidocSignatureSpan">mysql2.</span>server_handshake
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ServerHandshake(args)
{
  Command.call(this);
  this.args = args;
<span class="apidocCodeCommentSpan">  /*
  this.protocolVersion = args.protocolVersion || 10;
  this.serverVersion   = args.serverVersion;
  this.connectionId    = args.connectionId,
  this.statusFlags     = args.statusFlags,
  this.characterSet    = args.characterSet,
  this.capabilityFlags = args.capabilityFlags || 512;
  */
</span>}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.ssl_request" id="apidoc.element.mysql2.ssl_request">
        function <span class="apidocSignatureSpan">mysql2.</span>ssl_request
        <span class="apidocSignatureSpan">(flags, charset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SSLRequest(flags, charset)
{
  this.clientFlags = flags | ClientConstants.SSL;
  this.charset = charset;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.text_row" id="apidoc.element.mysql2.text_row">
        function <span class="apidocSignatureSpan">mysql2.</span>text_row
        <span class="apidocSignatureSpan">(columns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TextRow(columns)
{
  this.columns = columns || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>










































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.Connection" id="apidoc.module.mysql2.Connection">module mysql2.Connection</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.Connection.Connection" id="apidoc.element.mysql2.Connection.Connection">
        function <span class="apidocSignatureSpan">mysql2.</span>Connection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts)
{
  EventEmitter.call(this);
  this.config = opts.config;

  // TODO: fill defaults
  // if no params, connect to /var/lib/mysql/mysql.sock ( /tmp/mysql.sock on OSX )
  // if host is given, connect to host:3306

  // TODO: use `/usr/local/mysql/bin/mysql_config --socket` output? as default socketPath
  // if there is no host/port and no socketPath parameters?

  if (!opts.config.stream) {
    if (opts.config.socketPath) {
      this.stream = Net.connect(opts.config.socketPath);
    } else {
      this.stream = Net.connect(opts.config.port, opts.config.host);
    }
  } else {
    // if stream is a function, treat it as "stream agent / factory"
    if (typeof opts.config.stream == 'function') {
      this.stream = opts.config.stream(opts);
    } else {
      this.stream = opts.config.stream;
    }
  }
  this._internalId = _connectionId++;

  this._commands = new Queue();
  this._command = null;

  this._paused = false;
  this._paused_packets = new Queue();

  this._statements = LRU({
    max: this.config.maxPreparedStatements,
    dispose: function (key, statement) { statement.close(); }
  });

  // TODO: make it lru cache
  // https://github.com/mercadolibre/node-simple-lru-cache
  // or https://github.com/rsms/js-lru
  // or https://github.com/monsur/jscache
  // or https://github.com/isaacs/node-lru-cache
  //
  // key is field.name + ':' + field.columnType + ':' field.flags + '/'
  this.textProtocolParsers = {};

  // TODO: not sure if cache should be separate (same key as with textProtocolParsers)
  // or part of prepared statements cache (key is sql query)
  this.binaryProtocolParsers = {};

  this.serverCapabilityFlags = 0;
  this.authorized = false;

  var connection = this;

  this.sequenceId = 0;
  this.compressedSequenceId = 0;

  this.threadId = null;
  this._handshakePacket = null;
  this._fatalError = null;
  this._protocolError = null;
  this._outOfOrderPackets = [];

  this.clientEncoding = CharsetToEncoding[this.config.charsetNumber];

  this.stream.once('error', connection._handleNetworkError.bind(this));

  // see https://gist.github.com/khoomeister/4985691#use-that-instead-of-bind
  this.packetParser = new PacketParser(function (p) {
    connection.handlePacket(p);
  });

  this.stream.on('data', function (data) {
    if (connection.connectTimeout) {
      Timers.clearTimeout(connection.connectTimeout);
      connection.connectTimeout = null;
    }
    connection.packetParser.execute(data);
  });

  this.stream.on('end', function () {
    // we need to set this flag everywhere where we want connection to close
    if (connection._closing) {
      return;
    }

    if (!connection._protocolError) { // no particular error message before disconnect
      connection._protocolError = new Error('Connection lost: The server closed the connection.');
      connection._protocolError.fatal = true;
      connection._protocolError.code = 'PROTOCOL_CONNECTION_LOST';
    }

    connection._notifyError(connection._protocolError);
  });
  var handshakeCommand;
  if (!this.config.isServer) {
    handshakeCommand = new Commands.ClientHandshake(this.config.clientFlags);
    handshakeCommand.on('end', function () {
      connection._handshakePacket = handshakeCommand.handshake;
      connection.threadId = handshakeCommand.handshake.connectionId;
      connection.emit('connect', handshakeCommand.handshake);
    });
    handshakeCommand.on('error', function (err) {
      connection._notifyError(err);
    });
    this.addCommand(handshakeCommand);
  }

  // in case there was no initiall handshake but we need to read sting, assume it utf-8
  // most common example: "Too many connections" error ( packet is sent immediately on connection attempt, we don't know server
encoding yet)
  // will be overwrittedn with actial encoding value as soon as server handshake packet is received
  this.serverEncoding = 'utf8';

  if (this.config.connectTimeout) {
    var timeoutHandler = this._handleTimeoutError.bind(this);
    this.connectTimeout = Timers.setTimeout(timeoutHandler, this.config.connectTimeout);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.createQuery" id="apidoc.element.mysql2.Connection.createQuery">
        function <span class="apidocSignatureSpan">mysql2.Connection.</span>createQuery
        <span class="apidocSignatureSpan">(sql, values, cb, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createQuery(sql, values, cb, config) {
  var options = {
    rowsAsArray: config.rowsAsArray
  };
  if (typeof sql === 'object') {
    // query(options, cb)
    options = sql;
    if (typeof values === 'function') {
      cb = values;
    } else if (values !== undefined) {
      options.values = values;
    }
  } else if (typeof values === 'function') {
    // query(sql, cb)
    cb = values;
    options.sql = sql;
    options.values = undefined;
  } else {
    // query(sql, values, cb)
    options.sql = sql;
    options.values = values;
  }
  return new Commands.Query(options, cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Connection.prototype.query = function query (sql, values, cb) {
  var cmdQuery;
  if (sql.constructor == Commands.Query) {
    cmdQuery = sql;
  } else {
    cmdQuery = Connection.<span class="apidocCodeKeywordSpan">createQuery</span>(sql, values, cb, this.config);
  }
  this._resolveNamedPlaceholders(cmdQuery);
  var rawSql = this.format(cmdQuery.sql, cmdQuery.values || []);
  cmdQuery.sql = rawSql;
  return this.addCommand(cmdQuery);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.statementKey" id="apidoc.element.mysql2.Connection.statementKey">
        function <span class="apidocSignatureSpan">mysql2.Connection.</span>statementKey
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">statementKey = function (options) {
  return (typeof options.nestTables) +
    '/' + options.nestTables + '/' + options.rowsAsArray + options.sql;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Connection.prototype.unprepare = function unprepare (sql) {
  var options = {};
  if (typeof sql === 'object') {
    options = sql;
  } else {
    options.sql = sql;
  }
  var key = Connection.<span class="apidocCodeKeywordSpan">statementKey</span>(options);
  var stmt = this._statements.get(key);
  if (stmt) {
    this._statements.del(key);
    stmt.close();
  }
  return stmt;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.super_" id="apidoc.element.mysql2.Connection.super_">
        function <span class="apidocSignatureSpan">mysql2.Connection.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.Connection.prototype" id="apidoc.module.mysql2.Connection.prototype">module mysql2.Connection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._addCommandClosedState" id="apidoc.element.mysql2.Connection.prototype._addCommandClosedState">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_addCommandClosedState
        <span class="apidocSignatureSpan">(cmd)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_addCommandClosedState = function (cmd) {
  var err = new Error('Can\'t add new command when connection is in closed state');
  err.fatal = true;
  if (cmd.onResult) {
    cmd.onResult(err);
  } else {
    this.emit('error', err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._binlogDump" id="apidoc.element.mysql2.Connection.prototype._binlogDump">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_binlogDump
        <span class="apidocSignatureSpan">(opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function binlogDump(opts, cb) {
  return this.addCommand(new Commands.BinlogDump(opts, cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
stream._read = function () {
  return {
    data: test++
  };
};
var connection = this;
connection._registerSlave(opts, function (err) {
  var dumpCmd = connection.<span class="apidocCodeKeywordSpan">_binlogDump</span>(opts);
  dumpCmd.on('event', function (ev) {
    stream.push(ev);
  });
  dumpCmd.on('eof', function () {
    stream.push(null);
    // if non-blocking, then close stream to prevent errors
    if (opts.flags &amp;&amp; (opts.flags &amp; 0x01)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._bumpCompressedSequenceId" id="apidoc.element.mysql2.Connection.prototype._bumpCompressedSequenceId">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_bumpCompressedSequenceId
        <span class="apidocSignatureSpan">(numPackets)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_bumpCompressedSequenceId = function (numPackets) {
  this.compressedSequenceId += numPackets;
  this.compressedSequenceId %= 256;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (deflatedLength !== 0) {
  connection.inflateQueue.push(function (task) {
    zlib.inflate(body, function (err, data) {
      if (err) {
        connection._handleNetworkError(err);
        return;
      }
      connection.<span class="apidocCodeKeywordSpan">_bumpCompressedSequenceId</span>(packet.numPackets);
      connection._inflatedPacketsParser.execute(data);
      task.done();
    });
  });
} else {
  connection.inflateQueue.push(function (task) {
    connection._bumpCompressedSequenceId(packet.numPackets);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._bumpSequenceId" id="apidoc.element.mysql2.Connection.prototype._bumpSequenceId">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_bumpSequenceId
        <span class="apidocSignatureSpan">(numPackets)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_bumpSequenceId = function (numPackets) {
  this.sequenceId += numPackets;
  this.sequenceId %= 256;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (length &lt; MAX_PACKET_LENGTH) {
  packet.writeHeader(this.sequenceId);
  if (this.config.debug) {
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + this._command._commandName + '
;#' + this._command.stateName() + '(' + [this.sequenceId, packet._name, packet.length()].join(',') + &amp;#
x27;)');
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + packet.buffer.toString('hex
'));
  }
  this.<span class="apidocCodeKeywordSpan">_bumpSequenceId</span>(1);
  this.write(packet.buffer);
} else {
  if (this.config.debug) {
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== Writing large packet, raw content not written
:');
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + this._command._commandName + '
;#' + this._command.stateName() + '(' + [this.sequenceId, packet._name, packet.length()].join(',') + &amp;#
x27;)');
  }
  for (offset = 4; offset &lt; 4 + length; offset += MAX_PACKET_LENGTH) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._handleFatalError" id="apidoc.element.mysql2.Connection.prototype._handleFatalError">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_handleFatalError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleFatalError = function (err) {
  var connection = this;
  err.fatal = true;
  // stop receiving packets
  connection.stream.removeAllListeners('data');
  connection.addCommand = connection._addCommandClosedState;
  connection.write = function () {
    connection.emit('error', new Error('Can\'t write in closed state'));
  };
  connection._notifyError(err);
  connection._fatalError = err;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // seqqueue is used here because zlib async execution is routed via thread pool
  // internally and when we have multiple compressed packets arriving we need
  // to assemble uncompressed result sequentially
  (function (seqId) {
    connection.deflateQueue.push(function (task) {
      zlib.deflate(buffer, function (err, compressed) {
if (err) {
  connection.<span class="apidocCodeKeywordSpan">_handleFatalError</span>(err);
  return;
}
var compressedLength = compressed.length;

if (compressedLength &lt; packetLen) {
  compressHeader.writeUInt8(compressedLength &amp; 0xff, 0);
  compressHeader.writeUInt16LE(compressedLength &gt;&gt; 8, 1);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._handleNetworkError" id="apidoc.element.mysql2.Connection.prototype._handleNetworkError">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_handleNetworkError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleNetworkError = function (err) {
  this._handleFatalError(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var body = packet.readBuffer();


if (deflatedLength !== 0) {
  connection.inflateQueue.push(function (task) {
    zlib.inflate(body, function (err, data) {
      if (err) {
        connection.<span class="apidocCodeKeywordSpan">_handleNetworkError</span>(err);
        return;
      }
      connection._bumpCompressedSequenceId(packet.numPackets);
      connection._inflatedPacketsParser.execute(data);
      task.done();
    });
  });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._handleTimeoutError" id="apidoc.element.mysql2.Connection.prototype._handleTimeoutError">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_handleTimeoutError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleTimeoutError = function () {
  if (this.connectTimeout) {
    Timers.clearTimeout(this.connectTimeout);
    this.connectTimeout = null;
  }

  this.stream.destroy &amp;&amp; this.stream.destroy();

  var err = new Error('connect ETIMEDOUT');
  err.errorno = 'ETIMEDOUT';
  err.code = 'ETIMEDOUT';
  err.syscall = 'connect';

  this._handleNetworkError(err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._notifyError" id="apidoc.element.mysql2.Connection.prototype._notifyError">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_notifyError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_notifyError = function (err) {
  var connection = this;

  // prevent from emitting 'PROTOCOL_CONNECTION_LOST' after EPIPE or ECONNRESET
  if (connection._fatalError) {
    return;
  }

  var command;

  // if there is no active command, notify connection
  // if there are commands and all of them have callbacks, pass error via callback
  var bubbleErrorToConnection = !connection._command;
  if (connection._command &amp;&amp; connection._command.onResult) {
    connection._command.onResult(err);
    connection._command = null;
  } else {
    bubbleErrorToConnection = true;
  }
  while ((command = connection._commands.shift())) {
    if (command.onResult) {
      command.onResult(err);
    } else {
      bubbleErrorToConnection = true;
    }
  }
  // notify connection if some comands in the queue did not have callbacks
  // or if this is pool connection ( so it can be removed from pool )
  if (bubbleErrorToConnection || connection._pool) {
    connection.emit('error', err);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (!connection._protocolError) { // no particular error message before disconnect
    connection._protocolError = new Error('Connection lost: The server closed the connection.');
    connection._protocolError.fatal = true;
    connection._protocolError.code = 'PROTOCOL_CONNECTION_LOST';
  }

  connection.<span class="apidocCodeKeywordSpan">_notifyError</span>(connection._protocolError);
});
var handshakeCommand;
if (!this.config.isServer) {
  handshakeCommand = new Commands.ClientHandshake(this.config.clientFlags);
  handshakeCommand.on('end', function () {
    connection._handshakePacket = handshakeCommand.handshake;
    connection.threadId = handshakeCommand.handshake.connectionId;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._registerSlave" id="apidoc.element.mysql2.Connection.prototype._registerSlave">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_registerSlave
        <span class="apidocSignatureSpan">(opts, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function registerSlave(opts, cb) {
  return this.addCommand(new Commands.RegisterSlave(opts, cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var stream = new Readable({objectMode: true});
stream._read = function () {
  return {
    data: test++
  };
};
var connection = this;
connection.<span class="apidocCodeKeywordSpan">_registerSlave</span>(opts, function (err) {
  var dumpCmd = connection._binlogDump(opts);
  dumpCmd.on('event', function (ev) {
    stream.push(ev);
  });
  dumpCmd.on('eof', function () {
    stream.push(null);
    // if non-blocking, then close stream to prevent errors
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._resetSequenceId" id="apidoc.element.mysql2.Connection.prototype._resetSequenceId">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_resetSequenceId
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_resetSequenceId = function () {
  this.sequenceId = 0;
  this.compressedSequenceId = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return 'unknown name';
};

Command.prototype.execute = function (packet, connection) {

if (!this.next) {
  this.next = this.start;
  connection.<span class="apidocCodeKeywordSpan">_resetSequenceId</span>();
}

if (packet &amp;&amp; packet.isError()) {
  var err = packet.asError(connection.clientEncoding);
  if (this.onResult) {
    this.onResult(err);
  } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype._resolveNamedPlaceholders" id="apidoc.element.mysql2.Connection.prototype._resolveNamedPlaceholders">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>_resolveNamedPlaceholders
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_resolveNamedPlaceholders = function (options) {
  var unnamed;
  if (this.config.namedPlaceholders || options.namedPlaceholders) {
    if (convertNamedPlaceholders === null) {
      convertNamedPlaceholders = require('named-placeholders')();
    }
    unnamed = convertNamedPlaceholders(options.sql, options.values);
    options.sql = unnamed[0];
    options.values = unnamed[1];
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (typeof this.config.queryFormat == 'function') {
    return this.config.queryFormat.call(this, sql, values, this.config.timezone);
  }
  var opts = {
    sql: sql,
    values: values
  };
  this.<span class="apidocCodeKeywordSpan">_resolveNamedPlaceholders</span>(opts);
  return SqlString.format(opts.sql, opts.values, this.config.stringifyObjects, this.config.timezone);
};

Connection.prototype.escape = function (value) {
  return SqlString.escape(value, false, this.config.timezone);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.addCommand" id="apidoc.element.mysql2.Connection.prototype.addCommand">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>addCommand
        <span class="apidocSignatureSpan">(cmd)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addCommand = function (cmd) {

  // this.compressedSequenceId = 0;
  // this.sequenceId = 0;

  if (this.config.debug) {
    console.log('Add command: ' + arguments.callee.caller.name);
    cmd._commandName = arguments.callee.caller.name;
  }
  if (!this._command) {
    this._command = cmd;
    this.handlePacket();
  } else {
    this._commands.push(cmd);
  }
  return cmd;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    connection._handshakePacket = handshakeCommand.handshake;
    connection.threadId = handshakeCommand.handshake.connectionId;
    connection.emit('connect', handshakeCommand.handshake);
  });
  handshakeCommand.on('error', function (err) {
    connection._notifyError(err);
  });
  this.<span class="apidocCodeKeywordSpan">addCommand</span>(handshakeCommand);
}

// in case there was no initiall handshake but we need to read sting, assume it utf-8
// most common example: "Too many connections" error ( packet is sent immediately on connection attempt, we don't
 know server encoding yet)
// will be overwrittedn with actial encoding value as soon as server handshake packet is received
this.serverEncoding = 'utf8';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.beginTransaction" id="apidoc.element.mysql2.Connection.prototype.beginTransaction">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>beginTransaction
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">beginTransaction = function (cb) {
  return this.query('START TRANSACTION', cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.changeUser" id="apidoc.element.mysql2.Connection.prototype.changeUser">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>changeUser
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function changeUser(options, callback) {
  if (!callback &amp;&amp; typeof options === 'function') {
    callback = options;
    options = {};
  }

  var charsetNumber = (options.charset) ? ConnectionConfig.getCharsetNumber(options.charset) : this.config.charsetNumber;

  return this.addCommand(new Commands.ChangeUser({
    user          : options.user || this.config.user,
    password      : options.password || this.config.password,
    passwordSha1  : options.passwordSha1 || this.config.passwordSha1,
    database      : options.database || this.config.database,
    timeout       : options.timeout,
    charsetNumber : charsetNumber,
    currentConfig : this.config
  }, function (err) {
    if (err) {
      err.fatal = true;
    }

    if (callback) {
      callback(err);
    }
  }));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

0.15.1 - 18/02/2015
 - add io.js 1.0 - 1.2 to build matrix
 - add windows CI using Appveyor                             #151 #152

0.15.0 - 1/10/2015
 - connection.threadId
 - connection.<span class="apidocCodeKeywordSpan">changeUser</span>()                                   #63
 - named placeholders                                        #117
 - new prepared statements api                               #132 #139
 - support LOAD INFILE                                       #64 #142
 - refactored faster packet parser                           #140
 - lazy parse rarely used column definition fields           #137

0.14.1 - 9/12/2014
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.close" id="apidoc.element.mysql2.Connection.prototype.close">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>close
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function () {
  this._closing = true;
  this.stream.end();
  var connection = this;
  connection.addCommand = connection._addCommandClosedState;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._command = null;

this._paused = false;
this._paused_packets = new Queue();

this._statements = LRU({
  max: this.config.maxPreparedStatements,
  dispose: function (key, statement) { statement.<span class="apidocCodeKeywordSpan">close</span>(); }
});

// TODO: make it lru cache
// https://github.com/mercadolibre/node-simple-lru-cache
// or https://github.com/rsms/js-lru
// or https://github.com/monsur/jscache
// or https://github.com/isaacs/node-lru-cache
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.commit" id="apidoc.element.mysql2.Connection.prototype.commit">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>commit
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">commit = function (cb) {
  return this.query('COMMIT', cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.connect" id="apidoc.element.mysql2.Connection.prototype.connect">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>connect
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connect = function (cb) {
  if (!cb) {
    return;
  }
  var connectCalled = 0;

  function callbackOnce (isErrorHandler) {
    return function (param) {
      if (!connectCalled) {
        if (isErrorHandler) {
          cb(param);
        } else {
          cb(null, param);
        }
      }
      connectCalled = 1;
    };
  }
  this.once('error', callbackOnce(true));
  this.once('connect', callbackOnce(false));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// if host is given, connect to host:3306

// TODO: use `/usr/local/mysql/bin/mysql_config --socket` output? as default socketPath
// if there is no host/port and no socketPath parameters?

if (!opts.config.stream) {
  if (opts.config.socketPath) {
    this.stream = Net.<span class="apidocCodeKeywordSpan">connect</span>(opts.config.socketPath);
  } else {
    this.stream = Net.connect(opts.config.port, opts.config.host);
  }
} else {
  // if stream is a function, treat it as "stream agent / factory"
  if (typeof opts.config.stream == 'function') {
    this.stream = opts.config.stream(opts);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.createBinlogStream" id="apidoc.element.mysql2.Connection.prototype.createBinlogStream">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>createBinlogStream
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createBinlogStream = function (opts) {
  // TODO: create proper stream class
  // TODO: use through2
  var test = 1;
  var Readable = require('stream').Readable;
  var stream = new Readable({objectMode: true});
  stream._read = function () {
    return {
      data: test++
    };
  };
  var connection = this;
  connection._registerSlave(opts, function (err) {
    var dumpCmd = connection._binlogDump(opts);
    dumpCmd.on('event', function (ev) {
      stream.push(ev);
    });
    dumpCmd.on('eof', function () {
      stream.push(null);
      // if non-blocking, then close stream to prevent errors
      if (opts.flags &amp;&amp; (opts.flags &amp; 0x01)) {
        connection.close();
      }
    });
    // TODO: pipe errors as well
  });
  return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.destroy" id="apidoc.element.mysql2.Connection.prototype.destroy">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  this.close();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- (perf) replace double-ended-queue with denqueue       #444
- (feat) automatically track client encoding change     #437, #389
- (feat) add support for CLIENT_SESSION_TRACK info      #388, #436

1.1.1 ( 06/10/2016 )
- (fix) do not crash when result of execute().stream()
  is paused                                             #174, #424
- (fix) do not call .<span class="apidocCodeKeywordSpan">destroy</span>() on stream when connect timeout
  is fired (destroy() method exist only on Net stream
  but not on custom streams)                             #417, #414
- (internal) parser generator now uses generate-function
  package to prepare dynamically generated parser func   #412, #167
- (docs) fix readme test/code errors                     #413
- (tests) use docker+mysql 5.7 on travis                 #410
- (fix) use correct encoding for JSON type (despite
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.end" id="apidoc.element.mysql2.Connection.prototype.end">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>end
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (callback) {
  var connection = this;

  if (this.config.isServer) {
    connection._closing = true;
    var quitCmd = new EventEmitter();
    setImmediate(function () {
      connection.stream.end();
      quitCmd.emit('end');
    });
    return quitCmd;
  }

  // trigger error if more commands enqueued after end command
  var quitCmd = this.addCommand(new Commands.Quit(callback));
  connection.addCommand = connection._addCommandClosedState;
  return quitCmd;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- build: add iojs 1.8.x to matrix

0.15.5 - 08/04/2015
- fix broken 'stream rows' functionality                     #165, #166
- add io.js 1.6 to build matrix

0.15.4 - 11/03/2015
- added COM_QUIT command, sent from conn.<span class="apidocCodeKeywordSpan">end</span>()               #163, #150
- io.js 1.5
- don't crash on unexpected protocol packets, emit           #164, #160
 connection error event instead

0.15.3 - 24/02/2015
- multiple results support in binary protocol               #157 #26 #27
- add io.js 1.4 to CI matrix
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.escape" id="apidoc.element.mysql2.Connection.prototype.escape">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>escape
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (value) {
  return SqlString.escape(value, false, this.config.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    values: values
  };
  this._resolveNamedPlaceholders(opts);
  return SqlString.format(opts.sql, opts.values, this.config.stringifyObjects, this.config.timezone);
};

Connection.prototype.escape = function (value) {
  return SqlString.<span class="apidocCodeKeywordSpan">escape</span>(value, false, this.config.timezone);
};

Connection.prototype.escapeId = function escapeId (value) {
  return SqlString.escapeId(value, false);
};

var convertNamedPlaceholders = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.escapeId" id="apidoc.element.mysql2.Connection.prototype.escapeId">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>escapeId
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value) {
  return SqlString.escapeId(value, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- update error codes from node-mysql                         #201 209
- bump named-placeholders to 1.0.0, fixes problems with
  placeholders inside quotation ( https://github.com/sidorares/named-placeholders/issues/2 )
- catch exceptions during named placeholders processing      #187


0.15.8 - 22/06/2015
- Add .<span class="apidocCodeKeywordSpan">escapeId</span>() to Connection and Pool                     #180
- Build: iojs 2.2.1 &amp; 2.3.0
- Binary protocol: fix crash when server return null
  for 'NOT NULL' column                                      #178

0.15.7 - ?

0.15.6 - 04/06/2015
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.execute" id="apidoc.element.mysql2.Connection.prototype.execute">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>execute
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function execute(sql, values, cb) {
  var options = {};
  if (typeof sql === 'object') {
    // execute(options, cb)
    options = sql;
    if (typeof values === 'function') {
      cb = values;
    } else {
      options.values = options.values || values;
    }
  } else if (typeof values === 'function') {
    // execute(sql, cb)
    cb = values;
    options.sql = sql;
    options.values = undefined;
  } else {
    // execute(sql, values, cb)
    options.sql = sql;
    options.values = values;
  }
  this._resolveNamedPlaceholders(options);

  var executeCommand = new Commands.Execute(options, cb);
  var prepareCommand = new Commands.Prepare(options, function (err, stmt) {
    if (err) {
      // skip execute command if prepare failed, we have main
      // combined callback here
      executeCommand.start = function () { return null; };

      if (cb) {
        cb(err);
      } else {
        executeCommand.emit('error', err);
      }
      return;
    }

    executeCommand.statement = stmt;
  });

  this.addCommand(prepareCommand);
  this.addCommand(executeCommand);
  return executeCommand;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PromiseConnection.prototype.execute = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">execute</span>(query, params, done);
    } else {
      c.execute(query, done);
    }
  });
};

PromiseConnection.prototype.end = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.format" id="apidoc.element.mysql2.Connection.prototype.format">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>format
        <span class="apidocSignatureSpan">(sql, values)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">format = function (sql, values) {
  if (typeof this.config.queryFormat == 'function') {
    return this.config.queryFormat.call(this, sql, values, this.config.timezone);
  }
  var opts = {
    sql: sql,
    values: values
  };
  this._resolveNamedPlaceholders(opts);
  return SqlString.format(opts.sql, opts.values, this.config.stringifyObjects, this.config.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return this.config.queryFormat.call(this, sql, values, this.config.timezone);
  }
  var opts = {
    sql: sql,
    values: values
  };
  this._resolveNamedPlaceholders(opts);
  return SqlString.<span class="apidocCodeKeywordSpan">format</span>(opts.sql, opts.values, this.config.stringifyObjects, this.config
.timezone);
};

Connection.prototype.escape = function (value) {
  return SqlString.escape(value, false, this.config.timezone);
};

Connection.prototype.escapeId = function escapeId (value) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.handlePacket" id="apidoc.element.mysql2.Connection.prototype.handlePacket">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>handlePacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handlePacket = function (packet) {
  if (this._paused) {
    this._paused_packets.push(packet);
    return;
  }
  if (packet) {
    if (this.sequenceId !== packet.sequenceId) {
      console.error('Warning: got packets out of order. Expected ' +
        this.sequenceId + ' but received ' + packet.sequenceId);
    }
    this._bumpSequenceId(packet.numPackets);
  }

  if (this.config.debug) {
    if (packet) {
      console.log(' raw: ' + packet.buffer.slice(packet.offset, packet.offset + packet.length()).toString('hex'));
      console.trace();
      var commandName = this._command ? this._command._commandName : '(no command)';
      var stateName = this._command ? this._command.stateName() : '(no command)';
      console.log(this._internalId + ' ' + this.connectionId + ' ==&gt; ' + commandName + '#' + stateName + '(' + [packet.sequenceId
, packet.type(), packet.length()].join(',') + ')');
    }
  }
  if (!this._command) {
    this.protocolError('Unexpected packet while no commands in the queue', 'PROTOCOL_UNEXPECTED_PACKET');
    this.close();
    return;
  }

  var done = this._command.execute(packet, this);
  if (done) {

    this._command = this._commands.shift();
    if (this._command) {
      this.sequenceId = 0;
      this.compressedSequenceId = 0;
      this.handlePacket();
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function enableCompression (connection) {
connection._lastWrittenPacketId = 0;
connection._lastReceivedPacketId = 0;

connection._handleCompressedPacket = handleCompressedPacket;
connection._inflatedPacketsParser = new PacketParser(function (p) {
  connection.<span class="apidocCodeKeywordSpan">handlePacket</span>(p);
}, 4);
connection._inflatedPacketsParser._lastPacket = 0;
connection.packetParser = new PacketParser(function (packet) {
  connection._handleCompressedPacket(packet);
}, 7);

connection.writeUncompressed = connection.write;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.keyFromFields" id="apidoc.element.mysql2.Connection.prototype.keyFromFields">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>keyFromFields
        <span class="apidocSignatureSpan">(fields, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function keyFromFields(fields, options) {
  var res = (typeof options.nestTables) + '/' + options.nestTables + '/' + options.rowsAsArray
    + options.supportBigNumbers + '/' + options.bigNumberStrings + '/' + typeof options.typeCast;
  for (var i = 0; i &lt; fields.length; ++i) {
    res += '/' + fields[i].name + ':' + fields[i].columnType + ':' + fields[i].flags;
  }
  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this._unpipeStream = function () {};
  this._streamFactory = options.infileStreamFactory;
  this._connection = null;
}
util.inherits(Execute, Command);

Execute.prototype.buildParserFromFields = function (fields, connection) {
  var parserKey = connection.<span class="apidocCodeKeywordSpan">keyFromFields</span>(fields, this.options);
  var parser = connection.binaryProtocolParsers[parserKey];
  if (!parser) {
    parser = compileParser(fields, this.options, connection.config);
    connection.binaryProtocolParsers[parserKey] = parser;
  }
  return parser;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.pause" id="apidoc.element.mysql2.Connection.prototype.pause">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>pause
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function pause() {
  this._paused = true;
  this.stream.pause();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

0.14.1 - 9/12/2014
 - stream connection option now can be a function            #80
 - bugfix/prepared statements: fix case when no columns
 in statement header but there are columns in results      #130

0.14.0 - 26/11/2014
- added connection.<span class="apidocCodeKeywordSpan">pause</span>() and connection.resume()         #129

0.13.0
- connection errors sent to all commands in queue
- server-side authentication support                       #122
- server.listen() is now chainable (returns server)
- allow to login using sha1(password)                      #124
- Query.sql as alias to Query.query                        #121
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.ping" id="apidoc.element.mysql2.Connection.prototype.ping">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>ping
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ping(cb) {
  return this.addCommand(new Commands.Ping(cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.pipe" id="apidoc.element.mysql2.Connection.prototype.pipe">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>pipe
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pipe = function () {
  var connection = this;
  if (this.stream instanceof Net.Stream) {
    this.stream.ondata = function (data, start, end) {
      connection.packetParser.execute(data, start, end);
    };
  } else {
    this.stream.on('data', function (data) {
      connection.packetParser.execute(data.parent, data.offset, data.offset + data.length);
    });
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});
var securePair = Tls.createSecurePair(credentials, false, true, rejectUnauthorized);

if (stream.ondata) {
  stream.ondata = null;
}
stream.removeAllListeners('data');
stream.<span class="apidocCodeKeywordSpan">pipe</span>(securePair.encrypted);
securePair.encrypted.pipe(stream);
securePair.cleartext.on('data', function (data) {
  connection.packetParser.execute(data);
});
connection.write = function (buffer) {
  securePair.cleartext.write(buffer);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.prepare" id="apidoc.element.mysql2.Connection.prototype.prepare">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>prepare
        <span class="apidocSignatureSpan">(options, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function prepare(options, cb) {
  if (typeof options == 'string') {
    options = {sql: options};
  }
  return this.addCommand(new Commands.Prepare(options, cb));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.protocolError" id="apidoc.element.mysql2.Connection.prototype.protocolError">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>protocolError
        <span class="apidocSignatureSpan">(message, code)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">protocolError = function (message, code) {
  var err = new Error(message);
  err.fatal = true;
  err.code = code || 'PROTOCOL_ERROR';
  this.emit('error', err);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    console.trace();
    var commandName = this._command ? this._command._commandName : '(no command)';
    var stateName = this._command ? this._command.stateName() : '(no command)';
    console.log(this._internalId + ' ' + this.connectionId + ' ==&gt; ' + commandName + '#' + stateName
 + '(' + [packet.sequenceId, packet.type(), packet.length()].join(',') + ')');
  }
}
if (!this._command) {
  this.<span class="apidocCodeKeywordSpan">protocolError</span>('Unexpected packet while no commands in the queue', &amp;#
x27;PROTOCOL_UNEXPECTED_PACKET');
  this.close();
  return;
}

var done = this._command.execute(packet, this);
if (done) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.query" id="apidoc.element.mysql2.Connection.prototype.query">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function query(sql, values, cb) {
  var cmdQuery;
  if (sql.constructor == Commands.Query) {
    cmdQuery = sql;
  } else {
    cmdQuery = Connection.createQuery(sql, values, cb, this.config);
  }
  this._resolveNamedPlaceholders(cmdQuery);
  var rawSql = this.format(cmdQuery.sql, cmdQuery.values || []);
  cmdQuery.sql = rawSql;
  return this.addCommand(cmdQuery);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

PromiseConnection.prototype.query = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">query</span>(query, params, done);
    } else {
      c.query(query, done);
    }
  });
};

PromiseConnection.prototype.execute = function (query, params) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.resume" id="apidoc.element.mysql2.Connection.prototype.resume">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>resume
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function resume() {
  var packet;
  this._paused = false;
  while ((packet = this._paused_packets.shift())) {
    this.handlePacket(packet);
    // don't resume if packet hander paused connection
    if (this._paused) {
      return;
    }
  }
  this.stream.resume();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

0.14.1 - 9/12/2014
 - stream connection option now can be a function            #80
 - bugfix/prepared statements: fix case when no columns
 in statement header but there are columns in results      #130

0.14.0 - 26/11/2014
- added connection.pause() and connection.<span class="apidocCodeKeywordSpan">resume</span>()         #129

0.13.0
- connection errors sent to all commands in queue
- server-side authentication support                       #122
- server.listen() is now chainable (returns server)
- allow to login using sha1(password)                      #124
- Query.sql as alias to Query.query                        #121
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.rollback" id="apidoc.element.mysql2.Connection.prototype.rollback">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>rollback
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rollback = function (cb) {
  return this.query('ROLLBACK', cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.serverHandshake" id="apidoc.element.mysql2.Connection.prototype.serverHandshake">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>serverHandshake
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function serverHandshake(args) {
  this.serverConfig = args;
  this.serverConfig.encoding = CharsetToEncoding[this.serverConfig.characterSet];
  return this.addCommand(new Commands.ServerHandshake(args));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.startTLS" id="apidoc.element.mysql2.Connection.prototype.startTLS">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>startTLS
        <span class="apidocSignatureSpan">(onSecure)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _startTLS(onSecure) {
  if (this.config.debug) {
    console.log('Upgrading connection to TLS');
  }
  var connection = this;
  var stream = this.stream;
  var secureContext = Tls.createSecureContext({
    ca         : this.config.ssl.ca,
    cert       : this.config.ssl.cert,
    ciphers    : this.config.ssl.ciphers,
    key        : this.config.ssl.key,
    passphrase : this.config.ssl.passphrase
  });

  var rejectUnauthorized = this.config.ssl.rejectUnauthorized;
  var secureEstablished = false;
  var secureSocket = new Tls.TLSSocket(connection.stream, {
    rejectUnauthorized : rejectUnauthorized,
    requestCert        : true,
    secureContext      : secureContext,
    isServer           : false
  });

  // error handler for secure socket
  secureSocket.on('_tlsError', function (err) {
    if (secureEstablished) {
      connection._handleNetworkError(err);
    } else {
      onSecure(err);
    }
  });

  secureSocket.on('secure', function () {
    secureEstablished = true;
    onSecure(rejectUnauthorized ? this.ssl.verifyError() : null);
  });
  secureSocket.on('data', function (data) {
    connection.packetParser.execute(data);
  });
  connection.write = function (buffer) {
    secureSocket.write(buffer);
  };
  // start TLS communications
  secureSocket._start();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  err.fatal = true;
  command.emit('error', err);
  return false;
}
// send ssl upgrade request and immediately upgrade connection to secure
this.clientFlags |= ClientConstants.SSL;
this.sendSSLRequest(connection);
connection.<span class="apidocCodeKeywordSpan">startTLS</span>(function (err) {
  // after connection is secure
  if (err) {
    // SSL negotiation error are fatal
    err.code = 'HANDSHAKE_SSL_ERROR';
    err.fatal = true;
    command.emit('error', err);
    return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.unprepare" id="apidoc.element.mysql2.Connection.prototype.unprepare">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>unprepare
        <span class="apidocSignatureSpan">(sql)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function unprepare(sql) {
  var options = {};
  if (typeof sql === 'object') {
    options = sql;
  } else {
    options.sql = sql;
  }
  var key = Connection.statementKey(options);
  var stmt = this._statements.get(key);
  if (stmt) {
    this._statements.del(key);
    stmt.close();
  }
  return stmt;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.write" id="apidoc.element.mysql2.Connection.prototype.write">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>write
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (buffer) {
  var connection = this;
  this.stream.write(buffer, function (err) {
    if (err) {
      connection._handleNetworkError(err);
    }
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (bubbleErrorToConnection || connection._pool) {
    connection.emit('error', err);
  }
};

Connection.prototype.write = function (buffer) {
  var connection = this;
  this.stream.<span class="apidocCodeKeywordSpan">write</span>(buffer, function (err) {
    if (err) {
      connection._handleNetworkError(err);
    }
  });
};

// http://dev.mysql.com/doc/internals/en/sequence-id.html
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.writeColumns" id="apidoc.element.mysql2.Connection.prototype.writeColumns">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeColumns
        <span class="apidocSignatureSpan">(columns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.toPacket(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// row is array of columns, not hash
Connection.prototype.writeTextRow = function (column) {
this.writePacket(Packets.TextRow.toPacket(column, this.serverConfig.encoding));
};

Connection.prototype.writeTextResult = function (rows, columns) {
var connection = this;
connection.<span class="apidocCodeKeywordSpan">writeColumns</span>(columns);
rows.forEach(function (row) {
  var arrayRow = new Array(columns.length);
  columns.forEach(function (column) {
    arrayRow.push(row[column.name]);
  });
  connection.writeTextRow(arrayRow);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.writeEof" id="apidoc.element.mysql2.Connection.prototype.writeEof">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeEof
        <span class="apidocSignatureSpan">(warnings, statusFlags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeEof = function (warnings, statusFlags) {
  this.writePacket(Packets.EOF.toPacket(warnings, statusFlags));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.toPacket(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.<span class="apidocCodeKeywordSpan">writeEof</span>();
};

// row is array of columns, not hash
Connection.prototype.writeTextRow = function (column) {
  this.writePacket(Packets.TextRow.toPacket(column, this.serverConfig.encoding));
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.writeError" id="apidoc.element.mysql2.Connection.prototype.writeError">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeError
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeError = function (args) {
  // if we want to send error before initial hello was sent, use default encoding
  var encoding = this.serverConfig ? this.serverConfig.encoding : 'cesu8';
  this.writePacket(Packets.Error.toPacket(args, this.serverConfig.encoding));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }, function (err, mysqlError) {
    // if (err)
    if (!mysqlError) {
      connection.writeOk();
    } else {
      // TODO create constants / errorToCode
      // 1045 = ER_ACCESS_DENIED_ERROR
      connection.<span class="apidocCodeKeywordSpan">writeError</span>({message: mysqlError.message || '', code: mysqlError
.code || 1045});
      connection.close();
    }
  });
} catch (err) {
  throw err;
  // TODO
  // connection.writeError(err)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.writeOk" id="apidoc.element.mysql2.Connection.prototype.writeOk">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeOk
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeOk = function (args) {
  if (!args) {
    args = {affectedRows: 0};
  }
  this.writePacket(Packets.OK.toPacket(args, this.serverConfig.encoding));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  address: connection.stream.remoteAddress,
  authPluginData1: this.serverHello.authPluginData1,
  authPluginData2: this.serverHello.authPluginData2,
  authToken: clientHelloReply.authToken
}, function (err, mysqlError) {
  // if (err)
  if (!mysqlError) {
    connection.<span class="apidocCodeKeywordSpan">writeOk</span>();
  } else {
    // TODO create constants / errorToCode
    // 1045 = ER_ACCESS_DENIED_ERROR
    connection.writeError({message: mysqlError.message || '', code: mysqlError.code || 1045});
    connection.close();
  }
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.writePacket" id="apidoc.element.mysql2.Connection.prototype.writePacket">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writePacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writePacket = function (packet) {
  var MAX_PACKET_LENGTH = 16777215;
  var length = packet.length();
  var chunk, offset, header;

  if (length &lt; MAX_PACKET_LENGTH) {
    packet.writeHeader(this.sequenceId);
    if (this.config.debug) {
      console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + this._command._commandName + '#' + this._command.stateName
() + '(' + [this.sequenceId, packet._name, packet.length()].join(',') + ')');
      console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + packet.buffer.toString('hex'));
    }
    this._bumpSequenceId(1);
    this.write(packet.buffer);
  } else {
    if (this.config.debug) {
      console.log(this._internalId + ' ' + this.connectionId + ' &lt;== Writing large packet, raw content not written:');
      console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + this._command._commandName + '#' + this._command.stateName
() + '(' + [this.sequenceId, packet._name, packet.length()].join(',') + ')');
    }
    for (offset = 4; offset &lt; 4 + length; offset += MAX_PACKET_LENGTH) {
      chunk = packet.buffer.slice(offset, offset + MAX_PACKET_LENGTH);
      if (chunk.length === MAX_PACKET_LENGTH) {
        header = Buffer.from([0xff, 0xff, 0xff, this.sequenceId]);
      } else {
        header = Buffer.from([chunk.length &amp; 0xff, (chunk.length &gt;&gt; 8) &amp; 0xff, (chunk.length &gt;&gt; 16) &amp; 0xff, this.sequenceId]);
      }
      this._bumpSequenceId(1);
      this.write(header);
      this.write(chunk);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.<span class="apidocCodeKeywordSpan">writePacket</span>(Packets.ResultSetHeader.toPacket(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.writeTextResult" id="apidoc.element.mysql2.Connection.prototype.writeTextResult">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeTextResult
        <span class="apidocSignatureSpan">(rows, columns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeTextResult = function (rows, columns) {
  var connection = this;
  connection.writeColumns(columns);
  rows.forEach(function (row) {
    var arrayRow = new Array(columns.length);
    columns.forEach(function (column) {
      arrayRow.push(row[column.name]);
    });
    connection.writeTextRow(arrayRow);
  });
  connection.writeEof();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.Connection.prototype.writeTextRow" id="apidoc.element.mysql2.Connection.prototype.writeTextRow">
        function <span class="apidocSignatureSpan">mysql2.Connection.prototype.</span>writeTextRow
        <span class="apidocSignatureSpan">(column)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeTextRow = function (column) {
  this.writePacket(Packets.TextRow.toPacket(column, this.serverConfig.encoding));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var connection = this;
  connection.writeColumns(columns);
  rows.forEach(function (row) {
    var arrayRow = new Array(columns.length);
    columns.forEach(function (column) {
      arrayRow.push(row[column.name]);
    });
    connection.<span class="apidocCodeKeywordSpan">writeTextRow</span>(arrayRow);
  });
  connection.writeEof();
};

Connection.prototype.writeEof = function (warnings, statusFlags) {
  this.writePacket(Packets.EOF.toPacket(warnings, statusFlags));
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.auth_41" id="apidoc.module.mysql2.auth_41">module mysql2.auth_41</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.auth_41.calculateToken" id="apidoc.element.mysql2.auth_41.calculateToken">
        function <span class="apidocSignatureSpan">mysql2.auth_41.</span>calculateToken
        <span class="apidocSignatureSpan">(password, scramble1, scramble2)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function token(password, scramble1, scramble2) {
  // TODO: use buffers (not sure why strings here)
  if (!password) {
    return Buffer.alloc(0);
  }
  var stage1 = sha1(password);
  return module.exports.calculateTokenFromPasswordSha(stage1, scramble1, scramble2);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// TODO: dont split into authPluginData1 and authPluginData2, instead join when 1 &amp; 2 received
var authPluginData1 = authPluginData.slice(0, 8);
var authPluginData2 = authPluginData.slice(8, 20);
var authToken;
if (this.passwordSha1) {
  authToken = auth41.calculateTokenFromPasswordSha(this.passwordSha1, authPluginData1, authPluginData2);
} else {
  authToken = auth41.<span class="apidocCodeKeywordSpan">calculateToken</span>(this.password, authPluginData1, authPluginData2);
}
return authToken;
};

ClientHandshake.prototype.handshakeInit = function (helloPacket, connection) {
var command = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_41.calculateTokenFromPasswordSha" id="apidoc.element.mysql2.auth_41.calculateTokenFromPasswordSha">
        function <span class="apidocSignatureSpan">mysql2.auth_41.</span>calculateTokenFromPasswordSha
        <span class="apidocSignatureSpan">(passwordSha, scramble1, scramble2)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">calculateTokenFromPasswordSha = function (passwordSha, scramble1, scramble2) {
  var stage2 = sha1(passwordSha);
  var stage3 = sha1(scramble1, scramble2, stage2);
  return xor(stage3, passwordSha);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function token (password, scramble1, scramble2) {
  // TODO: use buffers (not sure why strings here)
  if (!password) {
    return Buffer.alloc(0);
  }
  var stage1 = sha1(password);
  return module.exports.<span class="apidocCodeKeywordSpan">calculateTokenFromPasswordSha</span>(stage1, scramble1, scramble2);
}

module.exports.calculateTokenFromPasswordSha = function (passwordSha, scramble1, scramble2) {
  var stage2 = sha1(passwordSha);
  var stage3 = sha1(scramble1, scramble2, stage2);
  return xor(stage3, passwordSha);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_41.doubleSha1" id="apidoc.element.mysql2.auth_41.doubleSha1">
        function <span class="apidocSignatureSpan">mysql2.auth_41.</span>doubleSha1
        <span class="apidocSignatureSpan">(password)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">doubleSha1 = function (password) {
  return sha1(sha1(password));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_41.verifyToken" id="apidoc.element.mysql2.auth_41.verifyToken">
        function <span class="apidocSignatureSpan">mysql2.auth_41.</span>verifyToken
        <span class="apidocSignatureSpan">(publicSeed1, publicSeed2, token, doubleSha)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">verifyToken = function (publicSeed1, publicSeed2, token, doubleSha) {
  var hashStage1 = xor(token, sha1(publicSeed1, publicSeed2, doubleSha));
  var candidateHash2 = sha1(hashStage1);
  // TODO better way to compare buffers?
  return candidateHash2.toString('hex') == doubleSha.toString('hex');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.auth_switch_request" id="apidoc.module.mysql2.auth_switch_request">module mysql2.auth_switch_request</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request.auth_switch_request" id="apidoc.element.mysql2.auth_switch_request.auth_switch_request">
        function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AuthSwitchRequest(opts)
{
  this.pluginName = opts.pluginName;
  this.pluginData = opts.pluginData;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request.fromPacket" id="apidoc.element.mysql2.auth_switch_request.fromPacket">
        function <span class="apidocSignatureSpan">mysql2.auth_switch_request.</span>fromPacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromPacket = function (packet)
{
  var marker = packet.readInt8();
  // assert marker == 0xfe?

  // TODO: use server encoding
  var name = packet.readNullTerminatedString('cesu8');
  var data = packet.readBuffer();

  return new AuthSwitchRequest({
    pluginName: name,
    pluginData: data
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var command = this;

this.on('error', function (e) {
  connection._fatalError = e;
  connection._protocolError = e;
});

this.handshake = Packets.Handshake.<span class="apidocCodeKeywordSpan">fromPacket</span>(helloPacket);
if (connection.config.debug) {
  console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
    flagNames(this.handshake.capabilityFlags).join(', '));
}
connection.serverCapabilityFlags = this.handshake.capabilityFlags;
connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
connection.connectionId = this.handshake.connectionId;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.auth_switch_request.prototype" id="apidoc.module.mysql2.auth_switch_request.prototype">module mysql2.auth_switch_request.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request.prototype.toPacket" id="apidoc.element.mysql2.auth_switch_request.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.auth_switch_request.prototype.</span>toPacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function ()
{
  var length = 6 + this.pluginName.length + this.pluginData.length;
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeInt8(0xfe);

  // TODO: use server encoding
  packet.writeNullTerminatedString(this.pluginName, 'cesu8');
  packet.writeBuffer(this.pluginData);
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.auth_switch_request_more_data" id="apidoc.module.mysql2.auth_switch_request_more_data">module mysql2.auth_switch_request_more_data</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request_more_data.auth_switch_request_more_data" id="apidoc.element.mysql2.auth_switch_request_more_data.auth_switch_request_more_data">
        function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_request_more_data
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AuthSwitchRequestMoreData(data)
{
  this.data = data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request_more_data.fromPacket" id="apidoc.element.mysql2.auth_switch_request_more_data.fromPacket">
        function <span class="apidocSignatureSpan">mysql2.auth_switch_request_more_data.</span>fromPacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromPacket = function (packet)
{
  var marker = packet.readInt8();
  var data = packet.readBuffer();
  return new AuthSwitchRequestMoreData(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var command = this;

this.on('error', function (e) {
  connection._fatalError = e;
  connection._protocolError = e;
});

this.handshake = Packets.Handshake.<span class="apidocCodeKeywordSpan">fromPacket</span>(helloPacket);
if (connection.config.debug) {
  console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
    flagNames(this.handshake.capabilityFlags).join(', '));
}
connection.serverCapabilityFlags = this.handshake.capabilityFlags;
connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
connection.connectionId = this.handshake.connectionId;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request_more_data.verifyMarker" id="apidoc.element.mysql2.auth_switch_request_more_data.verifyMarker">
        function <span class="apidocSignatureSpan">mysql2.auth_switch_request_more_data.</span>verifyMarker
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">verifyMarker = function (packet) {
  return (packet.peekByte() == 0x01);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.auth_switch_request_more_data.prototype" id="apidoc.module.mysql2.auth_switch_request_more_data.prototype">module mysql2.auth_switch_request_more_data.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_request_more_data.prototype.toPacket" id="apidoc.element.mysql2.auth_switch_request_more_data.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.auth_switch_request_more_data.prototype.</span>toPacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function ()
{
  var length = 5 + this.data.length;
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeInt8(0x01);
  packet.writeBuffer(this.data);
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.auth_switch_response" id="apidoc.module.mysql2.auth_switch_response">module mysql2.auth_switch_response</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_response.auth_switch_response" id="apidoc.element.mysql2.auth_switch_response.auth_switch_response">
        function <span class="apidocSignatureSpan">mysql2.</span>auth_switch_response
        <span class="apidocSignatureSpan">(data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function AuthSwitchResponse(data)
{
  if (!Buffer.isBuffer(data)) {
    data = Buffer.from(data);
  }
  this.data = data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_response.fromPacket" id="apidoc.element.mysql2.auth_switch_response.fromPacket">
        function <span class="apidocSignatureSpan">mysql2.auth_switch_response.</span>fromPacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromPacket = function (packet)
{
  var data = packet.readBuffer();
  return new AuthSwitchResponse(data);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var command = this;

this.on('error', function (e) {
  connection._fatalError = e;
  connection._protocolError = e;
});

this.handshake = Packets.Handshake.<span class="apidocCodeKeywordSpan">fromPacket</span>(helloPacket);
if (connection.config.debug) {
  console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
    flagNames(this.handshake.capabilityFlags).join(', '));
}
connection.serverCapabilityFlags = this.handshake.capabilityFlags;
connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
connection.connectionId = this.handshake.connectionId;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.auth_switch_response.prototype" id="apidoc.module.mysql2.auth_switch_response.prototype">module mysql2.auth_switch_response.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.auth_switch_response.prototype.toPacket" id="apidoc.element.mysql2.auth_switch_response.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.auth_switch_response.prototype.</span>toPacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function ()
{
  var length = 4 + this.data.length;
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeBuffer(this.data);
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.binary_row" id="apidoc.module.mysql2.binary_row">module mysql2.binary_row</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.binary_row.binary_row" id="apidoc.element.mysql2.binary_row.binary_row">
        function <span class="apidocSignatureSpan">mysql2.</span>binary_row
        <span class="apidocSignatureSpan">(columns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BinaryRow(columns)
{
  this.columns = columns || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.binary_row.fromPacket" id="apidoc.element.mysql2.binary_row.fromPacket">
        function <span class="apidocSignatureSpan">mysql2.binary_row.</span>fromPacket
        <span class="apidocSignatureSpan">(fields, packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromPacket = function (fields, packet) {
  var columns = new Array(fields.length);
  var ok = packet.readInt8(); // TODO check it's 0
  var nullBitmapLength = Math.floor((fields.length + 7 + 2) / 8);
  // TODO: read and interpret null bitmap
  packet.skip(nullBitmapLength);
  for (var i = 0; i &lt; columns.length; ++i) {
    columns[i] = binaryReader[fields[i].columnType].apply(packet);
  }
  return new BinaryRow(columns);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var command = this;

this.on('error', function (e) {
  connection._fatalError = e;
  connection._protocolError = e;
});

this.handshake = Packets.Handshake.<span class="apidocCodeKeywordSpan">fromPacket</span>(helloPacket);
if (connection.config.debug) {
  console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
    flagNames(this.handshake.capabilityFlags).join(', '));
}
connection.serverCapabilityFlags = this.handshake.capabilityFlags;
connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
connection.connectionId = this.handshake.connectionId;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.binary_row.prototype" id="apidoc.module.mysql2.binary_row.prototype">module mysql2.binary_row.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.binary_row.prototype.toPacket" id="apidoc.element.mysql2.binary_row.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.binary_row.prototype.</span>toPacket
        <span class="apidocSignatureSpan">(sequenceId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function (sequenceId) {
  throw 'Not implemented';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.binlog_dump" id="apidoc.module.mysql2.binlog_dump">module mysql2.binlog_dump</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.binlog_dump.binlog_dump" id="apidoc.element.mysql2.binlog_dump.binlog_dump">
        function <span class="apidocSignatureSpan">mysql2.</span>binlog_dump
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function BinlogDump(opts)
{
  Command.call(this);
  // this.onResult = callback;
  this.opts = opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.binlog_dump.super_" id="apidoc.element.mysql2.binlog_dump.super_">
        function <span class="apidocSignatureSpan">mysql2.binlog_dump.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.binlog_dump.prototype" id="apidoc.module.mysql2.binlog_dump.prototype">module mysql2.binlog_dump.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.binlog_dump.prototype.binlogData" id="apidoc.element.mysql2.binlog_dump.prototype.binlogData">
        function <span class="apidocSignatureSpan">mysql2.binlog_dump.prototype.</span>binlogData
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">binlogData = function (packet) {
  // ok - continue consuming events
  // error - error
  // eof - end of binlog
  if (packet.isEOF()) {
    this.emit('eof');
    return null;
  }

  // binlog event header
  var ok = packet.readInt8();
  var header = new BinlogEventHeader(packet);
  var EventParser = eventParsers[header.eventType];
  var event;
  if (EventParser) {
    event = new EventParser(packet);
  } else {
    event = {
      name: 'UNKNOWN'
    };
  }
  event.header = header;
  this.emit('event', event);
  return BinlogDump.prototype.binlogData;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.binlog_dump.prototype.start" id="apidoc.element.mysql2.binlog_dump.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.binlog_dump.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  var packet = new Packets.BinlogDump(this.opts);
  connection.writePacket(packet.toPacket(1));
  return BinlogDump.prototype.binlogData;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.change_user" id="apidoc.module.mysql2.change_user">module mysql2.change_user</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.change_user.change_user" id="apidoc.element.mysql2.change_user.change_user">
        function <span class="apidocSignatureSpan">mysql2.</span>change_user
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ChangeUser(options, callback)
{
  this.onResult = callback;
  this.user = options.user;
  this.password = options.password;
  this.database = options.database;
  this.passwordSha1 = options.passwordSha1;
  this.charsetNumber = options.charsetNumber;
  this.currentConfig = options.currentConfig;
  Command.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.change_user.super_" id="apidoc.element.mysql2.change_user.super_">
        function <span class="apidocSignatureSpan">mysql2.change_user.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.change_user.prototype" id="apidoc.module.mysql2.change_user.prototype">module mysql2.change_user.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.change_user.prototype.calculateNativePasswordAuthToken" id="apidoc.element.mysql2.change_user.prototype.calculateNativePasswordAuthToken">
        function <span class="apidocSignatureSpan">mysql2.change_user.prototype.</span>calculateNativePasswordAuthToken
        <span class="apidocSignatureSpan">(authPluginData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">calculateNativePasswordAuthToken = function (authPluginData) {
  // TODO: dont split into authPluginData1 and authPluginData2, instead join when 1 &amp; 2 received
  var authPluginData1 = authPluginData.slice(0, 8);
  var authPluginData2 = authPluginData.slice(8, 20);
  var authToken;
  if (this.passwordSha1) {
    authToken = auth41.calculateTokenFromPasswordSha(this.passwordSha1, authPluginData1, authPluginData2);
  } else {
    authToken = auth41.calculateToken(this.password, authPluginData1, authPluginData2);
  }
  return authToken;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  authSwitchHandlerParams.pluginData = asrmd.data;
} else {
  asr = Packets.AuthSwitchRequest.fromPacket(packet);
  authSwitchHandlerParams.pluginName = asr.pluginName;
  authSwitchHandlerParams.pluginData = asr.pluginData;
}
if (authSwitchHandlerParams.pluginName == 'mysql_native_password') {
  var authToken = this.<span class="apidocCodeKeywordSpan">calculateNativePasswordAuthToken</span>(authSwitchHandlerParams.pluginData
);
  connection.writePacket(new Packets.AuthSwitchResponse(authToken).toPacket());
} else if (connection.config.authSwitchHandler) {
  connection.config.authSwitchHandler(authSwitchHandlerParams, function (err, data) {
    if (err) {
      connection.emit('error', err);
      return;
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.change_user.prototype.handshakeResult" id="apidoc.element.mysql2.change_user.prototype.handshakeResult">
        function <span class="apidocSignatureSpan">mysql2.change_user.prototype.</span>handshakeResult
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handshakeResult = function (packet, connection) {
  var marker = packet.peekByte();
  if (marker === 0xfe || marker === 1) {
    var asr, asrmd;
    var authSwitchHandlerParams = {};
    if (marker === 1) {
      asrmd = Packets.AuthSwitchRequestMoreData.fromPacket(packet);
      authSwitchHandlerParams.pluginData = asrmd.data;
    } else {
      asr = Packets.AuthSwitchRequest.fromPacket(packet);
      authSwitchHandlerParams.pluginName = asr.pluginName;
      authSwitchHandlerParams.pluginData = asr.pluginData;
    }
    if (authSwitchHandlerParams.pluginName == 'mysql_native_password') {
      var authToken = this.calculateNativePasswordAuthToken(authSwitchHandlerParams.pluginData);
      connection.writePacket(new Packets.AuthSwitchResponse(authToken).toPacket());
    } else if (connection.config.authSwitchHandler) {
      connection.config.authSwitchHandler(authSwitchHandlerParams, function (err, data) {
        if (err) {
          connection.emit('error', err);
          return;
        }
        connection.writePacket(new Packets.AuthSwitchResponse(data).toPacket());
      });
    } else {
      connection.emit('error', new Error('Server requires auth switch, but no auth switch handler provided'));
      return null;
    }
    return ClientHandshake.prototype.handshakeResult;
  }

  if (marker !== 0) {
    var err = new Error('Unexpected packet during handshake phase');
    if (this.onResult) {
      this.onResult(err);
    } else {
      connection.emit('error', err);
    }
    return null;
  }

  // this should be called from ClientHandshake command only
  // and skipped when called from ChangeUser command
  if (!connection.authorized) {
    connection.authorized = true;
    if (connection.config.compress) {
      var enableCompression = require('../compressed_protocol.js').enableCompression;
      enableCompression(connection);
    }
  }

  if (this.onResult) {
    this.onResult(null);
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.change_user.prototype.start" id="apidoc.element.mysql2.change_user.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.change_user.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  var packet = new Packets.ChangeUser({
    flags           : connection.config.clientFlags,
    user            : this.user,
    database        : this.database,
    charsetNumber   : this.charsetNumber,
    password        : this.password,
    passwordSha1    : this.passwordSha1,
    authPluginData1 : connection._handshakePacket.authPluginData1,
    authPluginData2 : connection._handshakePacket.authPluginData2
  });
  this.currentConfig.user = this.user;
  this.currentConfig.password = this.password;
  this.currentConfig.database = this.database;
  this.currentConfig.charsetNumber = this.charsetNumber;
  connection.clientEncoding = CharsetToEncoding[this.charsetNumber];
  // reset prepared statements cache as all statements become invalid after changeUser
  connection._statements.reset();
  connection.writePacket(packet.toPacket());
  return ChangeUser.prototype.handshakeResult;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.client_handshake" id="apidoc.module.mysql2.client_handshake">module mysql2.client_handshake</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.client_handshake" id="apidoc.element.mysql2.client_handshake.client_handshake">
        function <span class="apidocSignatureSpan">mysql2.</span>client_handshake
        <span class="apidocSignatureSpan">(clientFlags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ClientHandshake(clientFlags)
{
  this.handshake = null;
  this.clientFlags = clientFlags;
  Command.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.super_" id="apidoc.element.mysql2.client_handshake.super_">
        function <span class="apidocSignatureSpan">mysql2.client_handshake.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.client_handshake.prototype" id="apidoc.module.mysql2.client_handshake.prototype">module mysql2.client_handshake.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.prototype.calculateNativePasswordAuthToken" id="apidoc.element.mysql2.client_handshake.prototype.calculateNativePasswordAuthToken">
        function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>calculateNativePasswordAuthToken
        <span class="apidocSignatureSpan">(authPluginData)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">calculateNativePasswordAuthToken = function (authPluginData) {
  // TODO: dont split into authPluginData1 and authPluginData2, instead join when 1 &amp; 2 received
  var authPluginData1 = authPluginData.slice(0, 8);
  var authPluginData2 = authPluginData.slice(8, 20);
  var authToken;
  if (this.passwordSha1) {
    authToken = auth41.calculateTokenFromPasswordSha(this.passwordSha1, authPluginData1, authPluginData2);
  } else {
    authToken = auth41.calculateToken(this.password, authPluginData1, authPluginData2);
  }
  return authToken;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  authSwitchHandlerParams.pluginData = asrmd.data;
} else {
  asr = Packets.AuthSwitchRequest.fromPacket(packet);
  authSwitchHandlerParams.pluginName = asr.pluginName;
  authSwitchHandlerParams.pluginData = asr.pluginData;
}
if (authSwitchHandlerParams.pluginName == 'mysql_native_password') {
  var authToken = this.<span class="apidocCodeKeywordSpan">calculateNativePasswordAuthToken</span>(authSwitchHandlerParams.pluginData
);
  connection.writePacket(new Packets.AuthSwitchResponse(authToken).toPacket());
} else if (connection.config.authSwitchHandler) {
  connection.config.authSwitchHandler(authSwitchHandlerParams, function (err, data) {
    if (err) {
      connection.emit('error', err);
      return;
    }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.prototype.handshakeInit" id="apidoc.element.mysql2.client_handshake.prototype.handshakeInit">
        function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>handshakeInit
        <span class="apidocSignatureSpan">(helloPacket, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handshakeInit = function (helloPacket, connection) {
  var command = this;

  this.on('error', function (e) {
    connection._fatalError = e;
    connection._protocolError = e;
  });

  this.handshake = Packets.Handshake.fromPacket(helloPacket);
  if (connection.config.debug) {
    console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
      flagNames(this.handshake.capabilityFlags).join(', '));
  }
  connection.serverCapabilityFlags = this.handshake.capabilityFlags;
  connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
  connection.connectionId = this.handshake.connectionId;
  var serverSSLSupport = this.handshake.capabilityFlags &amp; ClientConstants.SSL;

  // use compression only if requested by client and supported by server
  connection.config.compress = connection.config.compress &amp;&amp; (this.handshake.capabilityFlags &amp; ClientConstants.COMPRESS);
  this.clientFlags = this.clientFlags | connection.config.compress;

  if (connection.config.ssl) {
    // client requires SSL but server does not support it
    if (!serverSSLSupport) {
      var err = new Error('Server does not support secure connnection');
      err.code = 'HANDSHAKE_NO_SSL_SUPPORT';
      err.fatal = true;
      command.emit('error', err);
      return false;
    }
    // send ssl upgrade request and immediately upgrade connection to secure
    this.clientFlags |= ClientConstants.SSL;
    this.sendSSLRequest(connection);
    connection.startTLS(function (err) {
      // after connection is secure
      if (err) {
        // SSL negotiation error are fatal
        err.code = 'HANDSHAKE_SSL_ERROR';
        err.fatal = true;
        command.emit('error', err);
        return;
      }
      // rest of communication is encrypted
      command.sendCredentials(connection);
    });
  } else {
    this.sendCredentials(connection);
  }
  return ClientHandshake.prototype.handshakeResult;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.prototype.handshakeResult" id="apidoc.element.mysql2.client_handshake.prototype.handshakeResult">
        function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>handshakeResult
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">handshakeResult = function (packet, connection) {
  var marker = packet.peekByte();
  if (marker === 0xfe || marker === 1) {
    var asr, asrmd;
    var authSwitchHandlerParams = {};
    if (marker === 1) {
      asrmd = Packets.AuthSwitchRequestMoreData.fromPacket(packet);
      authSwitchHandlerParams.pluginData = asrmd.data;
    } else {
      asr = Packets.AuthSwitchRequest.fromPacket(packet);
      authSwitchHandlerParams.pluginName = asr.pluginName;
      authSwitchHandlerParams.pluginData = asr.pluginData;
    }
    if (authSwitchHandlerParams.pluginName == 'mysql_native_password') {
      var authToken = this.calculateNativePasswordAuthToken(authSwitchHandlerParams.pluginData);
      connection.writePacket(new Packets.AuthSwitchResponse(authToken).toPacket());
    } else if (connection.config.authSwitchHandler) {
      connection.config.authSwitchHandler(authSwitchHandlerParams, function (err, data) {
        if (err) {
          connection.emit('error', err);
          return;
        }
        connection.writePacket(new Packets.AuthSwitchResponse(data).toPacket());
      });
    } else {
      connection.emit('error', new Error('Server requires auth switch, but no auth switch handler provided'));
      return null;
    }
    return ClientHandshake.prototype.handshakeResult;
  }

  if (marker !== 0) {
    var err = new Error('Unexpected packet during handshake phase');
    if (this.onResult) {
      this.onResult(err);
    } else {
      connection.emit('error', err);
    }
    return null;
  }

  // this should be called from ClientHandshake command only
  // and skipped when called from ChangeUser command
  if (!connection.authorized) {
    connection.authorized = true;
    if (connection.config.compress) {
      var enableCompression = require('../compressed_protocol.js').enableCompression;
      enableCompression(connection);
    }
  }

  if (this.onResult) {
    this.onResult(null);
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.prototype.sendCredentials" id="apidoc.element.mysql2.client_handshake.prototype.sendCredentials">
        function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>sendCredentials
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendCredentials = function (connection) {
  if (connection.config.debug) {
    console.log('Sending handshake packet: flags:%d=(%s)', this.clientFlags,
      flagNames(this.clientFlags).join(', '));
  }

  this.user = connection.config.user;
  this.password = connection.config.password;
  this.passwordSha1 = connection.config.passwordSha1;
  this.database = connection.config.database;

  var handshakeResponse = new Packets.HandshakeResponse({
    flags   : this.clientFlags,
    user    : this.user,
    database: this.database,
    password: this.password,
    passwordSha1   : this.passwordSha1,
    charsetNumber  : connection.config.charsetNumber,
    authPluginData1: this.handshake.authPluginData1,
    authPluginData2: this.handshake.authPluginData2,
    compress: connection.config.compress,
    connectAttributes: connection.config.connectAttributes
  });
  connection.writePacket(handshakeResponse.toPacket());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        // SSL negotiation error are fatal
        err.code = 'HANDSHAKE_SSL_ERROR';
        err.fatal = true;
        command.emit('error', err);
        return;
      }
      // rest of communication is encrypted
      command.<span class="apidocCodeKeywordSpan">sendCredentials</span>(connection);
    });
  } else {
    this.sendCredentials(connection);
  }
  return ClientHandshake.prototype.handshakeResult;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.prototype.sendSSLRequest" id="apidoc.element.mysql2.client_handshake.prototype.sendSSLRequest">
        function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>sendSSLRequest
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendSSLRequest = function (connection) {
  var sslRequest = new Packets.SSLRequest(this.clientFlags, connection.config.charsetNumber);
  connection.writePacket(sslRequest.toPacket());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  err.code = 'HANDSHAKE_NO_SSL_SUPPORT';
  err.fatal = true;
  command.emit('error', err);
  return false;
}
// send ssl upgrade request and immediately upgrade connection to secure
this.clientFlags |= ClientConstants.SSL;
this.<span class="apidocCodeKeywordSpan">sendSSLRequest</span>(connection);
connection.startTLS(function (err) {
  // after connection is secure
  if (err) {
    // SSL negotiation error are fatal
    err.code = 'HANDSHAKE_SSL_ERROR';
    err.fatal = true;
    command.emit('error', err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.client_handshake.prototype.start" id="apidoc.element.mysql2.client_handshake.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.client_handshake.prototype.</span>start
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function () {
  return ClientHandshake.prototype.handshakeInit;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.close_statement" id="apidoc.module.mysql2.close_statement">module mysql2.close_statement</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.close_statement.close_statement" id="apidoc.element.mysql2.close_statement.close_statement">
        function <span class="apidocSignatureSpan">mysql2.</span>close_statement
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function CloseStatement(id)
{
  Command.call(this);
  this.id = id;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.close_statement.super_" id="apidoc.element.mysql2.close_statement.super_">
        function <span class="apidocSignatureSpan">mysql2.close_statement.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.close_statement.prototype" id="apidoc.module.mysql2.close_statement.prototype">module mysql2.close_statement.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.close_statement.prototype.start" id="apidoc.element.mysql2.close_statement.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.close_statement.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  connection.writePacket(new Packets.CloseStatement(this.id).toPacket(1));
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.column_definition" id="apidoc.module.mysql2.column_definition">module mysql2.column_definition</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.column_definition.column_definition" id="apidoc.element.mysql2.column_definition.column_definition">
        function <span class="apidocSignatureSpan">mysql2.</span>column_definition
        <span class="apidocSignatureSpan">(packet, clientEncoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ColumnDefinition(packet, clientEncoding)
{
  this._buf = packet.buffer;
  this._clientEncoding = clientEncoding;

  this._catalogLength = packet.readLengthCodedNumber();
  this._catalogStart = packet.offset;
  packet.offset += this._catalogLength;

  this._schemaLength = packet.readLengthCodedNumber();
  this._schemaStart = packet.offset;
  packet.offset += this._schemaLength;

  this._tableLength = packet.readLengthCodedNumber();
  this._tableStart = packet.offset;
  packet.offset += this._tableLength;

  this._orgTableLength = packet.readLengthCodedNumber();
  this._orgTableStart = packet.offset;
  packet.offset += this._orgTableLength;

  // name is always used, don't make it lazy
  var _nameLength = packet.readLengthCodedNumber();
  var _nameStart = packet.offset;
  packet.offset += _nameLength;

  this._orgNameLength = packet.readLengthCodedNumber();
  this._orgNameStart = packet.offset;
  packet.offset += this._orgNameLength;

  packet.skip(1); //  length of the following fields (always 0x0c)
  this.characterSet = packet.readInt16();
  this.encoding = CharsetToEncoding[this.characterSet];

  this.name = StringParser.decode(this._buf.slice(_nameStart, _nameStart + _nameLength), this.encoding === 'binary' ? this._clientEncoding
 : this.encoding);

  this.columnLength = packet.readInt32();
  this.columnType = packet.readInt8();
  this.flags = packet.readInt16();
  this.decimals = packet.readInt8();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.column_definition.toPacket" id="apidoc.element.mysql2.column_definition.toPacket">
        function <span class="apidocSignatureSpan">mysql2.column_definition.</span>toPacket
        <span class="apidocSignatureSpan">(column, sequenceId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function (column, sequenceId)
{
  var length = 17; // = 4 padding + 1 + 12 for the rest
  fields.forEach(function (field) {
    length += Packet.lengthCodedStringLength(column[field], CharsetToEncoding[column.characterSet]);
  });

  var buffer = Buffer.allocUnsafe(length);

  function writeField (name) {
    packet.writeLengthCodedString(column[name], CharsetToEncoding[column.characterSet]);
  }
  var packet = new Packet(sequenceId, buffer, 0, length);
  packet.offset = 4;
  fields.forEach(writeField);
  packet.writeInt8(0x0c);
  packet.writeInt16(column.characterSet);
  packet.writeInt32(column.columnLength);
  packet.writeInt8(column.columnType);
  packet.writeInt16(column.flags);
  packet.writeInt8(column.decimals);
  packet.writeInt16(0); // filler
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.column_definition.prototype" id="apidoc.module.mysql2.column_definition.prototype">module mysql2.column_definition.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.column_definition.prototype.inspect" id="apidoc.element.mysql2.column_definition.prototype.inspect">
        function <span class="apidocSignatureSpan">mysql2.column_definition.prototype.</span>inspect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inspect = function () {
  return {
    catalog     : this.catalog,
    schema      : this.schema,
    name        : this.name,
    orgName     : this.orgName,
    table       : this.table,
    orgTable    : this.orgTable,
    characterSet: this.characterSet,
    columnLength: this.columnLength,
    columnType  : this.columnType,
    flags       : this.flags,
    decimals    : this.decimals
  };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.command" id="apidoc.module.mysql2.command">module mysql2.command</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.command.command" id="apidoc.element.mysql2.command.command">
        function <span class="apidocSignatureSpan">mysql2.</span>command
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.command.super_" id="apidoc.element.mysql2.command.super_">
        function <span class="apidocSignatureSpan">mysql2.command.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.command.prototype" id="apidoc.module.mysql2.command.prototype">module mysql2.command.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.command.prototype.execute" id="apidoc.element.mysql2.command.prototype.execute">
        function <span class="apidocSignatureSpan">mysql2.command.prototype.</span>execute
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execute = function (packet, connection) {

  if (!this.next) {
    this.next = this.start;
    connection._resetSequenceId();
  }

  if (packet &amp;&amp; packet.isError()) {
    var err = packet.asError(connection.clientEncoding);
    if (this.onResult) {
      this.onResult(err);
    } else {
      this.emit('error', err);
    }
    return true;
  }

  // TODO: don't return anything from execute, it's ugly and error-prone. Listen for 'end' event in connection
  this.next = this.next(packet, connection);
  if (this.next) {
    return false;
  } else {
    this.emit('end');
    return true;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PromiseConnection.prototype.execute = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">execute</span>(query, params, done);
    } else {
      c.execute(query, done);
    }
  });
};

PromiseConnection.prototype.end = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.command.prototype.stateName" id="apidoc.element.mysql2.command.prototype.stateName">
        function <span class="apidocSignatureSpan">mysql2.command.prototype.</span>stateName
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stateName = function () {
  var state = this.next;
  for (var i in this) {
    if (this[i] == state &amp;&amp; i != 'next') {
      return i;
    }
  }
  return 'unknown name';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var MAX_PACKET_LENGTH = 16777215;
var length = packet.length();
var chunk, offset, header;

if (length &lt; MAX_PACKET_LENGTH) {
  packet.writeHeader(this.sequenceId);
  if (this.config.debug) {
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + this._command._commandName + '
;#' + this._command.<span class="apidocCodeKeywordSpan">stateName</span>() + '(' + [this.sequenceId, packet._name
, packet.length()].join(',') + ')');
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + packet.buffer.toString('hex
'));
  }
  this._bumpSequenceId(1);
  this.write(packet.buffer);
} else {
  if (this.config.debug) {
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== Writing large packet, raw content not written
:');
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.compressed_protocol" id="apidoc.module.mysql2.compressed_protocol">module mysql2.compressed_protocol</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.compressed_protocol.enableCompression" id="apidoc.element.mysql2.compressed_protocol.enableCompression">
        function <span class="apidocSignatureSpan">mysql2.compressed_protocol.</span>enableCompression
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function enableCompression(connection) {
  connection._lastWrittenPacketId = 0;
  connection._lastReceivedPacketId = 0;

  connection._handleCompressedPacket = handleCompressedPacket;
  connection._inflatedPacketsParser = new PacketParser(function (p) {
    connection.handlePacket(p);
  }, 4);
  connection._inflatedPacketsParser._lastPacket = 0;
  connection.packetParser = new PacketParser(function (packet) {
    connection._handleCompressedPacket(packet);
  }, 7);

  connection.writeUncompressed = connection.write;
  connection.write = writeCompressed;

  var seqqueue = require('seq-queue');
  connection.inflateQueue = seqqueue.createQueue();
  connection.deflateQueue = seqqueue.createQueue();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.connection_config" id="apidoc.module.mysql2.connection_config">module mysql2.connection_config</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.connection_config.connection_config" id="apidoc.element.mysql2.connection_config.connection_config">
        function <span class="apidocSignatureSpan">mysql2.</span>connection_config
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ConnectionConfig(options) {
  if (typeof options === 'string') {
    options = ConnectionConfig.parseUrl(options);
  }

  this.isServer = options.isServer;
  this.stream = options.stream;

  this.host = options.host || 'localhost';
  this.port = options.port || 3306;
  this.localAddress = options.localAddress;
  this.socketPath = options.socketPath;
  this.user = options.user || undefined;
  this.password = options.password || undefined;
  this.passwordSha1 = options.passwordSha1 || undefined;
  this.database = options.database;
  this.connectTimeout = (options.connectTimeout === undefined)
    ? (10 * 1000)
    : options.connectTimeout;
  this.insecureAuth = options.insecureAuth || false;
  this.supportBigNumbers = options.supportBigNumbers || false;
  this.bigNumberStrings = options.bigNumberStrings || false;
  this.decimalNumbers = options.decimalNumbers || false;
  this.dateStrings = options.dateStrings || false;
  this.debug = options.debug;
  this.trace = options.trace !== false;
  this.stringifyObjects = options.stringifyObjects || false;
  this.timezone = options.timezone || 'local';
  this.queryFormat = options.queryFormat;
  this.pool = options.pool || undefined;
  this.ssl = (typeof options.ssl === 'string')
    ? ConnectionConfig.getSSLProfile(options.ssl)
    : (options.ssl || false);
  this.multipleStatements = options.multipleStatements || false;
  this.rowsAsArray = options.rowsAsArray || false;
  this.namedPlaceholders = options.namedPlaceholders || false;
  this.nestTables = (options.nestTables === undefined) ? undefined : options.nestTables;
  this.typeCast = (options.typeCast === undefined)
    ? true
    : options.typeCast;

  if (this.timezone[0] == ' ') {
    // "+" is a url encoded char for space so it
    // gets translated to space when giving a
    // connection string..
    this.timezone = '+' + this.timezone.substr(1);
  }

  if (this.ssl) {
    // Default rejectUnauthorized to true
    this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
  }

  this.maxPacketSize = 0;
  this.charsetNumber = (options.charset)
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8MB4_UNICODE_CI;

  this.compress = options.compress || false;

  this.authSwitchHandler = options.authSwitchHandler;

  this.clientFlags = ConnectionConfig.mergeFlags(ConnectionConfig.getDefaultFlags(options),
                                                 options.flags || '');

  this.connectAttributes = options.connectAttributes;
  this.maxPreparedStatements = options.maxPreparedStatements || 16000;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.connection_config.getCharsetNumber" id="apidoc.element.mysql2.connection_config.getCharsetNumber">
        function <span class="apidocSignatureSpan">mysql2.connection_config.</span>getCharsetNumber
        <span class="apidocSignatureSpan">(charset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getCharsetNumber(charset) {
  var num = Charsets[charset.toUpperCase()];

  if (num === undefined) {
    throw new TypeError('Unknown charset \'' + charset + '\'');
  }

  return num;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this.ssl) {
  // Default rejectUnauthorized to true
  this.ssl.rejectUnauthorized = this.ssl.rejectUnauthorized !== false;
}

this.maxPacketSize = 0;
this.charsetNumber = (options.charset)
  ? ConnectionConfig.<span class="apidocCodeKeywordSpan">getCharsetNumber</span>(options.charset)
  : options.charsetNumber || Charsets.UTF8MB4_UNICODE_CI;

this.compress = options.compress || false;

this.authSwitchHandler = options.authSwitchHandler;

this.clientFlags = ConnectionConfig.mergeFlags(ConnectionConfig.getDefaultFlags(options),
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.connection_config.getDefaultFlags" id="apidoc.element.mysql2.connection_config.getDefaultFlags">
        function <span class="apidocSignatureSpan">mysql2.connection_config.</span>getDefaultFlags
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDefaultFlags = function (options) {
  var defaultFlags = ['LONG_PASSWORD', 'FOUND_ROWS', 'LONG_FLAG',
    'CONNECT_WITH_DB', 'ODBC', 'LOCAL_FILES',
    'IGNORE_SPACE', 'PROTOCOL_41', 'IGNORE_SIGPIPE',
    'TRANSACTIONS', 'RESERVED', 'SECURE_CONNECTION',
    'MULTI_RESULTS', 'TRANSACTIONS', 'SESSION_TRACK'];

  if (options &amp;&amp; options.multipleStatements) {
    defaultFlags.push('MULTI_STATEMENTS');
  }

  if (options &amp;&amp; options.authSwitchHandler) {
    defaultFlags.push('PLUGIN_AUTH');
    defaultFlags.push('PLUGIN_AUTH_LENENC_CLIENT_DATA');
  }

  if (options &amp;&amp; options.connectAttributes) {
    defaultFlags.push('CONNECT_ATTRS');
  }

  return defaultFlags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8MB4_UNICODE_CI;

  this.compress = options.compress || false;

  this.authSwitchHandler = options.authSwitchHandler;

  this.clientFlags = ConnectionConfig.mergeFlags(ConnectionConfig.<span class="apidocCodeKeywordSpan">getDefaultFlags</span>(options
),
                                                 options.flags || '');

  this.connectAttributes = options.connectAttributes;
  this.maxPreparedStatements = options.maxPreparedStatements || 16000;
}

ConnectionConfig.mergeFlags = function (default_flags, user_flags) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.connection_config.getSSLProfile" id="apidoc.element.mysql2.connection_config.getSSLProfile">
        function <span class="apidocSignatureSpan">mysql2.connection_config.</span>getSSLProfile
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function getSSLProfile(name) {
  if (!SSLProfiles) {
    SSLProfiles = require('./constants/ssl_profiles.js');
  }

  var ssl = SSLProfiles[name];

  if (ssl === undefined) {
    throw new TypeError('Unknown SSL profile \'' + name + '\'');
  }

  return ssl;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.debug = options.debug;
this.trace = options.trace !== false;
this.stringifyObjects = options.stringifyObjects || false;
this.timezone = options.timezone || 'local';
this.queryFormat = options.queryFormat;
this.pool = options.pool || undefined;
this.ssl = (typeof options.ssl === 'string')
  ? ConnectionConfig.<span class="apidocCodeKeywordSpan">getSSLProfile</span>(options.ssl)
  : (options.ssl || false);
this.multipleStatements = options.multipleStatements || false;
this.rowsAsArray = options.rowsAsArray || false;
this.namedPlaceholders = options.namedPlaceholders || false;
this.nestTables = (options.nestTables === undefined) ? undefined : options.nestTables;
this.typeCast = (options.typeCast === undefined)
  ? true
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.connection_config.mergeFlags" id="apidoc.element.mysql2.connection_config.mergeFlags">
        function <span class="apidocSignatureSpan">mysql2.connection_config.</span>mergeFlags
        <span class="apidocSignatureSpan">(default_flags, user_flags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mergeFlags = function (default_flags, user_flags) {
  var flags = 0x0, i;

  user_flags = (user_flags || '').toUpperCase().split(/\s*,+\s*/);

  // add default flags unless "blacklisted"
  for (i in default_flags) {
    if (user_flags.indexOf('-' + default_flags[i]) &gt;= 0) {
      continue;
    }

    flags |= ClientConstants[default_flags[i]] || 0x0;
  }
  // add user flags unless already already added
  for (i in user_flags) {
    if (user_flags[i][0] == '-') {
      continue;
    }

    if (default_flags.indexOf(user_flags[i]) &gt;= 0) {
      continue;
    }

    flags |= ClientConstants[user_flags[i]] || 0x0;
  }

  return flags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    ? ConnectionConfig.getCharsetNumber(options.charset)
    : options.charsetNumber || Charsets.UTF8MB4_UNICODE_CI;

  this.compress = options.compress || false;

  this.authSwitchHandler = options.authSwitchHandler;

  this.clientFlags = ConnectionConfig.<span class="apidocCodeKeywordSpan">mergeFlags</span>(ConnectionConfig.getDefaultFlags(options
),
                                                 options.flags || '');

  this.connectAttributes = options.connectAttributes;
  this.maxPreparedStatements = options.maxPreparedStatements || 16000;
}

ConnectionConfig.mergeFlags = function (default_flags, user_flags) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.connection_config.parseUrl" id="apidoc.element.mysql2.connection_config.parseUrl">
        function <span class="apidocSignatureSpan">mysql2.connection_config.</span>parseUrl
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseUrl = function (url) {
  url = urlParse(url, true);

  var options = {
    host     : url.hostname,
    port     : url.port,
    database : url.pathname.substr(1)
  };

  if (url.auth) {
    var auth = url.auth.split(':');
    options.user = auth[0];
    options.password = auth[1];
  }

  if (url.query) {
    for (var key in url.query) {
      var value = url.query[key];

      try {
        // Try to parse this as a JSON expression first
        options[key] = JSON.parse(value);
      } catch (err) {
        // Otherwise assume it is a plain string
        options[key] = value;
      }
    }
  }

  return options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var ClientConstants = require('./constants/client');
var Charsets = require('./constants/charsets');
var SSLProfiles = null;

module.exports = ConnectionConfig;
function ConnectionConfig (options) {
if (typeof options === 'string') {
  options = ConnectionConfig.<span class="apidocCodeKeywordSpan">parseUrl</span>(options);
}

this.isServer = options.isServer;
this.stream = options.stream;

this.host = options.host || 'localhost';
this.port = options.port || 3306;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.execute" id="apidoc.module.mysql2.execute">module mysql2.execute</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.execute.execute" id="apidoc.element.mysql2.execute.execute">
        function <span class="apidocSignatureSpan">mysql2.</span>execute
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Execute(options, callback)
{
  Command.call(this);
  this.statement = options.statement;
  this.sql = options.sql;
  this.values = options.values;
  this.onResult = callback;
  this.parameters = options.values;

  this.insertId = 0;

  this._rows = [];
  this._fields = [];
  this._result = [];
  this._fieldCount = 0;
  this._rowParser = null;
  this._executeOptions = options;
  this._resultIndex = 0;
  this._localStream = null;
  this._unpipeStream = function () {};
  this._streamFactory = options.infileStreamFactory;
  this._connection = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PromiseConnection.prototype.execute = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">execute</span>(query, params, done);
    } else {
      c.execute(query, done);
    }
  });
};

PromiseConnection.prototype.end = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.super_" id="apidoc.element.mysql2.execute.super_">
        function <span class="apidocSignatureSpan">mysql2.execute.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.execute.prototype" id="apidoc.module.mysql2.execute.prototype">module mysql2.execute.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype._findOrCreateReadStream" id="apidoc.element.mysql2.execute.prototype._findOrCreateReadStream">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>_findOrCreateReadStream
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_findOrCreateReadStream = function (path) {
  if (this._streamFactory) {
    return this._streamFactory(path);
  }
  return fs.createReadStream(path, {
    'flag': 'r',
    'encoding': null,
    'autoClose': true
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (connection.config.debug) {
  console.log('        Resultset header received, expecting ' + rs.fieldCount + ' column definition packets');
}
if (this._fieldCount === 0) {
  return this.doneInsert(rs);
}
if (this._fieldCount === null) {
  this._localStream = this.<span class="apidocCodeKeywordSpan">_findOrCreateReadStream</span>(rs.infileName);
  // start streaming, after last packet expect OK
  // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
  this._streamLocalInfile(connection);
  return this.infileOk;
}

this._receivedFieldsCount = 0;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype._streamLocalInfile" id="apidoc.element.mysql2.execute.prototype._streamLocalInfile">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>_streamLocalInfile
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_streamLocalInfile = function (connection) {
  var command = this;

  var onDrain = function () {
    command._localStream.resume();
  };

  var onPause = function () {
    command._localStream.pause();
  };

  var onData = function (data) {
    var dataWithHeader = Buffer.allocUnsafe(data.length + 4);
    data.copy(dataWithHeader, 4);
    connection.writePacket(new Packets.Packet(0, dataWithHeader, 0, dataWithHeader.length));
  };

  var onEnd = function () {
    connection.writePacket(EmptyPacket);
  };

  var onError = function (err) {
    command._localStreamError = err;
    connection.writePacket(EmptyPacket);
  };

  command._unpipeStream = function () {
    connection.stream.removeListener('pause', onPause);
    connection.stream.removeListener('drain', onDrain);
    command._localStream.removeListener('data', onData);
    command._localStream.removeListener('end', onEnd);
    command._localStream.removeListener('error', onError);
  };

  connection.stream.on('pause', onPause);
  connection.stream.on('drain', onDrain);
  command._localStream.on('data', onData);
  command._localStream.on('end', onEnd);
  command._localStream.on('error', onError);

  connection.once('error', function (err) {
    command._unpipeStream();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this._fieldCount === 0) {
  return this.doneInsert(rs);
}
if (this._fieldCount === null) {
  this._localStream = this._findOrCreateReadStream(rs.infileName);
  // start streaming, after last packet expect OK
  // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
  this.<span class="apidocCodeKeywordSpan">_streamLocalInfile</span>(connection);
  return this.infileOk;
}

this._receivedFieldsCount = 0;
this._rows.push([]);
this._fields.push([]);
return this.readField;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.buildParserFromFields" id="apidoc.element.mysql2.execute.prototype.buildParserFromFields">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>buildParserFromFields
        <span class="apidocSignatureSpan">(fields, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildParserFromFields = function (fields, connection) {
  var parserKey = connection.keyFromFields(fields, this.options);
  var parser = connection.binaryProtocolParsers[parserKey];
  if (!parser) {
    parser = compileParser(fields, this.options, connection.config);
    connection.binaryProtocolParsers[parserKey] = parser;
  }
  return parser;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Execute.prototype.fieldsEOF = function (packet, connection) {
  // check EOF
  if (!packet.isEOF()) {
    return connection.protocolError('Expected EOF packet');
  }
  this._rowParser = this.<span class="apidocCodeKeywordSpan">buildParserFromFields</span>(this._fields[this._resultIndex], connection
);
  return Execute.prototype.row;
};

module.exports = Execute;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.done" id="apidoc.element.mysql2.execute.prototype.done">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>done
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">done = function () {
  var self = this;
  this._unpipeStream();
  if (this.onResult) {
    var rows, fields;
    if (this._resultIndex === 0) {
      rows = this._rows[0];
      fields = this._fields[0];
    } else {
      rows = this._rows;
      fields = this._fields;
    }
    if (fields) {
      process.nextTick(function () {
        self.onResult(null, rows, fields);
      });
    } else {
      process.nextTick(function () {
        self.onResult(null, rows);
      });
    }
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    zlib.inflate(body, function (err, data) {
      if (err) {
        connection._handleNetworkError(err);
        return;
      }
      connection._bumpCompressedSequenceId(packet.numPackets);
      connection._inflatedPacketsParser.execute(data);
      task.<span class="apidocCodeKeywordSpan">done</span>();
    });
  });
} else {
  connection.inflateQueue.push(function (task) {
    connection._bumpCompressedSequenceId(packet.numPackets);
    connection._inflatedPacketsParser.execute(body);
    task.done();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.doneInsert" id="apidoc.element.mysql2.execute.prototype.doneInsert">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>doneInsert
        <span class="apidocSignatureSpan">(rs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">doneInsert = function (rs) {
  if (this._localStreamError) {
    if (this.onResult) {
      this.onResult(this._localStreamError, rs);
    } else {
      this.emit('error', this._localStreamError);
    }
    return null;
  }
  this._rows.push(rs);
  this._fields.push(void (0));
  this.emit('fields', void (0));
  this.emit('result', rs);
  if (rs.serverStatus &amp; ServerStatus.SERVER_MORE_RESULTS_EXISTS) {
    this._resultIndex++;
    return this.resultsetHeader;
  }
  return this.done();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Query.prototype.resultsetHeader = function (packet, connection) {
var rs = new Packets.ResultSetHeader(packet, connection);
this._fieldCount = rs.fieldCount;
if (connection.config.debug) {
  console.log('        Resultset header received, expecting ' + rs.fieldCount + ' column definition packets');
}
if (this._fieldCount === 0) {
  return this.<span class="apidocCodeKeywordSpan">doneInsert</span>(rs);
}
if (this._fieldCount === null) {
  this._localStream = this._findOrCreateReadStream(rs.infileName);
  // start streaming, after last packet expect OK
  // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
  this._streamLocalInfile(connection);
  return this.infileOk;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.fieldsEOF" id="apidoc.element.mysql2.execute.prototype.fieldsEOF">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>fieldsEOF
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fieldsEOF = function (packet, connection) {
  // check EOF
  if (!packet.isEOF()) {
    return connection.protocolError('Expected EOF packet');
  }
  this._rowParser = this.buildParserFromFields(this._fields[this._resultIndex], connection);
  return Execute.prototype.row;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.readField" id="apidoc.element.mysql2.execute.prototype.readField">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>readField
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readField = function (packet, connection) {
  var def, fields;

  // disabling for now, but would be great to find reliable way to parse fields only once
  // fields reported by prepare can be empty at all or just incorrect - see #169
  //
  // perfomance optimisation: if we already have this field parsed in statement header, use one from header
  // var field = this.statement.columns.length == this._fieldCount ?
  //  this.statement.columns[this._receivedFieldsCount] : new Packets.ColumnDefinition(packet);

  var field = new Packets.ColumnDefinition(packet, connection.clientEncoding);

  this._receivedFieldsCount++;
  this._fields[this._resultIndex].push(field);
  if (this._receivedFieldsCount == this._fieldCount) {
    fields = this._fields[this._resultIndex];
    this.emit('fields', fields, this._resultIndex);
    return Execute.prototype.fieldsEOF;
  }
  return Execute.prototype.readField;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.resultsetHeader" id="apidoc.element.mysql2.execute.prototype.resultsetHeader">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>resultsetHeader
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resultsetHeader = function (packet, connection) {
  var rs = new Packets.ResultSetHeader(packet, connection);
  this._fieldCount = rs.fieldCount;
  if (connection.config.debug) {
    console.log('        Resultset header received, expecting ' + rs.fieldCount + ' column definition packets');
  }
  if (this._fieldCount === 0) {
    return this.doneInsert(rs);
  }
  if (this._fieldCount === null) {
    this._localStream = this._findOrCreateReadStream(rs.infileName);
    // start streaming, after last packet expect OK
    // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
    this._streamLocalInfile(connection);
    return this.infileOk;
  }

  this._receivedFieldsCount = 0;
  this._rows.push([]);
  this._fields.push([]);
  return this.readField;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.row" id="apidoc.element.mysql2.execute.prototype.row">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>row
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">row = function (packet)
{
  if (packet.isEOF()) {
    var status = packet.eofStatusFlags();
    var moreResults = status &amp; ServerStatus.SERVER_MORE_RESULTS_EXISTS;
    if (moreResults) {
      this._resultIndex++;
      return Query.prototype.resultsetHeader;
    }
    return this.done();
  }

  var row = new this._rowParser(packet, this._fields[this._resultIndex], this.options, CharsetToEncoding);
  if (this.onResult) {
    this._rows[this._resultIndex].push(row);
  } else {
    this.emit('result', row);
  }

  return Query.prototype.row;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.start" id="apidoc.element.mysql2.execute.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  this._connection = connection;
  this.options = objectAssign({}, connection.config, this._executeOptions);
  var executePacket = new Packets.Execute(this.statement.id, this.parameters, connection.config.charsetNumber);
  connection.writePacket(executePacket.toPacket(1));
  return Execute.prototype.resultsetHeader;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.execute.prototype.stream" id="apidoc.element.mysql2.execute.prototype.stream">
        function <span class="apidocSignatureSpan">mysql2.execute.prototype.</span>stream
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stream = function (options) {
  var self = this,
    stream;

  options = options || {};
  options.objectMode = true;
  stream = new Readable(options);

  stream._read = function () {
    self._connection &amp;&amp; self._connection.resume();
  };

  this.on('result', function (row) {
    if (!stream.push(row)) {
      self._connection.pause();
    }
    stream.emit('result', row);  // replicate old emitter
  });

  this.on('error', function (err) {
    stream.emit('error', err);  // Pass on any errors
  });

  this.on('end', function () {
    stream.emit('close');  // notify readers that query has completed
    stream.push(null);  // pushing null, indicating EOF
  });

  this.on('fields', function (fields) {
    stream.emit('fields', fields);  // replicate old emitter
  });

  return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- (fix) handle correctly packets over 0xffffff bytes
  long + compressed protocol rewrite                    #421, #248, #419, #426
- (perf) replace double-ended-queue with denqueue       #444
- (feat) automatically track client encoding change     #437, #389
- (feat) add support for CLIENT_SESSION_TRACK info      #388, #436

1.1.1 ( 06/10/2016 )
- (fix) do not crash when result of execute().<span class="apidocCodeKeywordSpan">stream</span>()
  is paused                                             #174, #424
- (fix) do not call .destroy() on stream when connect timeout
  is fired (destroy() method exist only on Net stream
  but not on custom streams)                             #417, #414
- (internal) parser generator now uses generate-function
  package to prepare dynamically generated parser func   #412, #167
- (docs) fix readme test/code errors                     #413
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.handshake" id="apidoc.module.mysql2.handshake">module mysql2.handshake</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.handshake.handshake" id="apidoc.element.mysql2.handshake.handshake">
        function <span class="apidocSignatureSpan">mysql2.</span>handshake
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Handshake(args) {
  this.protocolVersion = args.protocolVersion;
  this.serverVersion = args.serverVersion;
  this.capabilityFlags = args.capabilityFlags;
  this.connectionId = args.connectionId;
  this.authPluginData1 = args.authPluginData1;
  this.authPluginData2 = args.authPluginData2;
  this.characterSet = args.characterSet;
  this.statusFlags = args.statusFlags;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.handshake.fromPacket" id="apidoc.element.mysql2.handshake.fromPacket">
        function <span class="apidocSignatureSpan">mysql2.handshake.</span>fromPacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromPacket = function (packet)
{
  var args = {};
  args.protocolVersion = packet.readInt8();
  args.serverVersion = packet.readNullTerminatedString('cesu8');
  args.connectionId = packet.readInt32();
  args.authPluginData1 = packet.readBuffer(8);
  packet.skip(1);
  var capabilityFlagsBuffer = Buffer.allocUnsafe(4);
  capabilityFlagsBuffer[0] = packet.readInt8();
  capabilityFlagsBuffer[1] = packet.readInt8();
  if (packet.haveMoreData()) {
    args.characterSet = packet.readInt8();
    args.statusFlags = packet.readInt16();
    // upper 2 bytes
    capabilityFlagsBuffer[2] = packet.readInt8();
    capabilityFlagsBuffer[3] = packet.readInt8();
    args.capabilityFlags = capabilityFlagsBuffer.readUInt32LE(0);
    args.authPluginDataLength = packet.readInt8();
    packet.skip(10);
  } else {
    args.capabilityFlags = capabilityFlagsBuffer.readUInt16LE(0);
  }
  // var len = Math.max(12, args.authPluginDataLength - 8);
  args.authPluginData2 = packet.readBuffer(12);

  // TODO: expose combined authPluginData1 + authPluginData2 as authPluginData
  //
  // TODO
  // if capabilities &amp; CLIENT_PLUGIN_AUTH {
  //   string[NUL]    auth-plugin name
  //  }
  return new Handshake(args);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var command = this;

this.on('error', function (e) {
  connection._fatalError = e;
  connection._protocolError = e;
});

this.handshake = Packets.Handshake.<span class="apidocCodeKeywordSpan">fromPacket</span>(helloPacket);
if (connection.config.debug) {
  console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
    flagNames(this.handshake.capabilityFlags).join(', '));
}
connection.serverCapabilityFlags = this.handshake.capabilityFlags;
connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
connection.connectionId = this.handshake.connectionId;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.handshake.prototype" id="apidoc.module.mysql2.handshake.prototype">module mysql2.handshake.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.handshake.prototype.setScrambleData" id="apidoc.element.mysql2.handshake.prototype.setScrambleData">
        function <span class="apidocSignatureSpan">mysql2.handshake.prototype.</span>setScrambleData
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setScrambleData = function (cb) {
  var self = this;
  require('crypto').randomBytes(20, function (err, data) {
    if (err) {
      cb(err);
      return;
    }
    self.authPluginData1 = data.slice(0, 8);
    self.authPluginData2 = data.slice(8, 20);
    cb();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
}
util.inherits(ServerHandshake, Command);

ServerHandshake.prototype.start = function (packet, connection) {
var serverHelloPacket = new Packets.Handshake(this.args);
this.serverHello = serverHelloPacket;
serverHelloPacket.<span class="apidocCodeKeywordSpan">setScrambleData</span>(function (err) {
  if (err) {
    connection.emit('error', new Error('Error generating random bytes'));
    return;
  }
  connection.writePacket(serverHelloPacket.toPacket(0));
});
return ServerHandshake.prototype.readClientReply;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.handshake.prototype.toPacket" id="apidoc.element.mysql2.handshake.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.handshake.prototype.</span>toPacket
        <span class="apidocSignatureSpan">(sequenceId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function (sequenceId) {
  var buffer, packet;
  var length = 68 + Buffer.byteLength(this.serverVersion, 'utf8');
  buffer = Buffer.alloc(length + 4, 0); // zero fill, 10 bytes filler later needs to contain zeros
  packet = new Packet(sequenceId, buffer, 0, length + 4);
  packet.offset = 4;
  packet.writeInt8(this.protocolVersion);
  packet.writeString(this.serverVersion, 'cesu8');
  packet.writeInt8(0);
  packet.writeInt32(this.connectionId);
  packet.writeBuffer(this.authPluginData1);
  packet.writeInt8(0);
  var capabilityFlagsBuffer = Buffer.allocUnsafe(4);
  capabilityFlagsBuffer.writeUInt32LE(this.capabilityFlags, 0);
  packet.writeBuffer(capabilityFlagsBuffer.slice(0, 2));
  packet.writeInt8(this.characterSet);
  packet.writeInt16(this.statusFlags);
  packet.writeBuffer(capabilityFlagsBuffer.slice(2, 4));
  packet.writeInt8(21); // authPluginDataLength
  packet.skip(10);
  packet.writeBuffer(this.authPluginData2);
  packet.writeInt8(0);
  packet.writeString('mysql_native_password', 'latin1');
  packet.writeInt8(0);
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.handshake_response" id="apidoc.module.mysql2.handshake_response">module mysql2.handshake_response</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.handshake_response.handshake_response" id="apidoc.element.mysql2.handshake_response.handshake_response">
        function <span class="apidocSignatureSpan">mysql2.</span>handshake_response
        <span class="apidocSignatureSpan">(handshake)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function HandshakeResponse(handshake)
{
  this.user = handshake.user || '';
  this.database = handshake.database || '';
  this.password = handshake.password || '';
  this.passwordSha1 = handshake.passwordSha1;
  this.authPluginData1 = handshake.authPluginData1;
  this.authPluginData2 = handshake.authPluginData2;
  this.compress = handshake.compress;
  this.clientFlags = handshake.flags;
  // TODO: pre-4.1 auth support
  var authToken;
  if (this.passwordSha1) {
    authToken = auth41.calculateTokenFromPasswordSha(this.passwordSha1, this.authPluginData1, this.authPluginData2);
  } else {
    authToken = auth41.calculateToken(this.password, this.authPluginData1, this.authPluginData2);
  }
  this.authToken = authToken;
  this.charsetNumber = handshake.charsetNumber;
  this.encoding = CharsetToEncoding[handshake.charsetNumber];
  this.connectAttributes = handshake.connectAttributes;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.handshake_response.fromPacket" id="apidoc.element.mysql2.handshake_response.fromPacket">
        function <span class="apidocSignatureSpan">mysql2.handshake_response.</span>fromPacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromPacket = function (packet)
{
  var args = {};
  args.clientFlags = packet.readInt32();

  function isSet (flag) {
    return args.clientFlags &amp; ClientConstants[flag];
  }

  args.maxPacketSize = packet.readInt32();
  args.charsetNumber = packet.readInt8();
  var encoding = CharsetToEncoding[args.charsetNumber];
  args.encoding = encoding;
  packet.skip(23);
  args.user = packet.readNullTerminatedString(encoding);
  var authTokenLength;
  if (isSet('PLUGIN_AUTH_LENENC_CLIENT_DATA')) {
    authTokenLength = packet.readLengthCodedNumber(encoding);
    args.authToken = packet.readBuffer(authTokenLength);
  } else if (isSet('SECURE_CONNECTION')) {
    authTokenLength = packet.readInt8();
    args.authToken = packet.readBuffer(authTokenLength);
  } else {
    args.authToken = packet.readNullTerminatedString(encoding);
  } if (isSet('CONNECT_WITH_DB')) {
    args.database = packet.readNullTerminatedString(encoding);
  }
  if (isSet('PLUGIN_AUTH')) {
    args.authPluginName = packet.readNullTerminatedString(encoding);
  }
  if (isSet('CONNECT_ATTRS')) {
    var keysLength = packet.readLengthCodedNumber(encoding);
    var keysEnd = packet.offset + keysLength;
    var attrs = {};
    while (packet.offset &lt; keysEnd) {
      attrs[packet.readLengthCodedString(encoding)] = packet.readLengthCodedString(encoding);
    }
    args.connectAttributes = attrs;
  }
  return args;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var command = this;

this.on('error', function (e) {
  connection._fatalError = e;
  connection._protocolError = e;
});

this.handshake = Packets.Handshake.<span class="apidocCodeKeywordSpan">fromPacket</span>(helloPacket);
if (connection.config.debug) {
  console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
    flagNames(this.handshake.capabilityFlags).join(', '));
}
connection.serverCapabilityFlags = this.handshake.capabilityFlags;
connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
connection.connectionId = this.handshake.connectionId;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.handshake_response.prototype" id="apidoc.module.mysql2.handshake_response.prototype">module mysql2.handshake_response.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.handshake_response.prototype.serializeResponse" id="apidoc.element.mysql2.handshake_response.prototype.serializeResponse">
        function <span class="apidocSignatureSpan">mysql2.handshake_response.prototype.</span>serializeResponse
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">serializeResponse = function (buffer) {
  var self = this;
  function isSet (flag) {
    return self.clientFlags &amp; ClientConstants[flag];
  }

  var packet = new Packet(0, buffer, 0, buffer.length);
  packet.offset = 4;
  packet.writeInt32(this.clientFlags);
  packet.writeInt32(0); // max packet size. todo: move to config
  packet.writeInt8(this.charsetNumber);
  packet.skip(23);

  var encoding = this.encoding;
  packet.writeNullTerminatedString(this.user, encoding);

  var authTokenLength, k;
  if (isSet('PLUGIN_AUTH_LENENC_CLIENT_DATA')) {
    packet.writeLengthCodedNumber(this.authToken.length);
    packet.writeBuffer(this.authToken);
  } else if (isSet('SECURE_CONNECTION')) {
    packet.writeInt8(this.authToken.length);
    packet.writeBuffer(this.authToken);
  } else {
    packet.writeBuffer(this.authToken);
    packet.writeInt8(0);
  } if (isSet('CONNECT_WITH_DB')) {
    packet.writeNullTerminatedString(this.database, encoding);
  }
  if (isSet('PLUGIN_AUTH')) {
    // TODO: pass from config
    packet.writeNullTerminatedString('mysql_native_password', 'latin1');
  }
  if (isSet('CONNECT_ATTRS')) {
    var connectAttributes = this.connectAttributes || {};
    var attrNames = Object.keys(connectAttributes);
    var keysLength = 0;
    for (k = 0; k &lt; attrNames.length; ++k) {
      keysLength += Packet.lengthCodedStringLength(attrNames[k], encoding);
      keysLength += Packet.lengthCodedStringLength(connectAttributes[attrNames[k]], encoding);
    }
    packet.writeLengthCodedNumber(keysLength);
    for (k = 0; k &lt; attrNames.length; ++k) {
      packet.writeLengthCodedString(attrNames[k], encoding);
      packet.writeLengthCodedString(connectAttributes[attrNames[k]], encoding);
    }
  }
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (typeof this.user != 'string') {
    throw new Error('"user" connection config prperty must be a string');
  }
  if (typeof this.database != 'string') {
    throw new Error('"database" connection config prperty must be a string');
  }
  // dry run: calculate resulting packet length
  var p = this.<span class="apidocCodeKeywordSpan">serializeResponse</span>(Packet.MockBuffer());
  return this.serializeResponse(Buffer.allocUnsafe(p.offset));
};

module.exports = HandshakeResponse;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.handshake_response.prototype.toPacket" id="apidoc.element.mysql2.handshake_response.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.handshake_response.prototype.</span>toPacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function ()
{
  if (typeof this.user != 'string') {
    throw new Error('"user" connection config prperty must be a string');
  }
  if (typeof this.database != 'string') {
    throw new Error('"database" connection config prperty must be a string');
  }
  // dry run: calculate resulting packet length
  var p = this.serializeResponse(Packet.MockBuffer());
  return this.serializeResponse(Buffer.allocUnsafe(p.offset));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.helpers" id="apidoc.module.mysql2.helpers">module mysql2.helpers</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.helpers.srcEscape" id="apidoc.element.mysql2.helpers.srcEscape">
        function <span class="apidocSignatureSpan">mysql2.helpers.</span>srcEscape
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function srcEscape(str) {
  var a = {};
  a[str] = 1;
  return JSON.stringify(a).slice(1, -3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.packet" id="apidoc.module.mysql2.packet">module mysql2.packet</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.packet.packet" id="apidoc.element.mysql2.packet.packet">
        function <span class="apidocSignatureSpan">mysql2.</span>packet
        <span class="apidocSignatureSpan">(id, buffer, start, end)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Packet(id, buffer, start, end)
{
  // hot path, enable checks when testing only
  // if (!Buffer.isBuffer(buffer) || typeof start == 'undefined' || typeof end == 'undefined')
  //  throw new Error('invalid packet');
  this.sequenceId = id;
  this.numPackets = 1;
  this.buffer = buffer;
  this.start = start;
  this.offset = start + 4;
  this.end = end;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.MockBuffer" id="apidoc.element.mysql2.packet.MockBuffer">
        function <span class="apidocSignatureSpan">mysql2.packet.</span>MockBuffer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">MockBuffer = function () {
  var noop = function () {};
  var res = Buffer.alloc(0);
  for (var op in NativeBuffer.prototype) {
    if (typeof res[op] == 'function') {
      res[op] = noop;
    }
  }
  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }

  if (typeof this.database != 'string') {
    throw new Error('"database" connection config property must be a string');
  }

  // dry run: calculate resulting packet length
  var p = this.serializeToBuffer(Packet.<span class="apidocCodeKeywordSpan">MockBuffer</span>());
  return this.serializeToBuffer(Buffer.allocUnsafe(p.offset));
};

module.exports = ChangeUser;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.lengthCodedNumberLength" id="apidoc.element.mysql2.packet.lengthCodedNumberLength">
        function <span class="apidocSignatureSpan">mysql2.packet.</span>lengthCodedNumberLength
        <span class="apidocSignatureSpan">(n)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lengthCodedNumberLength = function (n) {
  if (n &lt; 0xfb) {
    return 1;
  }

  if (n &lt; 0xffff) {
    return 3;
  }

  if (n &lt; 0xffffff) {
    return 5;
  } else {
    return 9;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (Object.prototype.toString.call(this.parameters[i]) == '[object Date]') {
    var d = this.parameters[i];
    // TODO: move to asMysqlDateTime()
    this.parameters[i] = [d.getFullYear(), d.getMonth() + 1, d.getDate()].join('-') +
      ' ' + [d.getHours(), d.getMinutes(), d.getSeconds()].join(':');
  }
  if (Buffer.isBuffer(this.parameters[i])) {
    length += Packet.<span class="apidocCodeKeywordSpan">lengthCodedNumberLength</span>(this.parameters[i].length);
    length += this.parameters[i].length;
  }
  else {
    var str = this.parameters[i].toString();
    length += Packet.lengthCodedStringLength(str, this.encoding);
  }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.lengthCodedStringLength" id="apidoc.element.mysql2.packet.lengthCodedStringLength">
        function <span class="apidocSignatureSpan">mysql2.packet.</span>lengthCodedStringLength
        <span class="apidocSignatureSpan">(str, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lengthCodedStringLength = function (str, encoding) {
  var buf = StringParser.encode(str, encoding);
  var slen = buf.length;
  return Packet.lengthCodedNumberLength(slen) + slen;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

if (isSet('CONNECT_ATTRS')) {
  var connectAttributes = this.connectAttributes;
  var attrNames = Object.keys(connectAttributes);
  var keysLength = 0;
  for (k = 0; k &lt; attrNames.length; ++k) {
    keysLength += Packet.<span class="apidocCodeKeywordSpan">lengthCodedStringLength</span>(attrNames[k], encoding);
    keysLength += Packet.lengthCodedStringLength(connectAttributes[attrNames[k]], encoding);
  }
  packet.writeLengthCodedNumber(keysLength);
  for (k = 0; k &lt; attrNames.length; ++k) {
    packet.writeLengthCodedString(attrNames[k], encoding);
    packet.writeLengthCodedString(connectAttributes[attrNames[k]], encoding);
  }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.packet.prototype" id="apidoc.module.mysql2.packet.prototype">module mysql2.packet.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.asError" id="apidoc.element.mysql2.packet.prototype.asError">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>asError
        <span class="apidocSignatureSpan">(encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">asError = function (encoding) {
  this.reset();

  var fieldCount = this.readInt8();
  var errorCode = this.readInt16();
  var sqlState = '';
  if (this.buffer[this.offset] == 0x23) {
    sqlState = this.readBuffer(6).toString();
  }
  var message = this.readString(undefined, encoding);
  var err = new Error(message);
  err.code = ErrorCodeToName[errorCode];
  err.errno = errorCode;
  err.sqlState = sqlState;
  return err;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (!this.next) {
  this.next = this.start;
  connection._resetSequenceId();
}

if (packet &amp;&amp; packet.isError()) {
  var err = packet.<span class="apidocCodeKeywordSpan">asError</span>(connection.clientEncoding);
  if (this.onResult) {
    this.onResult(err);
  } else {
    this.emit('error', err);
  }
  return true;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.clone" id="apidoc.element.mysql2.packet.prototype.clone">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>clone
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function () {
  return new Packet(this.sequenceId, this.buffer, this.start, this.end);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  break;

default:
  knownCommand = false;
}

if (connection.listeners('packet').length) {
  connection.emit('packet', packet.<span class="apidocCodeKeywordSpan">clone</span>(), knownCommand, commandCode);
} else {
  if (!knownCommand) {
    console.log('Unknown command:', commandCode);
  }
}

return ServerHandshake.prototype.dispatchCommands;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.dump" id="apidoc.element.mysql2.packet.prototype.dump">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>dump
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dump = function () {
  console.log([this.buffer.asciiSlice(this.start, this.end)], this.buffer.slice(this.start, this.end), this.length(), this.sequenceId
);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.eofStatusFlags" id="apidoc.element.mysql2.packet.prototype.eofStatusFlags">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>eofStatusFlags
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eofStatusFlags = function () {
  return this.buffer.readInt16LE(this.offset + 3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}
return this.row;
};

Query.prototype.row = function (packet)
{
if (packet.isEOF()) {
  var status = packet.<span class="apidocCodeKeywordSpan">eofStatusFlags</span>();
  var moreResults = status &amp; ServerStatus.SERVER_MORE_RESULTS_EXISTS;
  if (moreResults) {
    this._resultIndex++;
    return Query.prototype.resultsetHeader;
  }
  return this.done();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.eofWarningCount" id="apidoc.element.mysql2.packet.prototype.eofWarningCount">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>eofWarningCount
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eofWarningCount = function () {
  return this.buffer.readInt16LE(this.offset + 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.haveMoreData" id="apidoc.element.mysql2.packet.prototype.haveMoreData">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>haveMoreData
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">haveMoreData = function () {
  return this.end &gt; this.offset;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
args.serverVersion = packet.readNullTerminatedString('cesu8');
args.connectionId = packet.readInt32();
args.authPluginData1 = packet.readBuffer(8);
packet.skip(1);
var capabilityFlagsBuffer = Buffer.allocUnsafe(4);
capabilityFlagsBuffer[0] = packet.readInt8();
capabilityFlagsBuffer[1] = packet.readInt8();
if (packet.<span class="apidocCodeKeywordSpan">haveMoreData</span>()) {
  args.characterSet = packet.readInt8();
  args.statusFlags = packet.readInt16();
  // upper 2 bytes
  capabilityFlagsBuffer[2] = packet.readInt8();
  capabilityFlagsBuffer[3] = packet.readInt8();
  args.capabilityFlags = capabilityFlagsBuffer.readUInt32LE(0);
  args.authPluginDataLength = packet.readInt8();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.isAlt" id="apidoc.element.mysql2.packet.prototype.isAlt">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>isAlt
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isAlt = function () {
  return this.peekByte() == 0xfe;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.isEOF" id="apidoc.element.mysql2.packet.prototype.isEOF">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>isEOF
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isEOF = function () {
  return this.buffer[this.offset] == 0xfe &amp;&amp; this.length() &lt; 13;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
eventParsers[15] = FormatDescriptionEvent;
eventParsers[16] = XidEvent;

BinlogDump.prototype.binlogData = function (packet) {
// ok - continue consuming events
// error - error
// eof - end of binlog
if (packet.<span class="apidocCodeKeywordSpan">isEOF</span>()) {
  this.emit('eof');
  return null;
}

// binlog event header
var ok = packet.readInt8();
var header = new BinlogEventHeader(packet);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.isError" id="apidoc.element.mysql2.packet.prototype.isError">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>isError
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isError = function () {
  return this.peekByte() == 0xff;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Command.prototype.execute = function (packet, connection) {

if (!this.next) {
  this.next = this.start;
  connection._resetSequenceId();
}

if (packet &amp;&amp; packet.<span class="apidocCodeKeywordSpan">isError</span>()) {
  var err = packet.asError(connection.clientEncoding);
  if (this.onResult) {
    this.onResult(err);
  } else {
    this.emit('error', err);
  }
  return true;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.length" id="apidoc.element.mysql2.packet.prototype.length">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>length
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">length = function () {
  return this.end - this.start;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Connection.prototype._bumpSequenceId = function (numPackets) {
this.sequenceId += numPackets;
this.sequenceId %= 256;
};

Connection.prototype.writePacket = function (packet) {
var MAX_PACKET_LENGTH = 16777215;
var length = packet.<span class="apidocCodeKeywordSpan">length</span>();
var chunk, offset, header;

if (length &lt; MAX_PACKET_LENGTH) {
  packet.writeHeader(this.sequenceId);
  if (this.config.debug) {
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + this._command._commandName + '
;#' + this._command.stateName() + '(' + [this.sequenceId, packet._name, packet.length()].join(',') + &amp;#
x27;)');
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + packet.buffer.toString('hex
'));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseDate" id="apidoc.element.mysql2.packet.prototype.parseDate">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseDate
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseDate = function () {
  var strLen = this.readLengthCodedNumber();
  if (strLen === null) {
    return null;
  }

  if (strLen != 10) {
    // we expect only YYYY-MM-DD here.
    // if for some reason it's not the case return invalid date
    return new Date(NaN);
  }
  var y = this.parseInt(4);
  this.offset++; // -
  var m = this.parseInt(2);
  this.offset++; // -
  var d = this.parseInt(2);
  return new Date(y, m - 1, d);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return 'packet.parseLengthCodedFloat()';
  }
  return 'packet.readLengthCodedString("ascii")';
case Types.DATE:
  if (config.dateStrings) {
    return 'packet.readLengthCodedString("ascii")';
  }
  return 'packet.<span class="apidocCodeKeywordSpan">parseDate</span>()';
case Types.DATETIME:
case Types.TIMESTAMP:
  if (config.dateStrings) {
    return 'packet.readLengthCodedString("ascii")';
  }
  return 'packet.parseDateTime()';
case Types.TIME:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseDateTime" id="apidoc.element.mysql2.packet.prototype.parseDateTime">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseDateTime
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseDateTime = function () {
  var str = this.readLengthCodedString('binary');
  if (str === null) {
    return null;
  }
  return new Date(str);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  return 'packet.parseDate()';
case Types.DATETIME:
case Types.TIMESTAMP:
  if (config.dateStrings) {
    return 'packet.readLengthCodedString("ascii")';
  }
  return 'packet.<span class="apidocCodeKeywordSpan">parseDateTime</span>()';
case Types.TIME:
  return 'packet.readLengthCodedString("ascii")';
case Types.GEOMETRY:
  return 'packet.parseGeometryValue()';
case Types.JSON:
  // Since for JSON columns mysql always returns charset 63 (BINARY),
  // we have to handle it according to JSON specs and use "utf8",
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseFloat" id="apidoc.element.mysql2.packet.prototype.parseFloat">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseFloat
        <span class="apidocSignatureSpan">(len)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseFloat = function (len) {

  if (len === null) {
    return null;
  }

  var result = 0;
  var end = this.offset + len;
  var factor = 1;
  var pastDot = false;
  var charCode = 0;
  if (len === 0) {
    return 0; // TODO: assert? exception?
  }

  if (this.buffer[this.offset] == minus) {
    this.offset++;
    factor = -1;
  }

  if (this.buffer[this.offset] == plus) {
    this.offset++; // just ignore
  }

  while (this.offset &lt; end) {
    charCode = this.buffer[this.offset];
    if (charCode == dot) {
      pastDot = true;
      this.offset++;
    } else if (charCode == exponent || charCode == exponentCapital) {
      this.offset++;
      var exponentValue = this.parseInt(end - this.offset);
      return (result / factor) * Math.pow(10, exponentValue);
    } else {
      result *= 10;
      result += this.buffer[this.offset] - 48;
      this.offset++;
      if (pastDot) {
        factor = factor * 10;
      }
    }
  }
  return result / factor;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Packet.prototype.parseLengthCodedIntString = function () {
  return this.readString(this.readLengthCodedNumber(), 'binary');
};

Packet.prototype.parseLengthCodedFloat = function () {
  return this.<span class="apidocCodeKeywordSpan">parseFloat</span>(this.readLengthCodedNumber());
};

Packet.prototype.peekByte = function () {
  return this.buffer[this.offset];
};

// OxFE is often used as "Alt" flag - not ok, not error.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseGeometryValue" id="apidoc.element.mysql2.packet.prototype.parseGeometryValue">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseGeometryValue
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseGeometryValue = function () {
  var buffer = this.readLengthCodedBuffer();
  var offset = 4;

  if (buffer === null || !buffer.length) {
    return null;
  }

  function parseGeometry () {
    var x, y, i, j, numPoints, line;
    var result = null;
    var byteOrder = buffer.readUInt8(offset); offset += 1;
    var wkbType = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
    switch (wkbType) {
    case 1: // WKBPoint
      x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
      y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
      result = {x: x, y: y};
      break;
    case 2: // WKBLineString
      numPoints = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
      result = [];
      for (i = numPoints;i &gt; 0;i--) {
        x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
        y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
        result.push({x: x, y: y});
      }
      break;
    case 3: // WKBPolygon
      var numRings = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
      result = [];
      for (i = numRings;i &gt; 0;i--) {
        numPoints = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
        line = [];
        for (j = numPoints;j &gt; 0;j--) {
          x = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
          y = byteOrder ? buffer.readDoubleLE(offset) : buffer.readDoubleBE(offset); offset += 8;
          line.push({x: x, y: y});
        }
        result.push(line);
      }
      break;
    case 4: // WKBMultiPoint
    case 5: // WKBMultiLineString
    case 6: // WKBMultiPolygon
    case 7: // WKBGeometryCollection
      var num = byteOrder ? buffer.readUInt32LE(offset) : buffer.readUInt32BE(offset); offset += 4;
      result = [];
      for (i = num;i &gt; 0;i--) {
        result.push(parseGeometry());
      }
      break;
    }
    return result;
  }
  return parseGeometry();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.DECIMAL:
case Types.NEWDECIMAL:
  if (config.decimalNumbers) {
    return 'packet.parseLengthCodedFloat();';
  }
  return 'packet.readLengthCodedString("ascii");';
case Types.GEOMETRY:
  return 'packet.<span class="apidocCodeKeywordSpan">parseGeometryValue</span>();';
case Types.JSON:
  // Since for JSON columns mysql always returns charset 63 (BINARY),
  // we have to handle it according to JSON specs and use "utf8",
  // see https://github.com/sidorares/node-mysql2/issues/409
  return 'JSON.parse(packet.readLengthCodedString("utf8"));';
case Types.LONGLONG:
  if (!supportBigNumbers) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseInt" id="apidoc.element.mysql2.packet.prototype.parseInt">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseInt
        <span class="apidocSignatureSpan">(len, supportBigNumbers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseInt = function (len, supportBigNumbers) {

  if (len === null) {
    return null;
  }

  if (len &gt;= 14 &amp;&amp; !supportBigNumbers) {
    var s = this.buffer.toString('ascii', this.offset, this.offset + len);
    this.offset += len;
    return Number(s);
  }

  var result = 0;
  var start = this.offset;
  var end = this.offset + len;
  var sign = 1;
  if (len === 0) {
    return 0; // TODO: assert? exception?
  }

  if (this.buffer[this.offset] == minus) {
    this.offset++;
    sign = -1;
  }

  // max precise int is 9007199254740992
  var str;
  var numDigits = end - this.offset;
  if (supportBigNumbers) {
    if (numDigits &gt;= 15) {
      str = this.readString(end - this.offset, 'binary');
      result = parseInt(str, 10);
      if (result.toString() == str) {
        return sign * result;
      } else {
        return sign == -1 ? '-' + str : str;
      }
    } else if (numDigits &gt; 16) {
      str = this.readString(end - this.offset);
      return sign == -1 ? '-' + str : str;
    }
  }

  if (this.buffer[this.offset] == plus) {
    this.offset++; // just ignore
  }
  while (this.offset &lt; end) {
    result *= 10;
    result += this.buffer[this.offset] - 48;
    this.offset++;
  }
  var num = result * sign;
  if (!supportBigNumbers) {
    return num;
  }
  str = this.buffer.toString('ascii', start, end);
  if (num.toString() == str) {
    return num;
  } else {
    return str;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }

  if (strLen != 10) {
    // we expect only YYYY-MM-DD here.
    // if for some reason it's not the case return invalid date
    return new Date(NaN);
  }
  var y = this.<span class="apidocCodeKeywordSpan">parseInt</span>(4);
  this.offset++; // -
  var m = this.parseInt(2);
  this.offset++; // -
  var d = this.parseInt(2);
  return new Date(y, m - 1, d);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseIntNoBigCheck" id="apidoc.element.mysql2.packet.prototype.parseIntNoBigCheck">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseIntNoBigCheck
        <span class="apidocSignatureSpan">(len)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseIntNoBigCheck = function (len) {
  if (len === null) {
    return null;
  }
  var result = 0;
  var end = this.offset + len;
  var sign = 1;
  if (len === 0) {
    return 0; // TODO: assert? exception?
  }

  if (this.buffer[this.offset] == minus) {
    this.offset++;
    sign = -1;
  }
  if (this.buffer[this.offset] == plus) {
    this.offset++; // just ignore
  }
  while (this.offset &lt; end) {
    result *= 10;
    result += this.buffer[this.offset] - 48;
    this.offset++;
  }
  return result * sign;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      }
    }
  }
  return result / factor;
};

Packet.prototype.parseLengthCodedIntNoBigCheck = function () {
  return this.<span class="apidocCodeKeywordSpan">parseIntNoBigCheck</span>(this.readLengthCodedNumber());
};

Packet.prototype.parseLengthCodedInt = function (supportBigNumbers) {
  return this.parseInt(this.readLengthCodedNumber(), supportBigNumbers);
};

Packet.prototype.parseLengthCodedIntString = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedFloat" id="apidoc.element.mysql2.packet.prototype.parseLengthCodedFloat">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedFloat
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseLengthCodedFloat = function () {
  return this.parseFloat(this.readLengthCodedNumber());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  return 'packet.readDateTime();';
case Types.TIME:
  return 'packet.readTimeString()';
case Types.DECIMAL:
case Types.NEWDECIMAL:
  if (config.decimalNumbers) {
    return 'packet.<span class="apidocCodeKeywordSpan">parseLengthCodedFloat</span>();';
  }
  return 'packet.readLengthCodedString("ascii");';
case Types.GEOMETRY:
  return 'packet.parseGeometryValue();';
case Types.JSON:
  // Since for JSON columns mysql always returns charset 63 (BINARY),
  // we have to handle it according to JSON specs and use "utf8",
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedInt" id="apidoc.element.mysql2.packet.prototype.parseLengthCodedInt">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedInt
        <span class="apidocSignatureSpan">(supportBigNumbers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseLengthCodedInt = function (supportBigNumbers) {
  return this.parseInt(this.readLengthCodedNumber(), supportBigNumbers);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.INT24:
case Types.YEAR:
  return 'packet.parseLengthCodedIntNoBigCheck()';
case Types.LONGLONG:
  if (supportBigNumbers &amp;&amp; bigNumberStrings) {
    return 'packet.parseLengthCodedIntString()';
  }
  return 'packet.<span class="apidocCodeKeywordSpan">parseLengthCodedInt</span>(' + supportBigNumbers + ')';
case Types.FLOAT:
case Types.DOUBLE:
  return 'packet.parseLengthCodedFloat()';
case Types.NULL:
  return 'null; packet.skip(1)';
case Types.DECIMAL:
case Types.NEWDECIMAL:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedIntNoBigCheck" id="apidoc.element.mysql2.packet.prototype.parseLengthCodedIntNoBigCheck">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedIntNoBigCheck
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseLengthCodedIntNoBigCheck = function () {
  return this.parseIntNoBigCheck(this.readLengthCodedNumber());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

switch (type) {
case Types.TINY:
case Types.SHORT:
case Types.LONG:
case Types.INT24:
case Types.YEAR:
  return 'packet.<span class="apidocCodeKeywordSpan">parseLengthCodedIntNoBigCheck</span>()';
case Types.LONGLONG:
  if (supportBigNumbers &amp;&amp; bigNumberStrings) {
    return 'packet.parseLengthCodedIntString()';
  }
  return 'packet.parseLengthCodedInt(' + supportBigNumbers + ')';
case Types.FLOAT:
case Types.DOUBLE:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.parseLengthCodedIntString" id="apidoc.element.mysql2.packet.prototype.parseLengthCodedIntString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>parseLengthCodedIntString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseLengthCodedIntString = function () {
  return this.readString(this.readLengthCodedNumber(), 'binary');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.SHORT:
case Types.LONG:
case Types.INT24:
case Types.YEAR:
  return 'packet.parseLengthCodedIntNoBigCheck()';
case Types.LONGLONG:
  if (supportBigNumbers &amp;&amp; bigNumberStrings) {
    return 'packet.<span class="apidocCodeKeywordSpan">parseLengthCodedIntString</span>()';
  }
  return 'packet.parseLengthCodedInt(' + supportBigNumbers + ')';
case Types.FLOAT:
case Types.DOUBLE:
  return 'packet.parseLengthCodedFloat()';
case Types.NULL:
  return 'null; packet.skip(1)';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.peekByte" id="apidoc.element.mysql2.packet.prototype.peekByte">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>peekByte
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">peekByte = function () {
  return this.buffer[this.offset];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
} else {
  this.sendCredentials(connection);
}
return ClientHandshake.prototype.handshakeResult;
};

ClientHandshake.prototype.handshakeResult = function (packet, connection) {
var marker = packet.<span class="apidocCodeKeywordSpan">peekByte</span>();
if (marker === 0xfe || marker === 1) {
  var asr, asrmd;
  var authSwitchHandlerParams = {};
  if (marker === 1) {
    asrmd = Packets.AuthSwitchRequestMoreData.fromPacket(packet);
    authSwitchHandlerParams.pluginData = asrmd.data;
  } else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readBuffer" id="apidoc.element.mysql2.packet.prototype.readBuffer">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readBuffer
        <span class="apidocSignatureSpan">(len)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readBuffer = function (len) {
  if (typeof len == 'undefined') {
    len = this.end - this.offset;
  }
  this.offset += len;
  return this.buffer.slice(this.offset - len, this.offset);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
connection.inflateQueue = seqqueue.createQueue();
connection.deflateQueue = seqqueue.createQueue();
}

function handleCompressedPacket (packet) {
var connection = this;
var deflatedLength = packet.readInt24();
var body = packet.<span class="apidocCodeKeywordSpan">readBuffer</span>();


if (deflatedLength !== 0) {
  connection.inflateQueue.push(function (task) {
    zlib.inflate(body, function (err, data) {
      if (err) {
        connection._handleNetworkError(err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readDateTime" id="apidoc.element.mysql2.packet.prototype.readDateTime">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readDateTime
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readDateTime = function () {
  var length = this.readInt8();
  if (length == 0xfb) {
    return null;
  }
  var y = 0;
  var m = 0;
  var d = 0;
  var H = 0;
  var M = 0;
  var S = 0;
  var ms = 0;
  if (length &gt; 3) {
    y = this.readInt16();
    m = this.readInt8();
    d = this.readInt8();

  }
  if (length &gt; 6) {
    H = this.readInt8();
    M = this.readInt8();
    S = this.readInt8();
  }
  if (length &gt; 10) {
    ms = this.readInt32();
  }
  if ((y + m + d + H + M + S + ms) === 0) {
    return INVALID_DATE;
  }
  return new Date(y, m - 1, d, H, M, S, ms);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.DATE:
case Types.DATETIME:
case Types.TIMESTAMP:
case Types.NEWDATE:
  if (config.dateStrings) {
    return 'packet.readDateTimeString();';
  }
  return 'packet.<span class="apidocCodeKeywordSpan">readDateTime</span>();';
case Types.TIME:
  return 'packet.readTimeString()';
case Types.DECIMAL:
case Types.NEWDECIMAL:
  if (config.decimalNumbers) {
    return 'packet.parseLengthCodedFloat();';
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readDateTimeString" id="apidoc.element.mysql2.packet.prototype.readDateTimeString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readDateTimeString
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readDateTimeString = function () {
  var length = this.readInt8();
  var y = 0;
  var m = 0;
  var d = 0;
  var H = 0;
  var M = 0;
  var S = 0;
  var ms = 0;
  var str;
  if (length &gt; 3) {
    y = this.readInt16();
    m = this.readInt8();
    d = this.readInt8();
    str = [leftPad(4, y), leftPad(2, m), leftPad(2, d)].join('-');
  }
  if (length &gt; 6) {
    H = this.readInt8();
    M = this.readInt8();
    S = this.readInt8();
    str += ' ' + [leftPad(2, H), leftPad(2, M), leftPad(2, S)].join(':');
  }
<span class="apidocCodeCommentSpan">  /* in text protocol you don't see microseconds as DATETIME/TIMESTAMP result.
     instead you need to use MICROSECOND() function
  if (length &gt; 10) {
    ms = this.readInt32();
  }
  */
</span>  return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.NULL:
  return 'null;';
case Types.DATE:
case Types.DATETIME:
case Types.TIMESTAMP:
case Types.NEWDATE:
  if (config.dateStrings) {
    return 'packet.<span class="apidocCodeKeywordSpan">readDateTimeString</span>();';
  }
  return 'packet.readDateTime();';
case Types.TIME:
  return 'packet.readTimeString()';
case Types.DECIMAL:
case Types.NEWDECIMAL:
  if (config.decimalNumbers) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readDouble" id="apidoc.element.mysql2.packet.prototype.readDouble">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readDouble
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readDouble = function () {
  var res = this.buffer.readDoubleLE(this.offset);
  this.offset += 8;
  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.INT24: // in binary protocol int24 is encoded in 4 bytes int32
  return unsigned ? 'packet.readInt32();' : 'packet.readSInt32();';
case Types.YEAR:
  return 'packet.readInt16()';
case Types.FLOAT:
  return 'packet.readFloat();';
case Types.DOUBLE:
  return 'packet.<span class="apidocCodeKeywordSpan">readDouble</span>();';
case Types.NULL:
  return 'null;';
case Types.DATE:
case Types.DATETIME:
case Types.TIMESTAMP:
case Types.NEWDATE:
  if (config.dateStrings) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readFloat" id="apidoc.element.mysql2.packet.prototype.readFloat">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readFloat
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readFloat = function () {
  var res = this.buffer.readFloatLE(this.offset);
  this.offset += 4;
  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return unsigned ? 'packet.readInt16();' : 'packet.readSInt16();';
case Types.LONG:
case Types.INT24: // in binary protocol int24 is encoded in 4 bytes int32
  return unsigned ? 'packet.readInt32();' : 'packet.readSInt32();';
case Types.YEAR:
  return 'packet.readInt16()';
case Types.FLOAT:
  return 'packet.<span class="apidocCodeKeywordSpan">readFloat</span>();';
case Types.DOUBLE:
  return 'packet.readDouble();';
case Types.NULL:
  return 'null;';
case Types.DATE:
case Types.DATETIME:
case Types.TIMESTAMP:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readInt16" id="apidoc.element.mysql2.packet.prototype.readInt16">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt16
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readInt16 = function ()
{
  this.offset += 2;
  return this.buffer.readUInt16LE(this.offset - 2, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var supportBigNumbers = options.supportBigNumbers || config.supportBigNumbers;
var bigNumberStrings = options.bigNumberStrings || config.bigNumberStrings;
var unsigned = field.flags &amp; FieldFlags.UNSIGNED;
switch (field.columnType) {
case Types.TINY:
  return unsigned ? 'packet.readInt8();' : 'packet.readSInt8();';
case Types.SHORT:
  return unsigned ? 'packet.<span class="apidocCodeKeywordSpan">readInt16</span>();' : 'packet.readSInt16();'
;;
case Types.LONG:
case Types.INT24: // in binary protocol int24 is encoded in 4 bytes int32
  return unsigned ? 'packet.readInt32();' : 'packet.readSInt32();';
case Types.YEAR:
  return 'packet.readInt16()';
case Types.FLOAT:
  return 'packet.readFloat();';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readInt24" id="apidoc.element.mysql2.packet.prototype.readInt24">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt24
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readInt24 = function () {
  return this.readInt16() + (this.readInt8() &lt;&lt; 16);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var seqqueue = require('seq-queue');
connection.inflateQueue = seqqueue.createQueue();
connection.deflateQueue = seqqueue.createQueue();
}

function handleCompressedPacket (packet) {
var connection = this;
var deflatedLength = packet.<span class="apidocCodeKeywordSpan">readInt24</span>();
var body = packet.readBuffer();


if (deflatedLength !== 0) {
  connection.inflateQueue.push(function (task) {
    zlib.inflate(body, function (err, data) {
      if (err) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readInt32" id="apidoc.element.mysql2.packet.prototype.readInt32">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt32
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readInt32 = function ()
{
  this.offset += 4;
  return this.buffer.readUInt32LE(this.offset - 4, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
switch (field.columnType) {
case Types.TINY:
  return unsigned ? 'packet.readInt8();' : 'packet.readSInt8();';
case Types.SHORT:
  return unsigned ? 'packet.readInt16();' : 'packet.readSInt16();';
case Types.LONG:
case Types.INT24: // in binary protocol int24 is encoded in 4 bytes int32
  return unsigned ? 'packet.<span class="apidocCodeKeywordSpan">readInt32</span>();' : 'packet.readSInt32();'
;;
case Types.YEAR:
  return 'packet.readInt16()';
case Types.FLOAT:
  return 'packet.readFloat();';
case Types.DOUBLE:
  return 'packet.readDouble();';
case Types.NULL:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readInt64" id="apidoc.element.mysql2.packet.prototype.readInt64">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt64
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readInt64 = function () {
  var word0 = this.readInt32();
  var word1 = this.readInt32();
  var res = new Long(word0, word1, true);
  var resNumber = res.toNumber()
    , resString = res.toString();

  res = resNumber.toString() === resString
          ? resNumber
          : resString;

  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.LONGLONG:
  if (!supportBigNumbers) {
    return unsigned ? 'packet.readInt64JSNumber();' : 'packet.readSInt64JSNumber();';
  } else {
    if (bigNumberStrings) {
      return unsigned ? 'packet.readInt64String();' : 'packet.readSInt64String();';
    } else {
      return unsigned ? 'packet.<span class="apidocCodeKeywordSpan">readInt64</span>();' : 'packet.readSInt64();&amp;#
x27;;
    }
  }
default:
  if (field.characterSet == Charsets.BINARY) {
    return 'packet.readLengthCodedBuffer();';
  } else {
    return 'packet.readLengthCodedString(CharsetToEncoding[fields[' + fieldNum + '].characterSet])';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readInt64JSNumber" id="apidoc.element.mysql2.packet.prototype.readInt64JSNumber">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt64JSNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readInt64JSNumber = function () {
  var word0 = this.readInt32();
  var word1 = this.readInt32();
  var l = new Long(word0, word1, true);
  return l.toNumber();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.JSON:
  // Since for JSON columns mysql always returns charset 63 (BINARY),
  // we have to handle it according to JSON specs and use "utf8",
  // see https://github.com/sidorares/node-mysql2/issues/409
  return 'JSON.parse(packet.readLengthCodedString("utf8"));';
case Types.LONGLONG:
  if (!supportBigNumbers) {
    return unsigned ? 'packet.<span class="apidocCodeKeywordSpan">readInt64JSNumber</span>();' : 'packet.readSInt64JSNumber
();';
  } else {
    if (bigNumberStrings) {
      return unsigned ? 'packet.readInt64String();' : 'packet.readSInt64String();';
    } else {
      return unsigned ? 'packet.readInt64();' : 'packet.readSInt64();';
    }
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readInt64String" id="apidoc.element.mysql2.packet.prototype.readInt64String">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt64String
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readInt64String = function () {
  var word0 = this.readInt32();
  var word1 = this.readInt32();
  var res = new Long(word0, word1, true);
  return res.toString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // see https://github.com/sidorares/node-mysql2/issues/409
  return 'JSON.parse(packet.readLengthCodedString("utf8"));';
case Types.LONGLONG:
  if (!supportBigNumbers) {
    return unsigned ? 'packet.readInt64JSNumber();' : 'packet.readSInt64JSNumber();';
  } else {
    if (bigNumberStrings) {
      return unsigned ? 'packet.<span class="apidocCodeKeywordSpan">readInt64String</span>();' : 'packet.readSInt64String
();';
    } else {
      return unsigned ? 'packet.readInt64();' : 'packet.readSInt64();';
    }
  }
default:
  if (field.characterSet == Charsets.BINARY) {
    return 'packet.readLengthCodedBuffer();';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readInt8" id="apidoc.element.mysql2.packet.prototype.readInt8">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readInt8
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readInt8 = function ()
{
  return this.buffer[this.offset++];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
  resultTablesArray = Object.keys(resultTables);
  for (i = 0; i &lt; resultTablesArray.length; i++) {
    parserFn('this[' + srcEscape(resultTablesArray[i]) + '] = {};');
  }
}

parserFn('var statusByte = packet.<span class="apidocCodeKeywordSpan">readInt8</span>();');
for (i = 0; i &lt; nullBitmapLength; ++i) {
  parserFn('var nullBitmaskByte' + i + ' = packet.readInt8();');
}

var lvalue = '';
var currentFieldNullBit = 4;
var nullByteIndex = 0;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readLengthCodedBuffer" id="apidoc.element.mysql2.packet.prototype.readLengthCodedBuffer">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedBuffer
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readLengthCodedBuffer = function () {
  var len = this.readLengthCodedNumber();
  return this.readBuffer(len);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        return unsigned ? 'packet.readInt64String();' : 'packet.readSInt64String();';
      } else {
        return unsigned ? 'packet.readInt64();' : 'packet.readSInt64();';
      }
    }
  default:
    if (field.characterSet == Charsets.BINARY) {
      return 'packet.<span class="apidocCodeKeywordSpan">readLengthCodedBuffer</span>();';
    } else {
      return 'packet.readLengthCodedString(CharsetToEncoding[fields[' + fieldNum + '].characterSet])';
    }
  }
}

module.exports = compile;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readLengthCodedNumber" id="apidoc.element.mysql2.packet.prototype.readLengthCodedNumber">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedNumber
        <span class="apidocSignatureSpan">(bigNumberStrings, signed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readLengthCodedNumber = function (bigNumberStrings, signed) {
  var byte1 = this.buffer[this.offset++];
  if (byte1 &lt; 251) {
    return byte1;
  }
  return this.readLengthCodedNumberExt(byte1, bigNumberStrings, signed);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// see https://github.com/sidorares/node-mysql2/pull/137
//
function ColumnDefinition (packet, clientEncoding)
{
this._buf = packet.buffer;
this._clientEncoding = clientEncoding;

this._catalogLength = packet.<span class="apidocCodeKeywordSpan">readLengthCodedNumber</span>();
this._catalogStart = packet.offset;
packet.offset += this._catalogLength;

this._schemaLength = packet.readLengthCodedNumber();
this._schemaStart = packet.offset;
packet.offset += this._schemaLength;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readLengthCodedNumberExt" id="apidoc.element.mysql2.packet.prototype.readLengthCodedNumberExt">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedNumberExt
        <span class="apidocSignatureSpan">(tag, bigNumberStrings, signed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readLengthCodedNumberExt = function (tag, bigNumberStrings, signed) {
  var word0, word1;
  var res;
  if (tag == 0xfb) {
    return null;
  }

  if (tag == 0xfc) {
    return this.readInt8() + (this.readInt8() &lt;&lt; 8);
  }

  if (tag == 0xfd) {
    return this.readInt8() + (this.readInt8() &lt;&lt; 8) + (this.readInt8() &lt;&lt; 16);
  }

  if (tag == 0xfe) {
     // TODO: check version
     // Up to MySQL 3.22, 0xfe was followed by a 4-byte integer.
    word0 = this.readInt32();
    word1 = this.readInt32();
    if (word1 === 0) {
      return word0; // don't convert to float if possible
    }

    if (word1 &lt; 2097152) { // max exact float point int, 2^52 / 2^32
      return word1 * 0x100000000 + word0;
    }

    res = new Long(word0, word1, !signed); // Long need unsigned

    var resNumber = res.toNumber()
      , resString = res.toString();

    res = resNumber.toString() === resString
            ? resNumber
            : resString;

    return bigNumberStrings ? resString : res;
  }

  console.trace();
  throw new Error('Should not reach here: ' + tag);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Packet.prototype.readLengthCodedNumber = function (bigNumberStrings, signed) {
  var byte1 = this.buffer[this.offset++];
  if (byte1 &lt; 251) {
    return byte1;
  }
  return this.<span class="apidocCodeKeywordSpan">readLengthCodedNumberExt</span>(byte1, bigNumberStrings, signed);
};

Packet.prototype.readLengthCodedNumberSigned = function (bigNumberStrings) {
  return this.readLengthCodedNumber(bigNumberStrings, true);
};

Packet.prototype.readLengthCodedNumberExt = function (tag, bigNumberStrings, signed) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readLengthCodedNumberSigned" id="apidoc.element.mysql2.packet.prototype.readLengthCodedNumberSigned">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedNumberSigned
        <span class="apidocSignatureSpan">(bigNumberStrings)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readLengthCodedNumberSigned = function (bigNumberStrings) {
  return this.readLengthCodedNumber(bigNumberStrings, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    this.infileName = packet.readString(undefined, encoding);
  }
  return;
}

this.fieldCount = packet.readInt8(); // skip OK byte
this.affectedRows = packet.readLengthCodedNumber(bigNumberStrings);
this.insertId = packet.<span class="apidocCodeKeywordSpan">readLengthCodedNumberSigned</span>(bigNumberStrings);
this.info = '';


if (isSet('PROTOCOL_41')) {
  this.serverStatus = packet.readInt16();
  this.warningStatus = packet.readInt16();
} else if (isSet('TRANSACTIONS')) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readLengthCodedString" id="apidoc.element.mysql2.packet.prototype.readLengthCodedString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readLengthCodedString
        <span class="apidocSignatureSpan">(encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readLengthCodedString = function (encoding) {
  var len = this.readLengthCodedNumber();
  // TODO: check manually first byte here to avoid polymorphic return type?
  if (len === null) {
    return null;
  }
  this.offset += len;

  // TODO: Use characterSetCode to get proper encoding
  // https://github.com/sidorares/node-mysql2/pull/374
  return StringParser.decode(this.buffer.slice(this.offset - len, this.offset), encoding);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.TIME:
  return 'packet.readTimeString()';
case Types.DECIMAL:
case Types.NEWDECIMAL:
  if (config.decimalNumbers) {
    return 'packet.parseLengthCodedFloat();';
  }
  return 'packet.<span class="apidocCodeKeywordSpan">readLengthCodedString</span>("ascii");';
case Types.GEOMETRY:
  return 'packet.parseGeometryValue();';
case Types.JSON:
  // Since for JSON columns mysql always returns charset 63 (BINARY),
  // we have to handle it according to JSON specs and use "utf8",
  // see https://github.com/sidorares/node-mysql2/issues/409
  return 'JSON.parse(packet.readLengthCodedString("utf8"));';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readNullTerminatedString" id="apidoc.element.mysql2.packet.prototype.readNullTerminatedString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readNullTerminatedString
        <span class="apidocSignatureSpan">(encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readNullTerminatedString = function (encoding) {
  var start = this.offset;
  var end = this.offset;
  while (this.buffer[end]) {
    end = end + 1; // TODO: handle OOB check
  }
  this.offset = end + 1;
  return StringParser.decode(this.buffer.slice(start, end), encoding);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      message: 'No query handler'
    });
  }
  break;

case CommandCode.FIELD_LIST:
  if (connection.listeners('field_list').length) {
    var table = packet.<span class="apidocCodeKeywordSpan">readNullTerminatedString</span>();
    var fields = packet.readString(encoding);
    connection.emit('field_list', table, fields);
  } else {
    connection.writeError({
      code: Errors.ER_WARN_DEPRECATED_SYNTAX,
      message: 'As of MySQL 5.7.11, COM_FIELD_LIST is deprecated and will be removed in a future version of MySQL.'
    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readSInt16" id="apidoc.element.mysql2.packet.prototype.readSInt16">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt16
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readSInt16 = function ()
{
  this.offset += 2;
  return this.buffer.readInt16LE(this.offset - 2, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var supportBigNumbers = options.supportBigNumbers || config.supportBigNumbers;
var bigNumberStrings = options.bigNumberStrings || config.bigNumberStrings;
var unsigned = field.flags &amp; FieldFlags.UNSIGNED;
switch (field.columnType) {
case Types.TINY:
  return unsigned ? 'packet.readInt8();' : 'packet.readSInt8();';
case Types.SHORT:
  return unsigned ? 'packet.readInt16();' : 'packet.<span class="apidocCodeKeywordSpan">readSInt16</span>();'
;;
case Types.LONG:
case Types.INT24: // in binary protocol int24 is encoded in 4 bytes int32
  return unsigned ? 'packet.readInt32();' : 'packet.readSInt32();';
case Types.YEAR:
  return 'packet.readInt16()';
case Types.FLOAT:
  return 'packet.readFloat();';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readSInt32" id="apidoc.element.mysql2.packet.prototype.readSInt32">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt32
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readSInt32 = function ()
{
  this.offset += 4;
  return this.buffer.readInt32LE(this.offset - 4, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
switch (field.columnType) {
case Types.TINY:
  return unsigned ? 'packet.readInt8();' : 'packet.readSInt8();';
case Types.SHORT:
  return unsigned ? 'packet.readInt16();' : 'packet.readSInt16();';
case Types.LONG:
case Types.INT24: // in binary protocol int24 is encoded in 4 bytes int32
  return unsigned ? 'packet.readInt32();' : 'packet.<span class="apidocCodeKeywordSpan">readSInt32</span>();'
;;
case Types.YEAR:
  return 'packet.readInt16()';
case Types.FLOAT:
  return 'packet.readFloat();';
case Types.DOUBLE:
  return 'packet.readDouble();';
case Types.NULL:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readSInt64" id="apidoc.element.mysql2.packet.prototype.readSInt64">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt64
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readSInt64 = function () {
  var word0 = this.readInt32();
  var word1 = this.readInt32();
  var res = new Long(word0, word1, false);
  var resNumber = res.toNumber()
    , resString = res.toString();

  res = resNumber.toString() === resString
          ? resNumber
          : resString;

  return res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.LONGLONG:
  if (!supportBigNumbers) {
    return unsigned ? 'packet.readInt64JSNumber();' : 'packet.readSInt64JSNumber();';
  } else {
    if (bigNumberStrings) {
      return unsigned ? 'packet.readInt64String();' : 'packet.readSInt64String();';
    } else {
      return unsigned ? 'packet.readInt64();' : 'packet.<span class="apidocCodeKeywordSpan">readSInt64</span>();&amp;#
x27;;
    }
  }
default:
  if (field.characterSet == Charsets.BINARY) {
    return 'packet.readLengthCodedBuffer();';
  } else {
    return 'packet.readLengthCodedString(CharsetToEncoding[fields[' + fieldNum + '].characterSet])';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readSInt64JSNumber" id="apidoc.element.mysql2.packet.prototype.readSInt64JSNumber">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt64JSNumber
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readSInt64JSNumber = function () {
  var word0 = this.readInt32();
  var word1 = this.readInt32();
  if (!(word1 &amp; 0x80000000)) {
    return word0 + 0x100000000 * word1;
  }
  var l = new Long(word0, word1, false);
  return l.toNumber();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.JSON:
  // Since for JSON columns mysql always returns charset 63 (BINARY),
  // we have to handle it according to JSON specs and use "utf8",
  // see https://github.com/sidorares/node-mysql2/issues/409
  return 'JSON.parse(packet.readLengthCodedString("utf8"));';
case Types.LONGLONG:
  if (!supportBigNumbers) {
    return unsigned ? 'packet.readInt64JSNumber();' : 'packet.<span class="apidocCodeKeywordSpan">readSInt64JSNumber
</span>();';
  } else {
    if (bigNumberStrings) {
      return unsigned ? 'packet.readInt64String();' : 'packet.readSInt64String();';
    } else {
      return unsigned ? 'packet.readInt64();' : 'packet.readSInt64();';
    }
  }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readSInt64String" id="apidoc.element.mysql2.packet.prototype.readSInt64String">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt64String
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readSInt64String = function () {
  var word0 = this.readInt32();
  var word1 = this.readInt32();
  var res = new Long(word0, word1, false);
  return res.toString();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  // see https://github.com/sidorares/node-mysql2/issues/409
  return 'JSON.parse(packet.readLengthCodedString("utf8"));';
case Types.LONGLONG:
  if (!supportBigNumbers) {
    return unsigned ? 'packet.readInt64JSNumber();' : 'packet.readSInt64JSNumber();';
  } else {
    if (bigNumberStrings) {
      return unsigned ? 'packet.readInt64String();' : 'packet.<span class="apidocCodeKeywordSpan">readSInt64String
</span>();';
    } else {
      return unsigned ? 'packet.readInt64();' : 'packet.readSInt64();';
    }
  }
default:
  if (field.characterSet == Charsets.BINARY) {
    return 'packet.readLengthCodedBuffer();';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readSInt8" id="apidoc.element.mysql2.packet.prototype.readSInt8">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readSInt8
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readSInt8 = function ()
{
  return this.buffer.readInt8(this.offset++, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

function readCodeFor (field, config, options, fieldNum) {
var supportBigNumbers = options.supportBigNumbers || config.supportBigNumbers;
var bigNumberStrings = options.bigNumberStrings || config.bigNumberStrings;
var unsigned = field.flags &amp; FieldFlags.UNSIGNED;
switch (field.columnType) {
case Types.TINY:
  return unsigned ? 'packet.readInt8();' : 'packet.<span class="apidocCodeKeywordSpan">readSInt8</span>();';
case Types.SHORT:
  return unsigned ? 'packet.readInt16();' : 'packet.readSInt16();';
case Types.LONG:
case Types.INT24: // in binary protocol int24 is encoded in 4 bytes int32
  return unsigned ? 'packet.readInt32();' : 'packet.readSInt32();';
case Types.YEAR:
  return 'packet.readInt16()';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readString" id="apidoc.element.mysql2.packet.prototype.readString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readString
        <span class="apidocSignatureSpan">(len, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readString = function (len, encoding) {
  if (typeof len == 'undefined') {
    len = this.end - this.offset;
  }
  this.offset += len;
  return StringParser.decode(this.buffer.slice(this.offset - len, this.offset), encoding);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.flags = packet.readInt16();
}

function RotateEvent (packet) {
this.pposition = packet.readInt32();
// TODO: read uint64 here
var positionDword2 = packet.readInt32();
this.nextBinlog = packet.<span class="apidocCodeKeywordSpan">readString</span>();
this.name = 'RotateEvent';
}

function FormatDescriptionEvent (packet) {
this.binlogVersion = packet.readInt16();
this.serverVersion = packet.readString(50).replace(/\u0000.*/, '');
this.createTimestamp = packet.readInt32();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.readTimeString" id="apidoc.element.mysql2.packet.prototype.readTimeString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>readTimeString
        <span class="apidocSignatureSpan">(convertTtoMs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readTimeString = function (convertTtoMs) {
  var length = this.readInt8();
  if (length === 0) {
    return 0;
  }

  var result = 0;
  var sign = this.readInt8() ? -1 : 1; // 'isNegative' flag byte
  var d = 0;
  var H = 0;
  var M = 0;
  var S = 0;
  var ms = 0;
  if (length &gt; 6) {
    d = this.readInt32();
    H = this.readInt8();
    M = this.readInt8();
    S = this.readInt8();
  }
  if (length &gt; 10) {
    ms = this.readInt32();
  }

  if (convertTtoMs) {
    H += d * 24;
    M += H * 60;
    S += M * 60;
    ms += S * 1000;
    ms *= sign;
    return ms;
  }
  return (sign === -1 ? '-' : '') + [(d ? (d * 24) + H : H), leftPad(2, M), leftPad(2, S)].join(':') + (ms ? '.' + ms : '');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
case Types.TIMESTAMP:
case Types.NEWDATE:
  if (config.dateStrings) {
    return 'packet.readDateTimeString();';
  }
  return 'packet.readDateTime();';
case Types.TIME:
  return 'packet.<span class="apidocCodeKeywordSpan">readTimeString</span>()';
case Types.DECIMAL:
case Types.NEWDECIMAL:
  if (config.decimalNumbers) {
    return 'packet.parseLengthCodedFloat();';
  }
  return 'packet.readLengthCodedString("ascii");';
case Types.GEOMETRY:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.reset" id="apidoc.element.mysql2.packet.prototype.reset">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>reset
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reset = function () {
  this.offset = this.start + 4;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  });
  this.currentConfig.user = this.user;
  this.currentConfig.password = this.password;
  this.currentConfig.database = this.database;
  this.currentConfig.charsetNumber = this.charsetNumber;
  connection.clientEncoding = CharsetToEncoding[this.charsetNumber];
  // reset prepared statements cache as all statements become invalid after changeUser
  connection._statements.<span class="apidocCodeKeywordSpan">reset</span>();
  connection.writePacket(packet.toPacket());
  return ChangeUser.prototype.handshakeResult;
};

module.exports = ChangeUser;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.skip" id="apidoc.element.mysql2.packet.prototype.skip">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>skip
        <span class="apidocSignatureSpan">(num)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">skip = function (num) {
  this.offset += num;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    return 'packet.parseLengthCodedIntString()';
  }
  return 'packet.parseLengthCodedInt(' + supportBigNumbers + ')';
case Types.FLOAT:
case Types.DOUBLE:
  return 'packet.parseLengthCodedFloat()';
case Types.NULL:
  return 'null; packet.<span class="apidocCodeKeywordSpan">skip</span>(1)';
case Types.DECIMAL:
case Types.NEWDECIMAL:
  if (config.decimalNumbers) {
    return 'packet.parseLengthCodedFloat()';
  }
  return 'packet.readLengthCodedString("ascii")';
case Types.DATE:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.slice" id="apidoc.element.mysql2.packet.prototype.slice">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>slice
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">slice = function () {
  return this.buffer.slice(this.start, this.end);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// (this is because "length of the packet before compression" need to fit
// into 3 byte unsigned int. "length of the packet before compression" includes
// 4 byte packet header, hence 2^245)
var MAX_COMPRESSED_LENGTH = 16777210;
var start;
if (buffer.length &gt; MAX_COMPRESSED_LENGTH) {
  for (start = 0; start &lt; buffer.length; start += MAX_COMPRESSED_LENGTH) {
    writeCompressed.call(this, buffer.<span class="apidocCodeKeywordSpan">slice</span>(start, start + MAX_COMPRESSED_LENGTH));
  }
  return;
}

var connection = this;

var packetLen = buffer.length;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.type" id="apidoc.element.mysql2.packet.prototype.type">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>type
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">type = function () {
  if (this.isEOF()) {
    return 'EOF';
  }

  if (this.isError()) {
    return 'Error';
  }

  if (this.buffer[this.offset] == 0) {
    return 'maybeOK'; // could be other packet types as well
  }

  return '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (this.config.debug) {
  if (packet) {
    console.log(' raw: ' + packet.buffer.slice(packet.offset, packet.offset + packet.length()).toString('hex'
;));
    console.trace();
    var commandName = this._command ? this._command._commandName : '(no command)';
    var stateName = this._command ? this._command.stateName() : '(no command)';
    console.log(this._internalId + ' ' + this.connectionId + ' ==&gt; ' + commandName + '#' + stateName
 + '(' + [packet.sequenceId, packet.<span class="apidocCodeKeywordSpan">type</span>(), packet.length()].join(',&amp;#
x27;) + ')');
  }
}
if (!this._command) {
  this.protocolError('Unexpected packet while no commands in the queue', 'PROTOCOL_UNEXPECTED_PACKET');
  this.close();
  return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeBuffer" id="apidoc.element.mysql2.packet.prototype.writeBuffer">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeBuffer
        <span class="apidocSignatureSpan">(b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeBuffer = function (b) {
  b.copy(this.buffer, this.offset);
  this.offset += b.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var buffer = Buffer.allocUnsafe(length);
var packet = new Packet(0, buffer, 0, length);
packet.offset = 4;
packet.writeInt8(0xfe);

// TODO: use server encoding
packet.writeNullTerminatedString(this.pluginName, 'cesu8');
packet.<span class="apidocCodeKeywordSpan">writeBuffer</span>(this.pluginData);
return packet;
};

AuthSwitchRequest.fromPacket = function (packet)
{
var marker = packet.readInt8();
// assert marker == 0xfe?
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeHeader" id="apidoc.element.mysql2.packet.prototype.writeHeader">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeHeader
        <span class="apidocSignatureSpan">(sequenceId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeHeader = function (sequenceId) {
  var offset = this.offset;
  this.offset = 0;
  this.writeInt24(this.buffer.length - 4);
  this.writeInt8(sequenceId);
  this.offset = offset;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Connection.prototype.writePacket = function (packet) {
var MAX_PACKET_LENGTH = 16777215;
var length = packet.length();
var chunk, offset, header;

if (length &lt; MAX_PACKET_LENGTH) {
  packet.<span class="apidocCodeKeywordSpan">writeHeader</span>(this.sequenceId);
  if (this.config.debug) {
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + this._command._commandName + '
;#' + this._command.stateName() + '(' + [this.sequenceId, packet._name, packet.length()].join(',') + &amp;#
x27;)');
    console.log(this._internalId + ' ' + this.connectionId + ' &lt;== ' + packet.buffer.toString('hex
'));
  }
  this._bumpSequenceId(1);
  this.write(packet.buffer);
} else {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeInt16" id="apidoc.element.mysql2.packet.prototype.writeInt16">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt16
        <span class="apidocSignatureSpan">(n)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeInt16 = function (n) {
  this.buffer.writeUInt16LE(n, this.offset);
  this.offset += 2;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var length = 15 + // TODO: should be ascii?
    Buffer.byteLength(this.filename, 'utf8');
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeInt8(CommandCodes.BINLOG_DUMP);
  packet.writeInt32(this.binlogPos);
  packet.<span class="apidocCodeKeywordSpan">writeInt16</span>(this.flags);
  packet.writeInt32(this.serverId);
  packet.writeString(this.filename);
  return packet;
};

module.exports = BinlogDump;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeInt24" id="apidoc.element.mysql2.packet.prototype.writeInt24">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt24
        <span class="apidocSignatureSpan">(n)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeInt24 = function (n) {
  this.writeInt8(n &amp; 0xff);
  this.writeInt16(n &gt;&gt; 8);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (n &lt; 0xffff) {
  this.writeInt8(0xfc);
  return this.writeInt16(n);
}

if (n &lt; 0xffffff) {
  this.writeInt8(0xfd);
  return this.<span class="apidocCodeKeywordSpan">writeInt24</span>(n);
}

if (n === null) {
  return this.writeInt8(0xfb);
}

// TODO: check that n is out of int precision
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeInt32" id="apidoc.element.mysql2.packet.prototype.writeInt32">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt32
        <span class="apidocSignatureSpan">(n)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeInt32 = function (n) {
  this.buffer.writeUInt32LE(n, this.offset);
  this.offset += 4;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
{
  var length = 15 + // TODO: should be ascii?
    Buffer.byteLength(this.filename, 'utf8');
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeInt8(CommandCodes.BINLOG_DUMP);
  packet.<span class="apidocCodeKeywordSpan">writeInt32</span>(this.binlogPos);
  packet.writeInt16(this.flags);
  packet.writeInt32(this.serverId);
  packet.writeString(this.filename);
  return packet;
};

module.exports = BinlogDump;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeInt8" id="apidoc.element.mysql2.packet.prototype.writeInt8">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeInt8
        <span class="apidocSignatureSpan">(n)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeInt8 = function (n) {
  this.buffer.writeUInt8(n, this.offset);
  this.offset++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

AuthSwitchRequest.prototype.toPacket = function ()
{
  var length = 6 + this.pluginName.length + this.pluginData.length;
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.<span class="apidocCodeKeywordSpan">writeInt8</span>(0xfe);

  // TODO: use server encoding
  packet.writeNullTerminatedString(this.pluginName, 'cesu8');
  packet.writeBuffer(this.pluginData);
  return packet;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeLengthCodedBuffer" id="apidoc.element.mysql2.packet.prototype.writeLengthCodedBuffer">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeLengthCodedBuffer
        <span class="apidocSignatureSpan">(b)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeLengthCodedBuffer = function (b) {
  this.writeLengthCodedNumber(b.length);
  b.copy(this.buffer, this.offset);
  this.offset += b.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
  }

  for (i = 0; i &lt; this.parameters.length; i++)
  {
    if (this.parameters[i] !== null) {
      if (Buffer.isBuffer(this.parameters[i])) {
        packet.<span class="apidocCodeKeywordSpan">writeLengthCodedBuffer</span>(this.parameters[i]);
      } else {
        packet.writeLengthCodedString(this.parameters[i].toString(), this.encoding);
      }
    }
  }
}
return packet;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeLengthCodedNumber" id="apidoc.element.mysql2.packet.prototype.writeLengthCodedNumber">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeLengthCodedNumber
        <span class="apidocSignatureSpan">(n)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeLengthCodedNumber = function (n) {
  if (n &lt; 0xfb) {
    return this.writeInt8(n);
  }

  if (n &lt; 0xffff) {
    this.writeInt8(0xfc);
    return this.writeInt16(n);
  }

  if (n &lt; 0xffffff) {
    this.writeInt8(0xfd);
    return this.writeInt24(n);
  }

  if (n === null) {
    return this.writeInt8(0xfb);
  }

  // TODO: check that n is out of int precision
  this.writeInt8(0xfe);
  this.buffer.writeUInt32LE(n, this.offset);
  this.offset += 4;
  this.buffer.writeUInt32LE(n &gt;&gt; 32, this.offset);
  this.offset += 4;
  return this.offset;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var connectAttributes = this.connectAttributes;
    var attrNames = Object.keys(connectAttributes);
    var keysLength = 0;
    for (k = 0; k &lt; attrNames.length; ++k) {
      keysLength += Packet.lengthCodedStringLength(attrNames[k], encoding);
      keysLength += Packet.lengthCodedStringLength(connectAttributes[attrNames[k]], encoding);
    }
    packet.<span class="apidocCodeKeywordSpan">writeLengthCodedNumber</span>(keysLength);
    for (k = 0; k &lt; attrNames.length; ++k) {
      packet.writeLengthCodedString(attrNames[k], encoding);
      packet.writeLengthCodedString(connectAttributes[attrNames[k]], encoding);
    }
  }
  return packet;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeLengthCodedString" id="apidoc.element.mysql2.packet.prototype.writeLengthCodedString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeLengthCodedString
        <span class="apidocSignatureSpan">(s, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeLengthCodedString = function (s, encoding) {
  var buf = StringParser.encode(s, encoding);
  this.writeLengthCodedNumber(buf.length);
  this.buffer.length &amp;&amp; buf.copy(this.buffer, this.offset);
  this.offset += buf.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var keysLength = 0;
    for (k = 0; k &lt; attrNames.length; ++k) {
      keysLength += Packet.lengthCodedStringLength(attrNames[k], encoding);
      keysLength += Packet.lengthCodedStringLength(connectAttributes[attrNames[k]], encoding);
    }
    packet.writeLengthCodedNumber(keysLength);
    for (k = 0; k &lt; attrNames.length; ++k) {
      packet.<span class="apidocCodeKeywordSpan">writeLengthCodedString</span>(attrNames[k], encoding);
      packet.writeLengthCodedString(connectAttributes[attrNames[k]], encoding);
    }
  }
  return packet;
};

ChangeUser.prototype.toPacket = function ()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeNull" id="apidoc.element.mysql2.packet.prototype.writeNull">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeNull
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeNull = function () {
  this.buffer[this.offset] = 0xfb;
  this.offset++;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
});

buffer = Buffer.allocUnsafe(length + 4);
packet = new Packet(sequenceId, buffer, 0, length + 4);
packet.offset = 4;
columns.forEach(function (val) {
  if (val === null) {
    packet.<span class="apidocCodeKeywordSpan">writeNull</span>();
    return;
  }
  if (typeof val == 'undefined') {
    packet.writeInt8(0);
    return;
  }
  packet.writeLengthCodedString(val.toString(10), encoding);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeNullTerminatedString" id="apidoc.element.mysql2.packet.prototype.writeNullTerminatedString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeNullTerminatedString
        <span class="apidocSignatureSpan">(s, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeNullTerminatedString = function (s, encoding) {
  var buf = StringParser.encode(s, encoding);
  this.buffer.length &amp;&amp; buf.copy(this.buffer, this.offset);
  this.offset += buf.length;
  this.writeInt8(0);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var length = 6 + this.pluginName.length + this.pluginData.length;
var buffer = Buffer.allocUnsafe(length);
var packet = new Packet(0, buffer, 0, length);
packet.offset = 4;
packet.writeInt8(0xfe);

// TODO: use server encoding
packet.<span class="apidocCodeKeywordSpan">writeNullTerminatedString</span>(this.pluginName, 'cesu8');
packet.writeBuffer(this.pluginData);
return packet;
};

AuthSwitchRequest.fromPacket = function (packet)
{
var marker = packet.readInt8();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet.prototype.writeString" id="apidoc.element.mysql2.packet.prototype.writeString">
        function <span class="apidocSignatureSpan">mysql2.packet.prototype.</span>writeString
        <span class="apidocSignatureSpan">(s, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">writeString = function (s, encoding) {
  if (s === null) {
    this.writeInt8(0xfb);

    return;
  }

  if (s.length === 0) {
    return;
  }

  // var bytes = Buffer.byteLength(s, 'utf8');
  // this.buffer.write(s, this.offset, bytes, 'utf8');
  // this.offset += bytes;

  var buf = StringParser.encode(s, encoding);
  this.buffer.length &amp;&amp; buf.copy(this.buffer, this.offset);
  this.offset += buf.length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeInt8(CommandCodes.BINLOG_DUMP);
  packet.writeInt32(this.binlogPos);
  packet.writeInt16(this.flags);
  packet.writeInt32(this.serverId);
  packet.<span class="apidocCodeKeywordSpan">writeString</span>(this.filename);
  return packet;
};

module.exports = BinlogDump;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.packet_parser" id="apidoc.module.mysql2.packet_parser">module mysql2.packet_parser</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.packet_parser.packet_parser" id="apidoc.element.mysql2.packet_parser.packet_parser">
        function <span class="apidocSignatureSpan">mysql2.</span>packet_parser
        <span class="apidocSignatureSpan">(onPacket, packetHeaderLength)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PacketParser(onPacket, packetHeaderLength)
{
  // 4 for normal packets, 7 for comprssed protocol packets
  if (typeof packetHeaderLength == 'undefined') {
    packetHeaderLength = 4;
  }
  // array of last payload chunks
  // only used when current payload is not complete
  this.buffer = [];
  // total length of chunks on buffer
  this.bufferLength = 0;
  this.packetHeaderLength = packetHeaderLength;

  // incomplete header state: number of header bytes received
  this.headerLen = 0;

  // expected payload length
  this.length = 0;

  this.largePacketParts = [];
  this.firstPacketSequenceId = 0;

  this.onPacket = onPacket;
  this.execute = PacketParser.prototype.executeStart;
  this._flushLargePacket = packetHeaderLength == 7 ?
    this._flushLargePacket7 : this._flushLargePacket4;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.packet_parser.prototype" id="apidoc.module.mysql2.packet_parser.prototype">module mysql2.packet_parser.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.packet_parser.prototype._flushLargePacket4" id="apidoc.element.mysql2.packet_parser.prototype._flushLargePacket4">
        function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>_flushLargePacket4
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _flushLargePacket() {
  var numPackets = this.largePacketParts.length;
  this.largePacketParts.unshift(Buffer.from([0, 0, 0, 0])); // insert header
  var body = Buffer.concat(this.largePacketParts);
  var packet = new Packet(this.firstPacketSequenceId, body, 0, body.length);
  this.largePacketParts.length = 0;
  packet.numPackets = numPackets;
  this.onPacket(packet);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet_parser.prototype._flushLargePacket7" id="apidoc.element.mysql2.packet_parser.prototype._flushLargePacket7">
        function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>_flushLargePacket7
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function _flushLargePacket() {
  var numPackets = this.largePacketParts.length;
  this.largePacketParts.unshift(Buffer.from([0, 0, 0, 0, 0, 0, 0])); // insert header
  var body = Buffer.concat(this.largePacketParts);
  this.largePacketParts.length = 0;
  var packet = new Packet(this.firstPacketSequenceId, body, 0, body.length);
  packet.numPackets = numPackets;
  this.onPacket(packet);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet_parser.prototype.executeHeader2" id="apidoc.element.mysql2.packet_parser.prototype.executeHeader2">
        function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executeHeader2
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function executeHeader2(chunk) {
  this.length += chunk[0] &lt;&lt; 8;
  if (chunk.length &gt; 1) {
    this.length += chunk[1] &lt;&lt; 16;
    this.execute = PacketParser.prototype.executePayload;
    return this.executePayload(chunk.slice(2));
  } else {
    this.execute = PacketParser.prototype.executeHeader3;
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet_parser.prototype.executeHeader3" id="apidoc.element.mysql2.packet_parser.prototype.executeHeader3">
        function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executeHeader3
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function executeHeader3(chunk) {
  this.length += chunk[0] &lt;&lt; 16;
  this.execute = PacketParser.prototype.executePayload;
  return this.executePayload(chunk.slice(1));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet_parser.prototype.executePayload" id="apidoc.element.mysql2.packet_parser.prototype.executePayload">
        function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executePayload
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function executePayload(chunk) {

  var start = 0;
  var end = chunk.length;
  var remainingPayload = this.length - this.bufferLength + this.packetHeaderLength - 3;

  if (end - start &gt;= remainingPayload) { // last chunk for payload
    var payload = Buffer.allocUnsafe(this.length + this.packetHeaderLength);
    var offset = 3;
    for (var i = 0; i &lt; this.buffer.length; ++i) {
      this.buffer[i].copy(payload, offset);
      offset += this.buffer[i].length;
    }
    chunk.copy(payload, offset, start, start + remainingPayload);
    var sequenceId = payload[3];
    if (this.length &lt; MAX_PACKET_LENGTH &amp;&amp; this.largePacketParts.length === 0) {
      this.onPacket(new Packet(sequenceId, payload, 0, this.length + this.packetHeaderLength));
    } else {
      // first large packet - remember it's id
      if (this.largePacketParts.length === 0) {
        this.firstPacketSequenceId = sequenceId;
      }
      this.largePacketParts.push(payload.slice(this.packetHeaderLength, this.packetHeaderLength + this.length));
      if (this.length &lt; MAX_PACKET_LENGTH) {
        this._flushLargePacket();
      }
    }
    this.buffer = [];
    this.bufferLength = 0;
    this.execute = PacketParser.prototype.executeStart;
    start += remainingPayload;
    if (end - start &gt; 0) {
      return this.execute(chunk.slice(start, end));
    }
  } else {
    this.buffer.push(chunk);
    this.bufferLength += chunk.length;
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PacketParser.prototype.executeHeader2 = function executeHeader2 (chunk) {
  this.length += chunk[0] &lt;&lt; 8;
  if (chunk.length &gt; 1) {
    this.length += chunk[1] &lt;&lt; 16;
    this.execute = PacketParser.prototype.executePayload;
    return this.<span class="apidocCodeKeywordSpan">executePayload</span>(chunk.slice(2));
  } else {
    this.execute = PacketParser.prototype.executeHeader3;
  }
  return null;
};

PacketParser.prototype.executeHeader3 = function executeHeader3 (chunk) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.packet_parser.prototype.executeStart" id="apidoc.element.mysql2.packet_parser.prototype.executeStart">
        function <span class="apidocSignatureSpan">mysql2.packet_parser.prototype.</span>executeStart
        <span class="apidocSignatureSpan">(chunk)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function executeStart(chunk) {
  var start = 0;
  var end = chunk.length;

  while (end - start &gt;= 3) {
    this.length = readPacketLength(chunk, start);
    if (end - start &gt;= this.length + this.packetHeaderLength) { // at least one full packet
      var sequenceId = chunk[start + 3];
      if (this.length &lt; MAX_PACKET_LENGTH &amp;&amp; this.largePacketParts.length === 0) {
        this.onPacket(new Packet(sequenceId, chunk, start, start + this.packetHeaderLength + this.length));
      } else {
        // first large packet - remember it's id
        if (this.largePacketParts.length === 0) {
          this.firstPacketSequenceId = sequenceId;
        }
        this.largePacketParts.push(chunk.slice(start + this.packetHeaderLength, start + this.packetHeaderLength + this.length));
        if (this.length &lt; MAX_PACKET_LENGTH) {
          this._flushLargePacket();
        }
      }
      start += this.packetHeaderLength + this.length;
    } else { // payload is incomplete
      this.buffer = [chunk.slice(start + 3, end)];
      this.bufferLength = end - start - 3;
      this.execute = PacketParser.prototype.executePayload;
      return;
    }
  }
  if (end - start &gt; 0) { // there is start of length header, but it's not full 3 bytes
    this.headerLen = end - start; // 1 or 2 bytes
    this.length = chunk[start];
    if (this.headerLen == 2) {
      this.length = chunk[start] + (chunk[start + 1] &lt;&lt; 8);
      this.execute = PacketParser.prototype.executeHeader3;
    } else {
      this.execute = PacketParser.prototype.executeHeader2;
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.ping" id="apidoc.module.mysql2.ping">module mysql2.ping</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.ping.ping" id="apidoc.element.mysql2.ping.ping">
        function <span class="apidocSignatureSpan">mysql2.</span>ping
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Ping(callback)
{
  Command.call(this);
  this.onResult = callback;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.ping.super_" id="apidoc.element.mysql2.ping.super_">
        function <span class="apidocSignatureSpan">mysql2.ping.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.ping.prototype" id="apidoc.module.mysql2.ping.prototype">module mysql2.ping.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.ping.prototype.pingResponse" id="apidoc.element.mysql2.ping.prototype.pingResponse">
        function <span class="apidocSignatureSpan">mysql2.ping.prototype.</span>pingResponse
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pingResponse = function (packet) {
  // TODO: check it's OK packet. error check already done in caller
  if (this.onResult) {
    process.nextTick(this.onResult.bind(this));
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.ping.prototype.start" id="apidoc.element.mysql2.ping.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.ping.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  var ping = new Packet(0, Buffer.from([1, 0, 0, 0, CommandCode.PING]), 0, 5);
  connection.writePacket(ping);
  return Ping.prototype.pingResponse;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.pool" id="apidoc.module.mysql2.pool">module mysql2.pool</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.pool.pool" id="apidoc.element.mysql2.pool.pool">
        function <span class="apidocSignatureSpan">mysql2.</span>pool
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Pool(options) {
  EventEmitter.call(this);
  this.config = options.config;
  this.config.connectionConfig.pool = this;

  this._allConnections = new Queue();
  this._freeConnections = new Queue();
  this._connectionQueue = new Queue();
  this._closed = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.super_" id="apidoc.element.mysql2.pool.super_">
        function <span class="apidocSignatureSpan">mysql2.pool.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.pool.prototype" id="apidoc.module.mysql2.pool.prototype">module mysql2.pool.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype._removeConnection" id="apidoc.element.mysql2.pool.prototype._removeConnection">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>_removeConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_removeConnection = function (connection) {

  // Remove connection from all connections
  spliceConnection(this._allConnections, connection);

  // Remove connection from free connections
  spliceConnection(this._freeConnections, connection);

  this.releaseConnection(connection);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  if (!this._pool || this._pool._closed) {
    return;
  }

  var pool = this._pool;
  this._pool = null;

  pool.<span class="apidocCodeKeywordSpan">_removeConnection</span>(this);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype.end" id="apidoc.element.mysql2.pool.prototype.end">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>end
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function (cb) {
  this._closed = true;

  if (typeof cb != 'function') {
    cb = function (err) {
      if (err) {
        throw err;
      }
    };
  }

  var calledBack = false;
  var closedConnections = 0;
  var connection;

  var endCB = function (err) {
    if (calledBack) {
      return;
    }

    if (err || ++closedConnections &gt;= this._allConnections.length) {
      calledBack = true;
      cb(err);
      return;
    }
  }.bind(this);

  if (this._allConnections.length === 0) {
    endCB();
    return;
  }

  for (var i = 0; i &lt; this._allConnections.length; i++) {
    connection = this._allConnections.get(i);
    connection._realEnd(endCB);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- build: add iojs 1.8.x to matrix

0.15.5 - 08/04/2015
- fix broken 'stream rows' functionality                     #165, #166
- add io.js 1.6 to build matrix

0.15.4 - 11/03/2015
- added COM_QUIT command, sent from conn.<span class="apidocCodeKeywordSpan">end</span>()               #163, #150
- io.js 1.5
- don't crash on unexpected protocol packets, emit           #164, #160
 connection error event instead

0.15.3 - 24/02/2015
- multiple results support in binary protocol               #157 #26 #27
- add io.js 1.4 to CI matrix
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype.escape" id="apidoc.element.mysql2.pool.prototype.escape">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>escape
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">escape = function (value) {
  return mysql.escape(value, this.config.connectionConfig.stringifyObjects, this.config.connectionConfig.timezone);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    values: values
  };
  this._resolveNamedPlaceholders(opts);
  return SqlString.format(opts.sql, opts.values, this.config.stringifyObjects, this.config.timezone);
};

Connection.prototype.escape = function (value) {
  return SqlString.<span class="apidocCodeKeywordSpan">escape</span>(value, false, this.config.timezone);
};

Connection.prototype.escapeId = function escapeId (value) {
  return SqlString.escapeId(value, false);
};

var convertNamedPlaceholders = null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype.escapeId" id="apidoc.element.mysql2.pool.prototype.escapeId">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>escapeId
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function escapeId(value) {
  return mysql.escapeId(value, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- update error codes from node-mysql                         #201 209
- bump named-placeholders to 1.0.0, fixes problems with
  placeholders inside quotation ( https://github.com/sidorares/named-placeholders/issues/2 )
- catch exceptions during named placeholders processing      #187


0.15.8 - 22/06/2015
- Add .<span class="apidocCodeKeywordSpan">escapeId</span>() to Connection and Pool                     #180
- Build: iojs 2.2.1 &amp; 2.3.0
- Binary protocol: fix crash when server return null
  for 'NOT NULL' column                                      #178

0.15.7 - ?

0.15.6 - 04/06/2015
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype.execute" id="apidoc.element.mysql2.pool.prototype.execute">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>execute
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">execute = function (sql, values, cb) {
  var useNamedPlaceholders = this.config.connectionConfig.namedPlaceholders;

  this.getConnection(function (err, conn) {
    if (err) {
      return cb(err);
    }

    conn.config.namedPlaceholders = useNamedPlaceholders;
    return conn.execute(sql, values, function () {
      conn.release();
      cb.apply(this, arguments);
    });
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PromiseConnection.prototype.execute = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">execute</span>(query, params, done);
    } else {
      c.execute(query, done);
    }
  });
};

PromiseConnection.prototype.end = function () {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype.getConnection" id="apidoc.element.mysql2.pool.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (cb) {
  if (this._closed) {
    return process.nextTick(function () {
      return cb(new Error('Pool is closed.'));
    });
  }

  var connection;

  if (this._freeConnections.length &gt; 0) {
    connection = this._freeConnections.shift();

    return process.nextTick(function () {
      return cb(null, connection);
    });
  }

  if (this.config.connectionLimit === 0 || this._allConnections.length &lt; this.config.connectionLimit) {
    connection = new PoolConnection(this, {config: this.config.connectionConfig});

    this._allConnections.push(connection);

    return connection.connect(function (err) {
      if (this._closed) {
        return cb(new Error('Pool is closed.'));
      }
      if (err) {
        return cb(err);
      }

      this.emit('connection', connection);
      return cb(null, connection);
    }.bind(this));
  }

  if (!this.config.waitForConnections) {
    return process.nextTick(function () {
      return cb(new Error('No connections available.'));
    });
  }

  if (this.config.queueLimit &amp;&amp; this._connectionQueue.length &gt;= this.config.queueLimit) {
    return cb(new Error('Queue limit reached.'));
  }

  this.emit('enqueue');
  return this._connectionQueue.push(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

1.0.0-rc-11 ( 14/08/2016 )
- pool: support namedPlaceholder flag in `pool.query`
  and `pool.execute` helpers                              #369
- pool: do not emit error on query command if callback    #372
  was passed
- pool: propagate connection time error back
  to .<span class="apidocCodeKeywordSpan">getConnection</span>()                                     #372

1.0.0-rc-10 ( 09/08/2016 )
- ssl: do not use deprecated tls.createSecurePair
  if TLSSocket is avaiable                                #367, 363

- use supportBigNumbers and bigNumberStrings flags in
  parser
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype.query" id="apidoc.element.mysql2.pool.prototype.query">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>query
        <span class="apidocSignatureSpan">(sql, values, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">query = function (sql, values, cb) {
  var cmdQuery = Connection.createQuery(sql, values, cb, this.config.connectionConfig);
  cmdQuery.namedPlaceholders = this.config.connectionConfig.namedPlaceholders;

  this.getConnection(function (err, conn) {
    if (err) {
      if (typeof cmdQuery.onResult === 'function') {
        cmdQuery.onResult(err);
      } else {
        cmdQuery.emit('error', err);
      }
      return;
    }

    conn.query(cmdQuery).once('end', function () {
      conn.release();
    });
  });
  return cmdQuery;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

PromiseConnection.prototype.query = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">query</span>(query, params, done);
    } else {
      c.query(query, done);
    }
  });
};

PromiseConnection.prototype.execute = function (query, params) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool.prototype.releaseConnection" id="apidoc.element.mysql2.pool.prototype.releaseConnection">
        function <span class="apidocSignatureSpan">mysql2.pool.prototype.</span>releaseConnection
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">releaseConnection = function (connection) {
  var cb;

  if (!connection._pool) {
    // The connection has been removed from the pool and is no longer good.
    if (this._connectionQueue.length) {
      cb = this._connectionQueue.shift();

      process.nextTick(this.getConnection.bind(this, cb));
    }
  } else if (this._connectionQueue.length) {
    cb = this._connectionQueue.shift();

    process.nextTick(cb.bind(null, null, connection));
  } else {
    this._freeConnections.push(connection);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.on('error', function (err) { this._removeFromPool(); });
}

PoolConnection.prototype.release = function () {
if (!this._pool || this._pool._closed) {
  return;
}
this._pool.<span class="apidocCodeKeywordSpan">releaseConnection</span>(this);
};

// TODO: Remove this when we are removing PoolConnection#end
PoolConnection.prototype._realEnd = Connection.prototype.end;

PoolConnection.prototype.end = function () {
console.warn('Calling conn.end() to release a pooled connection is '
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.pool_cluster" id="apidoc.module.mysql2.pool_cluster">module mysql2.pool_cluster</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.pool_cluster" id="apidoc.element.mysql2.pool_cluster.pool_cluster">
        function <span class="apidocSignatureSpan">mysql2.</span>pool_cluster
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolCluster(config) {
  EventEmitter.call(this);

  config = config || {};
  this._canRetry = typeof config.canRetry === 'undefined' ? true : config.canRetry;
  this._removeNodeErrorCount = config.removeNodeErrorCount || 5;
  this._defaultSelector = config.defaultSelector || 'RR';

  this._closed = false;
  this._lastId = 0;
  this._nodes = {};
  this._serviceableNodeIds = [];
  this._namespaces = {};
  this._findCaches = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.super_" id="apidoc.element.mysql2.pool_cluster.super_">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.pool_cluster.prototype" id="apidoc.module.mysql2.pool_cluster.prototype">module mysql2.pool_cluster.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype._clearFindCaches" id="apidoc.element.mysql2.pool_cluster.prototype._clearFindCaches">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_clearFindCaches
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_clearFindCaches = function () {
  this._findCaches = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    id: id,
    errorCount: 0,
    pool: new Pool({config: new PoolConfig(config)})
  };

  this._serviceableNodeIds.push(id);

  this.<span class="apidocCodeKeywordSpan">_clearFindCaches</span>();
}
};

PoolCluster.prototype.getConnection = function (pattern, selector, cb) {
var namespace;
if (typeof pattern === 'function') {
  cb = pattern;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype._decreaseErrorCount" id="apidoc.element.mysql2.pool_cluster.prototype._decreaseErrorCount">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_decreaseErrorCount
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_decreaseErrorCount = function (node) {
  if (node.errorCount &gt; 0) {
    --node.errorCount;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
      if (self._canRetry) {
        console.warn('[Error] PoolCluster : ' + err);
        return cb(null, 'retry');
      } else {
        return cb(err);
      }
    } else {
      self.<span class="apidocCodeKeywordSpan">_decreaseErrorCount</span>(node);
    }

    connection._clusterId = node.id;

    return cb(null, connection);
  });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype._findNodeIds" id="apidoc.element.mysql2.pool_cluster.prototype._findNodeIds">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_findNodeIds
        <span class="apidocSignatureSpan">(pattern)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_findNodeIds = function (pattern) {
  if (typeof this._findCaches[pattern] !== 'undefined') {
    return this._findCaches[pattern];
  }

  var foundNodeIds;

  if (pattern === '*') { // all
    foundNodeIds = this._serviceableNodeIds;
  } else if (this._serviceableNodeIds.indexOf(pattern) != -1) { // one
    foundNodeIds = [pattern];
  } else { // wild matching
    var keyword = pattern.substring(pattern.length - 1, 0);

    foundNodeIds = this._serviceableNodeIds.filter(function (id) {
      return id.indexOf(keyword) === 0;
    });
  }

  this._findCaches[pattern] = foundNodeIds;

  return foundNodeIds;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }

  return cb(null, connection);
}.bind(this));
};

PoolNamespace.prototype._getClusterNode = function () {
var foundNodeIds = this._cluster.<span class="apidocCodeKeywordSpan">_findNodeIds</span>(this._pattern);

if (foundNodeIds.length === 0) {
  return null;
}

var nodeId = (foundNodeIds.length === 1) ? foundNodeIds[0] : this._selector(foundNodeIds);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype._getConnection" id="apidoc.element.mysql2.pool_cluster.prototype._getConnection">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_getConnection
        <span class="apidocSignatureSpan">(node, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getConnection = function (node, cb) {
  var self = this;

  node.pool.getConnection(function (err, connection) {
    if (err) {
      self._increaseErrorCount(node);

      if (self._canRetry) {
        console.warn('[Error] PoolCluster : ' + err);
        return cb(null, 'retry');
      } else {
        return cb(err);
      }
    } else {
      self._decreaseErrorCount(node);
    }

    connection._clusterId = node.id;

    return cb(null, connection);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
PoolNamespace.prototype.getConnection = function (cb) {
  var clusterNode = this._getClusterNode();

  if (clusterNode === null) {
return cb(new Error('Pool does Not exists.'));
  }

  return this._cluster.<span class="apidocCodeKeywordSpan">_getConnection</span>(clusterNode, function (err, connection) {
if (err) {
  return cb(err);
}

if (connection === 'retry') {
  return this.getConnection(cb);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype._getNode" id="apidoc.element.mysql2.pool_cluster.prototype._getNode">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_getNode
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getNode = function (id) {
  return this._nodes[id] || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

  if (foundNodeIds.length === 0) {
    return null;
  }

  var nodeId = (foundNodeIds.length === 1) ? foundNodeIds[0] : this._selector(foundNodeIds);

  return this._cluster.<span class="apidocCodeKeywordSpan">_getNode</span>(nodeId);
};

/**
 * Selector
 */
var Selector = {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype._increaseErrorCount" id="apidoc.element.mysql2.pool_cluster.prototype._increaseErrorCount">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>_increaseErrorCount
        <span class="apidocSignatureSpan">(node)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_increaseErrorCount = function (node) {
  if (++node.errorCount &gt;= this._removeNodeErrorCount) {
    var index = this._serviceableNodeIds.indexOf(node.id);
    if (index !== -1) {
      this._serviceableNodeIds.splice(index, 1);
      delete this._nodes[node.id];

      this._clearFindCaches();

      node.pool.end();

      this.emit('remove', node.id);
    }
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

PoolCluster.prototype._getConnection = function (node, cb) {
  var self = this;

  node.pool.getConnection(function (err, connection) {
    if (err) {
self.<span class="apidocCodeKeywordSpan">_increaseErrorCount</span>(node);

if (self._canRetry) {
  console.warn('[Error] PoolCluster : ' + err);
  return cb(null, 'retry');
} else {
  return cb(err);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype.add" id="apidoc.element.mysql2.pool_cluster.prototype.add">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>add
        <span class="apidocSignatureSpan">(id, config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">add = function (id, config) {
  if (typeof id === 'object') {
    config = id;
    id = 'CLUSTER::' + (++this._lastId);
  }

  if (typeof this._nodes[id] === 'undefined') {
    this._nodes[id] = {
      id: id,
      errorCount: 0,
      pool: new Pool({config: new PoolConfig(config)})
    };

    this._serviceableNodeIds.push(id);

    this._clearFindCaches();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype.end" id="apidoc.element.mysql2.pool_cluster.prototype.end">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  if (this._closed) {
    return;
  }

  this._closed = true;

  for (var id in this._nodes) {
    this._nodes[id].pool.end();
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- build: add iojs 1.8.x to matrix

0.15.5 - 08/04/2015
- fix broken 'stream rows' functionality                     #165, #166
- add io.js 1.6 to build matrix

0.15.4 - 11/03/2015
- added COM_QUIT command, sent from conn.<span class="apidocCodeKeywordSpan">end</span>()               #163, #150
- io.js 1.5
- don't crash on unexpected protocol packets, emit           #164, #160
 connection error event instead

0.15.3 - 24/02/2015
- multiple results support in binary protocol               #157 #26 #27
- add io.js 1.4 to CI matrix
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype.getConnection" id="apidoc.element.mysql2.pool_cluster.prototype.getConnection">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>getConnection
        <span class="apidocSignatureSpan">(pattern, selector, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnection = function (pattern, selector, cb) {
  var namespace;
  if (typeof pattern === 'function') {
    cb = pattern;
    namespace = this.of();
  } else {
    if (typeof selector === 'function') {
      cb = selector;
      selector = this._defaultSelector;
    }

    namespace = this.of(pattern, selector);
  }

  namespace.getConnection(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

1.0.0-rc-11 ( 14/08/2016 )
- pool: support namedPlaceholder flag in `pool.query`
  and `pool.execute` helpers                              #369
- pool: do not emit error on query command if callback    #372
  was passed
- pool: propagate connection time error back
  to .<span class="apidocCodeKeywordSpan">getConnection</span>()                                     #372

1.0.0-rc-10 ( 09/08/2016 )
- ssl: do not use deprecated tls.createSecurePair
  if TLSSocket is avaiable                                #367, 363

- use supportBigNumbers and bigNumberStrings flags in
  parser
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_cluster.prototype.of" id="apidoc.element.mysql2.pool_cluster.prototype.of">
        function <span class="apidocSignatureSpan">mysql2.pool_cluster.prototype.</span>of
        <span class="apidocSignatureSpan">(pattern, selector)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">of = function (pattern, selector) {
  pattern = pattern || '*';

  selector = selector || this._defaultSelector;
  selector = selector.toUpperCase();
  if (typeof Selector[selector] === 'undefined') {
    selector = this._defaultSelector;
  }

  var key = pattern + selector;

  if (typeof this._namespaces[key] === 'undefined') {
    this._namespaces[key] = new PoolNamespace(this, pattern, selector);
  }

  return this._namespaces[key];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  }
};

PoolCluster.prototype.getConnection = function (pattern, selector, cb) {
  var namespace;
  if (typeof pattern === 'function') {
cb = pattern;
namespace = this.<span class="apidocCodeKeywordSpan">of</span>();
  } else {
if (typeof selector === 'function') {
  cb = selector;
  selector = this._defaultSelector;
}

namespace = this.of(pattern, selector);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.pool_connection" id="apidoc.module.mysql2.pool_connection">module mysql2.pool_connection</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.pool_connection" id="apidoc.element.mysql2.pool_connection.pool_connection">
        function <span class="apidocSignatureSpan">mysql2.</span>pool_connection
        <span class="apidocSignatureSpan">(pool, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PoolConnection(pool, options) {
  Connection.call(this, options);
  this._pool = pool;

  // When a fatal error occurs the connection's protocol ends, which will cause
  // the connection to end as well, thus we only need to watch for the end event
  // and we will be notified of disconnects.
  var connection = this;
  this.on('end', function (err) { this._removeFromPool(); });
  this.on('error', function (err) { this._removeFromPool(); });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.statementKey" id="apidoc.element.mysql2.pool_connection.statementKey">
        function <span class="apidocSignatureSpan">mysql2.pool_connection.</span>statementKey
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">statementKey = function (options) {
  return (typeof options.nestTables) +
    '/' + options.nestTables + '/' + options.rowsAsArray + options.sql;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Connection.prototype.unprepare = function unprepare (sql) {
  var options = {};
  if (typeof sql === 'object') {
    options = sql;
  } else {
    options.sql = sql;
  }
  var key = Connection.<span class="apidocCodeKeywordSpan">statementKey</span>(options);
  var stmt = this._statements.get(key);
  if (stmt) {
    this._statements.del(key);
    stmt.close();
  }
  return stmt;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.super_" id="apidoc.element.mysql2.pool_connection.super_">
        function <span class="apidocSignatureSpan">mysql2.pool_connection.</span>super_
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Connection(opts)
{
  EventEmitter.call(this);
  this.config = opts.config;

  // TODO: fill defaults
  // if no params, connect to /var/lib/mysql/mysql.sock ( /tmp/mysql.sock on OSX )
  // if host is given, connect to host:3306

  // TODO: use `/usr/local/mysql/bin/mysql_config --socket` output? as default socketPath
  // if there is no host/port and no socketPath parameters?

  if (!opts.config.stream) {
    if (opts.config.socketPath) {
      this.stream = Net.connect(opts.config.socketPath);
    } else {
      this.stream = Net.connect(opts.config.port, opts.config.host);
    }
  } else {
    // if stream is a function, treat it as "stream agent / factory"
    if (typeof opts.config.stream == 'function') {
      this.stream = opts.config.stream(opts);
    } else {
      this.stream = opts.config.stream;
    }
  }
  this._internalId = _connectionId++;

  this._commands = new Queue();
  this._command = null;

  this._paused = false;
  this._paused_packets = new Queue();

  this._statements = LRU({
    max: this.config.maxPreparedStatements,
    dispose: function (key, statement) { statement.close(); }
  });

  // TODO: make it lru cache
  // https://github.com/mercadolibre/node-simple-lru-cache
  // or https://github.com/rsms/js-lru
  // or https://github.com/monsur/jscache
  // or https://github.com/isaacs/node-lru-cache
  //
  // key is field.name + ':' + field.columnType + ':' field.flags + '/'
  this.textProtocolParsers = {};

  // TODO: not sure if cache should be separate (same key as with textProtocolParsers)
  // or part of prepared statements cache (key is sql query)
  this.binaryProtocolParsers = {};

  this.serverCapabilityFlags = 0;
  this.authorized = false;

  var connection = this;

  this.sequenceId = 0;
  this.compressedSequenceId = 0;

  this.threadId = null;
  this._handshakePacket = null;
  this._fatalError = null;
  this._protocolError = null;
  this._outOfOrderPackets = [];

  this.clientEncoding = CharsetToEncoding[this.config.charsetNumber];

  this.stream.once('error', connection._handleNetworkError.bind(this));

  // see https://gist.github.com/khoomeister/4985691#use-that-instead-of-bind
  this.packetParser = new PacketParser(function (p) {
    connection.handlePacket(p);
  });

  this.stream.on('data', function (data) {
    if (connection.connectTimeout) {
      Timers.clearTimeout(connection.connectTimeout);
      connection.connectTimeout = null;
    }
    connection.packetParser.execute(data);
  });

  this.stream.on('end', function () {
    // we need to set this flag everywhere where we want connection to close
    if (connection._closing) {
      return;
    }

    if (!connection._protocolError) { // no particular error message before disconnect
      connection._protocolError = new Error('Connection lost: The server closed the connection.');
      connection._protocolError.fatal = true;
      connection._protocolError.code = 'PROTOCOL_CONNECTION_LOST';
    }

    connection._notifyError(connection._protocolError);
  });
  var handshakeCommand;
  if (!this.config.isServer) {
    handshakeCommand = new Commands.ClientHandshake(this.config.clientFlags);
    handshakeCommand.on('end', function () {
      connection._handshakePacket = handshakeCommand.handshake;
      connection.threadId = handshakeCommand.handshake.connectionId;
      connection.emit('connect', handshakeCommand.handshake);
    });
    handshakeCommand.on('error', function (err) {
      connection._notifyError(err);
    });
    this.addCommand(handshakeCommand);
  }

  // in case there was no initiall handshake but we need to read sting, assume it utf-8
  // most common example: "Too many connections" error ( packet is sent immediately on connection attempt, we don't know server
encoding yet)
  // will be overwrittedn with actial encoding value as soon as server handshake packet is received
  this.serverEncoding = 'utf8';

  if (this.config.connectTimeout) {
    var timeoutHandler = this._handleTimeoutError.bind(this);
    this.connectTimeout = Timers.setTimeout(timeoutHandler, this.config.connectTimeout);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.pool_connection.prototype" id="apidoc.module.mysql2.pool_connection.prototype">module mysql2.pool_connection.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.prototype._realEnd" id="apidoc.element.mysql2.pool_connection.prototype._realEnd">
        function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>_realEnd
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_realEnd = function (callback) {
  var connection = this;

  if (this.config.isServer) {
    connection._closing = true;
    var quitCmd = new EventEmitter();
    setImmediate(function () {
      connection.stream.end();
      quitCmd.emit('end');
    });
    return quitCmd;
  }

  // trigger error if more commands enqueued after end command
  var quitCmd = this.addCommand(new Commands.Quit(callback));
  connection.addCommand = connection._addCommandClosedState;
  return quitCmd;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this._allConnections.length === 0) {
  endCB();
  return;
}

for (var i = 0; i &lt; this._allConnections.length; i++) {
  connection = this._allConnections.get(i);
  connection.<span class="apidocCodeKeywordSpan">_realEnd</span>(endCB);
}
};

Pool.prototype.query = function (sql, values, cb) {
var cmdQuery = Connection.createQuery(sql, values, cb, this.config.connectionConfig);
cmdQuery.namedPlaceholders = this.config.connectionConfig.namedPlaceholders;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.prototype._removeFromPool" id="apidoc.element.mysql2.pool_connection.prototype._removeFromPool">
        function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>_removeFromPool
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_removeFromPool = function () {
  if (!this._pool || this._pool._closed) {
    return;
  }

  var pool = this._pool;
  this._pool = null;

  pool._removeConnection(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Connection.call(this, options);
this._pool = pool;

// When a fatal error occurs the connection's protocol ends, which will cause
// the connection to end as well, thus we only need to watch for the end event
// and we will be notified of disconnects.
var connection = this;
this.on('end', function (err) { this.<span class="apidocCodeKeywordSpan">_removeFromPool</span>(); });
this.on('error', function (err) { this._removeFromPool(); });
}

PoolConnection.prototype.release = function () {
if (!this._pool || this._pool._closed) {
  return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.prototype.destroy" id="apidoc.element.mysql2.pool_connection.prototype.destroy">
        function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>destroy
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">destroy = function () {
  this._removeFromPool();
  return Connection.prototype.destroy.apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- (perf) replace double-ended-queue with denqueue       #444
- (feat) automatically track client encoding change     #437, #389
- (feat) add support for CLIENT_SESSION_TRACK info      #388, #436

1.1.1 ( 06/10/2016 )
- (fix) do not crash when result of execute().stream()
  is paused                                             #174, #424
- (fix) do not call .<span class="apidocCodeKeywordSpan">destroy</span>() on stream when connect timeout
  is fired (destroy() method exist only on Net stream
  but not on custom streams)                             #417, #414
- (internal) parser generator now uses generate-function
  package to prepare dynamically generated parser func   #412, #167
- (docs) fix readme test/code errors                     #413
- (tests) use docker+mysql 5.7 on travis                 #410
- (fix) use correct encoding for JSON type (despite
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.prototype.end" id="apidoc.element.mysql2.pool_connection.prototype.end">
        function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>end
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">end = function () {
  console.warn('Calling conn.end() to release a pooled connection is '
              + 'deprecated. In next version calling conn.end() will be '
              + 'restored to default conn.end() behavior. Use '
              + 'conn.release() instead.'
              );
  this.release();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- build: add iojs 1.8.x to matrix

0.15.5 - 08/04/2015
- fix broken 'stream rows' functionality                     #165, #166
- add io.js 1.6 to build matrix

0.15.4 - 11/03/2015
- added COM_QUIT command, sent from conn.<span class="apidocCodeKeywordSpan">end</span>()               #163, #150
- io.js 1.5
- don't crash on unexpected protocol packets, emit           #164, #160
 connection error event instead

0.15.3 - 24/02/2015
- multiple results support in binary protocol               #157 #26 #27
- add io.js 1.4 to CI matrix
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.pool_connection.prototype.release" id="apidoc.element.mysql2.pool_connection.prototype.release">
        function <span class="apidocSignatureSpan">mysql2.pool_connection.prototype.</span>release
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">release = function () {
  if (!this._pool || this._pool._closed) {
    return;
  }
  this._pool.releaseConnection(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
0.10.7

- Amazon RDS+ssl example and public CA cert                         709394a4afbbaf0500439e72caec5d37e949fe26
- pool updated from node-mysql                   #71, #68, #61      db561dbe10a55bb0f9893eb0e2c4b429edd6ee3a

0.10.6
- handle TIMESTAMP type                                    #59      6dd6fc82d95a16e18092c4db4e8da225b37e9314
- rename pool's connection.end() to connection.<span class="apidocCodeKeywordSpan">release</span>()   #53      c63b2442e3c0fb5ea3953725ba9c1b3e08b2b831

0.10.5

- node-mysql compatibility: remove 'number of results in response'
  callback argument (Brian White)                          #46       40af0530403a3892743d32974055c5ea23cbd3ec
- node 0.11 (use on('data') instead of ondata )                      39906c78b85a77e468694814a50f99714d7bbbd6
- fix again ssl (#41)                                                713051bf997a186774b618cde583707320a1d551
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.prepare" id="apidoc.module.mysql2.prepare">module mysql2.prepare</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.prepare.prepare" id="apidoc.element.mysql2.prepare.prepare">
        function <span class="apidocSignatureSpan">mysql2.</span>prepare
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Prepare(options, callback)
{
  Command.call(this);
  this.query = options.sql;
  this.onResult = callback;

  this.id = 0;
  this.fieldCount = 0;
  this.parameterCount = 0;
  this.fields = [];
  this.parameterDefinitions = [];
  this.options = options;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare.super_" id="apidoc.element.mysql2.prepare.super_">
        function <span class="apidocSignatureSpan">mysql2.prepare.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.prepare.prototype" id="apidoc.module.mysql2.prepare.prototype">module mysql2.prepare.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.prepare.prototype.fieldsEOF" id="apidoc.element.mysql2.prepare.prototype.fieldsEOF">
        function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>fieldsEOF
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fieldsEOF = function (packet, connection) {
  if (!packet.isEOF()) {
    return connection.protocolError('Expected EOF packet after fields');
  }
  return this.prepareDone(connection);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare.prototype.parametersEOF" id="apidoc.element.mysql2.prepare.prototype.parametersEOF">
        function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>parametersEOF
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parametersEOF = function (packet, connection) {
  if (!packet.isEOF()) {
    return connection.protocolError('Expected EOF packet after parameters');
  }

  if (this.fieldCount &gt; 0) {
    return Prepare.prototype.readField;
  } else {
    return this.prepareDone(connection);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare.prototype.prepareDone" id="apidoc.element.mysql2.prepare.prototype.prepareDone">
        function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>prepareDone
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepareDone = function (connection)
{
  var self = this;
  var statement = new PreparedStatementInfo(
    self.query,
    self.id,
    self.fields,
    self.parameterDefinitions,
    connection
  );

  connection._statements.set(this.key, statement);

  if (this.onResult) {
    self.onResult(null, statement);
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this.fieldCount = header.fieldCount;
this.parameterCount = header.parameterCount;
if (this.parameterCount &gt; 0) {
  return Prepare.prototype.readParameter;
} else if (this.fieldCount &gt; 0) {
  return Prepare.prototype.readField;
} else {
  return this.<span class="apidocCodeKeywordSpan">prepareDone</span>(connection);
}
};

Prepare.prototype.readParameter = function (packet, connection) {
var def = new Packets.ColumnDefinition(packet, connection.clientEncoding);
this.parameterDefinitions.push(def);
if (this.parameterDefinitions.length == this.parameterCount) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare.prototype.prepareHeader" id="apidoc.element.mysql2.prepare.prototype.prepareHeader">
        function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>prepareHeader
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepareHeader = function (packet, connection) {
  var header = new Packets.PreparedStatementHeader(packet);
  this.id = header.id;
  this.fieldCount = header.fieldCount;
  this.parameterCount = header.parameterCount;
  if (this.parameterCount &gt; 0) {
    return Prepare.prototype.readParameter;
  } else if (this.fieldCount &gt; 0) {
    return Prepare.prototype.readField;
  } else {
    return this.prepareDone(connection);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare.prototype.readField" id="apidoc.element.mysql2.prepare.prototype.readField">
        function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>readField
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readField = function (packet, connection) {
  var def = new Packets.ColumnDefinition(packet, connection.clientEncoding);
  this.fields.push(def);
  if (this.fields.length == this.fieldCount) {
    return Prepare.prototype.fieldsEOF;
  }
  return Prepare.prototype.readField;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare.prototype.readParameter" id="apidoc.element.mysql2.prepare.prototype.readParameter">
        function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>readParameter
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readParameter = function (packet, connection) {
  var def = new Packets.ColumnDefinition(packet, connection.clientEncoding);
  this.parameterDefinitions.push(def);
  if (this.parameterDefinitions.length == this.parameterCount) {
    return Prepare.prototype.parametersEOF;
  }
  return this.readParameter;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.prepare.prototype.start" id="apidoc.element.mysql2.prepare.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.prepare.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  var Connection = connection.constructor;
  this.key = Connection.statementKey(this.options);

  var statement = connection._statements.get(this.key);
  if (statement) {
    if (this.onResult) {
      this.onResult(null, statement);
    }
    return null;
  }

  var cmdPacket = new Packets.PrepareStatement(this.query, connection.config.charsetNumber);
  connection.writePacket(cmdPacket.toPacket(1));
  return Prepare.prototype.prepareHeader;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.prepare_statement" id="apidoc.module.mysql2.prepare_statement">module mysql2.prepare_statement</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.prepare_statement.prepare_statement" id="apidoc.element.mysql2.prepare_statement.prepare_statement">
        function <span class="apidocSignatureSpan">mysql2.</span>prepare_statement
        <span class="apidocSignatureSpan">(sql, charsetNumber)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function PrepareStatement(sql, charsetNumber)
{
  this.query = sql;
  this.charsetNumber = charsetNumber;
  this.encoding = CharsetToEncoding[charsetNumber];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.prepare_statement.prototype" id="apidoc.module.mysql2.prepare_statement.prototype">module mysql2.prepare_statement.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.prepare_statement.prototype.toPacket" id="apidoc.element.mysql2.prepare_statement.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.prepare_statement.prototype.</span>toPacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function ()
{
  var buf = StringParser.encode(this.query, this.encoding);
  var length = 5 + buf.length;

  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeInt8(CommandCodes.STMT_PREPARE);
  packet.writeBuffer(buf);
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.promise" id="apidoc.module.mysql2.promise">module mysql2.promise</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.promise.createConnection" id="apidoc.element.mysql2.promise.createConnection">
        function <span class="apidocSignatureSpan">mysql2.promise.</span>createConnection
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createConnection(opts) {
  var coreConnection = core.createConnection(opts);
  var Promise = opts.Promise || global.Promise;
  if (!Promise) {
    throw new Error('no Promise implementation available.' +
      'Use promise-enabled node version or pass userland Promise' +
      ' implementation as parameter, for example: { Promise: require(\'es6-promise\').Promise }');
  }
  return new Promise(function (resolve, reject) {
    coreConnection.once('connect', function (connectParams) {
      resolve(new PromiseConnection(coreConnection, Promise));
    });
    coreConnection.once('error', reject);
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...




var core = require('./index.js');

function createConnection (opts) {
var coreConnection = core.<span class="apidocCodeKeywordSpan">createConnection</span>(opts);
var Promise = opts.Promise || global.Promise;
if (!Promise) {
  throw new Error('no Promise implementation available.' +
    'Use promise-enabled node version or pass userland Promise' +
    ' implementation as parameter, for example: { Promise: require(\'es6-promise\').Promise }');
}
return new Promise(function (resolve, reject) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.promise.createPool" id="apidoc.element.mysql2.promise.createPool">
        function <span class="apidocSignatureSpan">mysql2.promise.</span>createPool
        <span class="apidocSignatureSpan">(opts)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function createPool(opts) {
  var corePool = core.createPool(opts);
  var Promise = opts.Promise || global.Promise || require('es6-promise');

  var promisePool = {
    getConnection: function () {
      return new Promise(function (resolve, reject) {
        corePool.getConnection(function (err, coreConnection) {
          if (err) {
            reject(err);
          } else {
            resolve(new PromiseConnection(coreConnection, Promise));
          }
        });
      });
    },

    query: function (sql, args) {
      return new Promise(function (resolve, reject) {
        var done = makeDoneCb(resolve, reject);
        if (args) {
          corePool.query(sql, args, done);
        } else {
          corePool.query(sql, done);
        }
      });
    },

    execute: function (sql, values) {
      return new Promise(function (resolve, reject) {
        corePool.execute(sql, values, makeDoneCb(resolve, reject));
      });
    },

    end: function () {
      return new Promise(function (resolve, reject) {
        corePool.end(function (err) {
          if (err) {
            reject(err);
          } else {
            resolve();
          }
        });
      });
    }
  };

  return promisePool;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  c.end(function () {
    resolve();
  });
});
};

function createPool (opts) {
var corePool = core.<span class="apidocCodeKeywordSpan">createPool</span>(opts);
var Promise = opts.Promise || global.Promise || require('es6-promise');

var promisePool = {
  getConnection: function () {
    return new Promise(function (resolve, reject) {
      corePool.getConnection(function (err, coreConnection) {
        if (err) {
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.query" id="apidoc.module.mysql2.query">module mysql2.query</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.query.query" id="apidoc.element.mysql2.query.query">
        function <span class="apidocSignatureSpan">mysql2.</span>query
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Query(options, callback)
{
  Command.call(this);
  this.sql = options.sql;
  this.values = options.values;
  this._queryOptions = options;
  this.onResult = callback;
  this._fieldCount = 0;
  this._rowParser = null;
  this._fields = [];
  this._rows = [];
  this._receivedFieldsCount = 0;
  this._resultIndex = 0;
  this._localStream = null;
  this._unpipeStream = function () {};
  this._streamFactory = options.infileStreamFactory;
  this._connection = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

PromiseConnection.prototype.query = function (query, params) {
  var c = this.connection;
  return new this.Promise(function (resolve, reject) {
    var done = makeDoneCb(resolve, reject);
    if (params) {
      c.<span class="apidocCodeKeywordSpan">query</span>(query, params, done);
    } else {
      c.query(query, done);
    }
  });
};

PromiseConnection.prototype.execute = function (query, params) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.super_" id="apidoc.element.mysql2.query.super_">
        function <span class="apidocSignatureSpan">mysql2.query.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.query.prototype" id="apidoc.module.mysql2.query.prototype">module mysql2.query.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.query.prototype._findOrCreateReadStream" id="apidoc.element.mysql2.query.prototype._findOrCreateReadStream">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>_findOrCreateReadStream
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_findOrCreateReadStream = function (path) {
  if (this._streamFactory) {
    return this._streamFactory(path);
  }
  return fs.createReadStream(path, {
    'flag': 'r',
    'encoding': null,
    'autoClose': true
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (connection.config.debug) {
  console.log('        Resultset header received, expecting ' + rs.fieldCount + ' column definition packets');
}
if (this._fieldCount === 0) {
  return this.doneInsert(rs);
}
if (this._fieldCount === null) {
  this._localStream = this.<span class="apidocCodeKeywordSpan">_findOrCreateReadStream</span>(rs.infileName);
  // start streaming, after last packet expect OK
  // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
  this._streamLocalInfile(connection);
  return this.infileOk;
}

this._receivedFieldsCount = 0;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype._streamLocalInfile" id="apidoc.element.mysql2.query.prototype._streamLocalInfile">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>_streamLocalInfile
        <span class="apidocSignatureSpan">(connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_streamLocalInfile = function (connection) {
  var command = this;

  var onDrain = function () {
    command._localStream.resume();
  };

  var onPause = function () {
    command._localStream.pause();
  };

  var onData = function (data) {
    var dataWithHeader = Buffer.allocUnsafe(data.length + 4);
    data.copy(dataWithHeader, 4);
    connection.writePacket(new Packets.Packet(0, dataWithHeader, 0, dataWithHeader.length));
  };

  var onEnd = function () {
    connection.writePacket(EmptyPacket);
  };

  var onError = function (err) {
    command._localStreamError = err;
    connection.writePacket(EmptyPacket);
  };

  command._unpipeStream = function () {
    connection.stream.removeListener('pause', onPause);
    connection.stream.removeListener('drain', onDrain);
    command._localStream.removeListener('data', onData);
    command._localStream.removeListener('end', onEnd);
    command._localStream.removeListener('error', onError);
  };

  connection.stream.on('pause', onPause);
  connection.stream.on('drain', onDrain);
  command._localStream.on('data', onData);
  command._localStream.on('end', onEnd);
  command._localStream.on('error', onError);

  connection.once('error', function (err) {
    command._unpipeStream();
  });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (this._fieldCount === 0) {
  return this.doneInsert(rs);
}
if (this._fieldCount === null) {
  this._localStream = this._findOrCreateReadStream(rs.infileName);
  // start streaming, after last packet expect OK
  // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
  this.<span class="apidocCodeKeywordSpan">_streamLocalInfile</span>(connection);
  return this.infileOk;
}

this._receivedFieldsCount = 0;
this._rows.push([]);
this._fields.push([]);
return this.readField;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.done" id="apidoc.element.mysql2.query.prototype.done">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>done
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">done = function () {
  var self = this;
  this._unpipeStream();
  if (this.onResult) {
    var rows, fields;
    if (this._resultIndex === 0) {
      rows = this._rows[0];
      fields = this._fields[0];
    } else {
      rows = this._rows;
      fields = this._fields;
    }
    if (fields) {
      process.nextTick(function () {
        self.onResult(null, rows, fields);
      });
    } else {
      process.nextTick(function () {
        self.onResult(null, rows);
      });
    }
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    zlib.inflate(body, function (err, data) {
      if (err) {
        connection._handleNetworkError(err);
        return;
      }
      connection._bumpCompressedSequenceId(packet.numPackets);
      connection._inflatedPacketsParser.execute(data);
      task.<span class="apidocCodeKeywordSpan">done</span>();
    });
  });
} else {
  connection.inflateQueue.push(function (task) {
    connection._bumpCompressedSequenceId(packet.numPackets);
    connection._inflatedPacketsParser.execute(body);
    task.done();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.doneInsert" id="apidoc.element.mysql2.query.prototype.doneInsert">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>doneInsert
        <span class="apidocSignatureSpan">(rs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">doneInsert = function (rs) {
  if (this._localStreamError) {
    if (this.onResult) {
      this.onResult(this._localStreamError, rs);
    } else {
      this.emit('error', this._localStreamError);
    }
    return null;
  }
  this._rows.push(rs);
  this._fields.push(void (0));
  this.emit('fields', void (0));
  this.emit('result', rs);
  if (rs.serverStatus &amp; ServerStatus.SERVER_MORE_RESULTS_EXISTS) {
    this._resultIndex++;
    return this.resultsetHeader;
  }
  return this.done();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Query.prototype.resultsetHeader = function (packet, connection) {
var rs = new Packets.ResultSetHeader(packet, connection);
this._fieldCount = rs.fieldCount;
if (connection.config.debug) {
  console.log('        Resultset header received, expecting ' + rs.fieldCount + ' column definition packets');
}
if (this._fieldCount === 0) {
  return this.<span class="apidocCodeKeywordSpan">doneInsert</span>(rs);
}
if (this._fieldCount === null) {
  this._localStream = this._findOrCreateReadStream(rs.infileName);
  // start streaming, after last packet expect OK
  // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
  this._streamLocalInfile(connection);
  return this.infileOk;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.fieldsEOF" id="apidoc.element.mysql2.query.prototype.fieldsEOF">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>fieldsEOF
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fieldsEOF = function (packet, connection) {
  // check EOF
  if (!packet.isEOF()) {
    return connection.protocolError('Expected EOF packet');
  }
  return this.row;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.infileOk" id="apidoc.element.mysql2.query.prototype.infileOk">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>infileOk
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">infileOk = function (packet, connection) {
  var rs = new Packets.ResultSetHeader(packet, connection);
  return this.doneInsert(rs);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.readField" id="apidoc.element.mysql2.query.prototype.readField">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>readField
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readField = function (packet, connection) {

  this._receivedFieldsCount++;

  // Often there is much more data in the column definition than in the row itself
  // If you set manually _fields[0] to array of ColumnDefinition's (from previous call)
  // you can 'cache' result of parsing. Field packets still received, but ignored in that case
  // this is the reason _receivedFieldsCount exist (otherwise we could just use current length of fields array)

  if (this._fields[this._resultIndex].length != this._fieldCount) {
    var field = new Packets.ColumnDefinition(packet, connection.clientEncoding);
    this._fields[this._resultIndex].push(field);
    if (connection.config.debug) {
      console.log('        Column definition:');
      console.log('          name: ' + field.name);
      console.log('          type: ' + field.columnType);
      console.log('         flags: ' + field.flags);
    }
  }

  // last field received
  if (this._receivedFieldsCount == this._fieldCount) {
    var fields = this._fields[this._resultIndex];
    this.emit('fields', fields);
    var parserKey = connection.keyFromFields(fields, this.options);
    this._rowParser = connection.textProtocolParsers[parserKey];
    if (!this._rowParser) {
      this._rowParser = compileParser(fields, this.options, connection.config);
      connection.textProtocolParsers[parserKey] = this._rowParser;
    }
    return Query.prototype.fieldsEOF;
  }
  return Query.prototype.readField;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.resultsetHeader" id="apidoc.element.mysql2.query.prototype.resultsetHeader">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>resultsetHeader
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resultsetHeader = function (packet, connection) {
  var rs = new Packets.ResultSetHeader(packet, connection);
  this._fieldCount = rs.fieldCount;
  if (connection.config.debug) {
    console.log('        Resultset header received, expecting ' + rs.fieldCount + ' column definition packets');
  }
  if (this._fieldCount === 0) {
    return this.doneInsert(rs);
  }
  if (this._fieldCount === null) {
    this._localStream = this._findOrCreateReadStream(rs.infileName);
    // start streaming, after last packet expect OK
    // http://dev.mysql.com/doc/internals/en/com-query-response.html#local-infile-data
    this._streamLocalInfile(connection);
    return this.infileOk;
  }

  this._receivedFieldsCount = 0;
  this._rows.push([]);
  this._fields.push([]);
  return this.readField;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.row" id="apidoc.element.mysql2.query.prototype.row">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>row
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">row = function (packet)
{
  if (packet.isEOF()) {
    var status = packet.eofStatusFlags();
    var moreResults = status &amp; ServerStatus.SERVER_MORE_RESULTS_EXISTS;
    if (moreResults) {
      this._resultIndex++;
      return Query.prototype.resultsetHeader;
    }
    return this.done();
  }

  var row = new this._rowParser(packet, this._fields[this._resultIndex], this.options, CharsetToEncoding);
  if (this.onResult) {
    this._rows[this._resultIndex].push(row);
  } else {
    this.emit('result', row);
  }

  return Query.prototype.row;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.start" id="apidoc.element.mysql2.query.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  if (connection.config.debug) {
    console.log('        Sending query command: %s', this.sql);
  }
  this._connection = connection;
  this.options = objectAssign({}, connection.config, this._queryOptions);
  var cmdPacket = new Packets.Query(this.sql, connection.config.charsetNumber);
  connection.writePacket(cmdPacket.toPacket(1));
  return Query.prototype.resultsetHeader;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.query.prototype.stream" id="apidoc.element.mysql2.query.prototype.stream">
        function <span class="apidocSignatureSpan">mysql2.query.prototype.</span>stream
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stream = function (options) {
  var self = this,
    stream;

  options = options || {};
  options.objectMode = true;
  stream = new Readable(options);

  stream._read = function () {
    self._connection &amp;&amp; self._connection.resume();
  };

  this.on('result', function (row) {
    if (!stream.push(row)) {
      self._connection.pause();
    }
    stream.emit('result', row);  // replicate old emitter
  });

  this.on('error', function (err) {
    stream.emit('error', err);  // Pass on any errors
  });

  this.on('end', function () {
    stream.emit('close');  // notify readers that query has completed
    stream.push(null);  // pushing null, indicating EOF
  });

  this.on('fields', function (fields) {
    stream.emit('fields', fields);  // replicate old emitter
  });

  return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- (fix) handle correctly packets over 0xffffff bytes
  long + compressed protocol rewrite                    #421, #248, #419, #426
- (perf) replace double-ended-queue with denqueue       #444
- (feat) automatically track client encoding change     #437, #389
- (feat) add support for CLIENT_SESSION_TRACK info      #388, #436

1.1.1 ( 06/10/2016 )
- (fix) do not crash when result of execute().<span class="apidocCodeKeywordSpan">stream</span>()
  is paused                                             #174, #424
- (fix) do not call .destroy() on stream when connect timeout
  is fired (destroy() method exist only on Net stream
  but not on custom streams)                             #417, #414
- (internal) parser generator now uses generate-function
  package to prepare dynamically generated parser func   #412, #167
- (docs) fix readme test/code errors                     #413
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.quit" id="apidoc.module.mysql2.quit">module mysql2.quit</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.quit.quit" id="apidoc.element.mysql2.quit.quit">
        function <span class="apidocSignatureSpan">mysql2.</span>quit
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Quit(callback)
{
  this.done = callback;
  Command.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.quit.super_" id="apidoc.element.mysql2.quit.super_">
        function <span class="apidocSignatureSpan">mysql2.quit.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.quit.prototype" id="apidoc.module.mysql2.quit.prototype">module mysql2.quit.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.quit.prototype.start" id="apidoc.element.mysql2.quit.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.quit.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  connection._closing = true;
  var quit = new Packet(0, Buffer.from([1, 0, 0, 0, CommandCode.QUIT]), 0, 5);
  if (this.done) {
    this.done();
  }
  connection.writePacket(quit);
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.register_slave" id="apidoc.module.mysql2.register_slave">module mysql2.register_slave</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.register_slave.register_slave" id="apidoc.element.mysql2.register_slave.register_slave">
        function <span class="apidocSignatureSpan">mysql2.</span>register_slave
        <span class="apidocSignatureSpan">(opts, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RegisterSlave(opts, callback)
{
  Command.call(this);
  this.onResult = callback;
  this.opts = opts;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.register_slave.super_" id="apidoc.element.mysql2.register_slave.super_">
        function <span class="apidocSignatureSpan">mysql2.register_slave.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.register_slave.prototype" id="apidoc.module.mysql2.register_slave.prototype">module mysql2.register_slave.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.register_slave.prototype.registerResponse" id="apidoc.element.mysql2.register_slave.prototype.registerResponse">
        function <span class="apidocSignatureSpan">mysql2.register_slave.prototype.</span>registerResponse
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">registerResponse = function (packet) {
  if (this.onResult) {
    process.nextTick(this.onResult.bind(this));
  }
  return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.register_slave.prototype.start" id="apidoc.element.mysql2.register_slave.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.register_slave.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  var packet = new Packets.RegisterSlave(this.opts);
  connection.writePacket(packet.toPacket(1));
  return RegisterSlave.prototype.registerResponse;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.resultset_header" id="apidoc.module.mysql2.resultset_header">module mysql2.resultset_header</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.resultset_header.resultset_header" id="apidoc.element.mysql2.resultset_header.resultset_header">
        function <span class="apidocSignatureSpan">mysql2.</span>resultset_header
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ResultSetHeader(packet, connection)
{
  var bigNumberStrings = connection.config.bigNumberStrings;
  var encoding = connection.serverEncoding;

  var flags = connection._handshakePacket.capabilityFlags;

  var isSet = function (flag) {
    return flags &amp; ClientConstants[flag];
  };

  if (packet.buffer[packet.offset] !== 0) {
    this.fieldCount = packet.readLengthCodedNumber();
    if (this.fieldCount === null) {
      this.infileName = packet.readString(undefined, encoding);
    }
    return;
  }

  this.fieldCount = packet.readInt8(); // skip OK byte
  this.affectedRows = packet.readLengthCodedNumber(bigNumberStrings);
  this.insertId = packet.readLengthCodedNumberSigned(bigNumberStrings);
  this.info = '';


  if (isSet('PROTOCOL_41')) {
    this.serverStatus = packet.readInt16();
    this.warningStatus = packet.readInt16();
  } else if (isSet('TRANSACTIONS')) {
    this.serverStatus = packet.readInt16();
  }

  var stateChanges = null;
  if (isSet('SESSION_TRACK') &amp;&amp; packet.offset &lt; packet.end) {
    this.info = packet.readLengthCodedString(encoding);
    if (this.serverStatus &amp;&amp; ServerSatusFlags.SERVER_SESSION_STATE_CHANGED) {

      // session change info record - see
      // https://dev.mysql.com/doc/internals/en/packet-OK_Packet.html#cs-sect-packet-ok-sessioninfo

      var len = packet.offset &lt; packet.end ? packet.readLengthCodedNumber() : 0;
      var end = packet.offset + len;
      var type, len, key, stateEnd;

      if (len &gt; 0) {
        stateChanges = {
          systemVariables: {},
          schema: null,
          // gtids: {},
          trackStateChange: null
        };
      }

      while (packet.offset &lt; end) {
        type = packet.readInt8();
        len = packet.readLengthCodedNumber();
        stateEnd = packet.offset + len;
        key = packet.readLengthCodedString(encoding);
        if (type === 0) {
          var val = packet.readLengthCodedString(encoding);
          stateChanges.systemVariables[key] = val;
          if (key == 'character_set_client') {
            var charsetNumber = EncodingToCharset[val];
            connection.config.charsetNumber = charsetNumber;
          }
        } else if (type === 1) {
          // TODO double check it's supposed to be the only value, not a list.
          stateChanges.schema = key;
        } else if (type === 2) {
          stateChanges.trackStateChange = packet.readLengthCodedString(encoding);
        } else {
          // GTIDs (type == 3) or unknown type - just skip for now
        }
        packet.offset = stateEnd;
      }
    }
  } else {
    this.info = packet.readString(undefined, encoding);
  }

  if (stateChanges) {
    this.stateChanges = stateChanges;
  }

  var m = this.info.match(/\schanged:\s*(\d+)/i);
  if (m !== null) {
    this.changedRows = parseInt(m[1], 10);
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.resultset_header.toPacket" id="apidoc.element.mysql2.resultset_header.toPacket">
        function <span class="apidocSignatureSpan">mysql2.resultset_header.</span>toPacket
        <span class="apidocSignatureSpan">(fieldCount, insertId, sequenceId)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function (fieldCount, insertId, sequenceId) {
  var length = 4 + Packet.lengthCodedNumberLength(fieldCount);
  if (typeof (insertId) != 'undefined') {
    length += Packet.lengthCodedNumberLength(insertId);
  }
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  packet.offset = 4;
  packet.writeLengthCodedNumber(fieldCount);
  if (typeof (insertId) != 'undefined') {
    packet.writeLengthCodedNumber(insertId);
  }
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.server" id="apidoc.module.mysql2.server">module mysql2.server</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.server.server" id="apidoc.element.mysql2.server.server">
        function <span class="apidocSignatureSpan">mysql2.</span>server
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Server()
{
  EventEmitter.call(this);
  this.connections = [];
  this._server = net.createServer(this._handleConnection.bind(this));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server.super_" id="apidoc.element.mysql2.server.super_">
        function <span class="apidocSignatureSpan">mysql2.server.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter() {
  EventEmitter.init.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.server.prototype" id="apidoc.module.mysql2.server.prototype">module mysql2.server.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.server.prototype._handleConnection" id="apidoc.element.mysql2.server.prototype._handleConnection">
        function <span class="apidocSignatureSpan">mysql2.server.prototype.</span>_handleConnection
        <span class="apidocSignatureSpan">(socket)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_handleConnection = function (socket) {
  var connectionConfig = new ConnectionConfig({stream: socket, isServer: true});
  var connection = new Connection({config: connectionConfig});
  this.emit('connection', connection);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server.prototype.close" id="apidoc.element.mysql2.server.prototype.close">
        function <span class="apidocSignatureSpan">mysql2.server.prototype.</span>close
        <span class="apidocSignatureSpan">(cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">close = function (cb) {
  this._server.close(cb);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._command = null;

this._paused = false;
this._paused_packets = new Queue();

this._statements = LRU({
  max: this.config.maxPreparedStatements,
  dispose: function (key, statement) { statement.<span class="apidocCodeKeywordSpan">close</span>(); }
});

// TODO: make it lru cache
// https://github.com/mercadolibre/node-simple-lru-cache
// or https://github.com/rsms/js-lru
// or https://github.com/monsur/jscache
// or https://github.com/isaacs/node-lru-cache
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server.prototype.listen" id="apidoc.element.mysql2.server.prototype.listen">
        function <span class="apidocSignatureSpan">mysql2.server.prototype.</span>listen
        <span class="apidocSignatureSpan">(port, host, backlog, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (port, host, backlog, callback) {
  this._port = port;
  this._server.listen.apply(this._server, arguments);
  return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

0.14.0 - 26/11/2014
- added connection.pause() and connection.resume()         #129

0.13.0
- connection errors sent to all commands in queue
- server-side authentication support                       #122
- server.<span class="apidocCodeKeywordSpan">listen</span>() is now chainable (returns server)
- allow to login using sha1(password)                      #124
- Query.sql as alias to Query.query                        #121

0.12.5 - 30/07/2014
- add 'execute' pool method similar to Pool##query         #114
- more debug output behind debug flag
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.server_handshake" id="apidoc.module.mysql2.server_handshake">module mysql2.server_handshake</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.server_handshake.server_handshake" id="apidoc.element.mysql2.server_handshake.server_handshake">
        function <span class="apidocSignatureSpan">mysql2.</span>server_handshake
        <span class="apidocSignatureSpan">(args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ServerHandshake(args)
{
  Command.call(this);
  this.args = args;
<span class="apidocCodeCommentSpan">  /*
  this.protocolVersion = args.protocolVersion || 10;
  this.serverVersion   = args.serverVersion;
  this.connectionId    = args.connectionId,
  this.statusFlags     = args.statusFlags,
  this.characterSet    = args.characterSet,
  this.capabilityFlags = args.capabilityFlags || 512;
  */
</span>}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server_handshake.super_" id="apidoc.element.mysql2.server_handshake.super_">
        function <span class="apidocSignatureSpan">mysql2.server_handshake.</span>super_
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Command() {
  EventEmitter.call(this);
  this.next = null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.server_handshake.prototype" id="apidoc.module.mysql2.server_handshake.prototype">module mysql2.server_handshake.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.server_handshake.prototype.dispatchCommands" id="apidoc.element.mysql2.server_handshake.prototype.dispatchCommands">
        function <span class="apidocSignatureSpan">mysql2.server_handshake.prototype.</span>dispatchCommands
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dispatchCommands = function (packet, connection) {
  // command from client to server
  var knownCommand = true;
  var encoding = connection.clientHelloReply.encoding;
  var commandCode = packet.readInt8();
  switch (commandCode) {
  case CommandCode.QUIT:
    if (connection.listeners('quit').length) {
      connection.emit('quit');
    } else {
      connection.stream.end();
    }
    break;

  case CommandCode.INIT_DB:
    if (connection.listeners('init_db').length) {
      var schemaName = packet.readString(encoding);
      connection.emit('init_db', schemaName);
    } else {
      connection.writeOk();
    }
    break;

  case CommandCode.QUERY:
    if (connection.listeners('query').length) {
      var query = packet.readString(undefined, encoding);
      connection.emit('query', query);
    } else {
      connection.writeError({
        code: Errors.HA_ERR_INTERNAL_ERROR,
        message: 'No query handler'
      });
    }
    break;

  case CommandCode.FIELD_LIST:
    if (connection.listeners('field_list').length) {
      var table = packet.readNullTerminatedString();
      var fields = packet.readString(encoding);
      connection.emit('field_list', table, fields);
    } else {
      connection.writeError({
        code: Errors.ER_WARN_DEPRECATED_SYNTAX,
        message: 'As of MySQL 5.7.11, COM_FIELD_LIST is deprecated and will be removed in a future version of MySQL.'
      });
    }
    break;

  case CommandCode.PING:
    if (connection.listeners('ping').length) {
      connection.emit('ping');
    } else {
      connection.writeOk();
    }
    break;

  default:
    knownCommand = false;
  }

  if (connection.listeners('packet').length) {
    connection.emit('packet', packet.clone(), knownCommand, commandCode);
  } else {
    if (!knownCommand) {
      console.log('Unknown command:', commandCode);
    }
  }

  return ServerHandshake.prototype.dispatchCommands;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server_handshake.prototype.readClientReply" id="apidoc.element.mysql2.server_handshake.prototype.readClientReply">
        function <span class="apidocSignatureSpan">mysql2.server_handshake.prototype.</span>readClientReply
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readClientReply = function (packet, connection) {
  // check auth here
  var clientHelloReply = new Packets.HandshakeResponse.fromPacket(packet);

  // TODO check we don't have something similar already
  connection.clientHelloReply = clientHelloReply;

  if (this.args.authCallback) {
    try {
      this.args.authCallback({
        user: clientHelloReply.user,
        database: clientHelloReply.database,
        address: connection.stream.remoteAddress,
        authPluginData1: this.serverHello.authPluginData1,
        authPluginData2: this.serverHello.authPluginData2,
        authToken: clientHelloReply.authToken
      }, function (err, mysqlError) {
        // if (err)
        if (!mysqlError) {
          connection.writeOk();
        } else {
          // TODO create constants / errorToCode
          // 1045 = ER_ACCESS_DENIED_ERROR
          connection.writeError({message: mysqlError.message || '', code: mysqlError.code || 1045});
          connection.close();
        }
      });
    } catch (err) {
      throw err;
      // TODO
      // connection.writeError(err)
    }
  } else {
    connection.writeOk();
  }
  return ServerHandshake.prototype.dispatchCommands;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.server_handshake.prototype.start" id="apidoc.element.mysql2.server_handshake.prototype.start">
        function <span class="apidocSignatureSpan">mysql2.server_handshake.prototype.</span>start
        <span class="apidocSignatureSpan">(packet, connection)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (packet, connection) {
  var serverHelloPacket = new Packets.Handshake(this.args);
  this.serverHello = serverHelloPacket;
  serverHelloPacket.setScrambleData(function (err) {
    if (err) {
      connection.emit('error', new Error('Error generating random bytes'));
      return;
    }
    connection.writePacket(serverHelloPacket.toPacket(0));
  });
  return ServerHandshake.prototype.readClientReply;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.ssl_request" id="apidoc.module.mysql2.ssl_request">module mysql2.ssl_request</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.ssl_request.ssl_request" id="apidoc.element.mysql2.ssl_request.ssl_request">
        function <span class="apidocSignatureSpan">mysql2.</span>ssl_request
        <span class="apidocSignatureSpan">(flags, charset)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SSLRequest(flags, charset)
{
  this.clientFlags = flags | ClientConstants.SSL;
  this.charset = charset;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.ssl_request.prototype" id="apidoc.module.mysql2.ssl_request.prototype">module mysql2.ssl_request.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.ssl_request.prototype.toPacket" id="apidoc.element.mysql2.ssl_request.prototype.toPacket">
        function <span class="apidocSignatureSpan">mysql2.ssl_request.prototype.</span>toPacket
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function ()
{
  var length = 36;
  var buffer = Buffer.allocUnsafe(length);
  var packet = new Packet(0, buffer, 0, length);
  buffer.fill(0);
  packet.offset = 4;

  packet.writeInt32(this.clientFlags);
  packet.writeInt32(0); // max packet size. todo: move to config
  packet.writeInt8(this.charset);
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.string" id="apidoc.module.mysql2.string">module mysql2.string</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.string.decode" id="apidoc.element.mysql2.string.decode">
        function <span class="apidocSignatureSpan">mysql2.string.</span>decode
        <span class="apidocSignatureSpan">(buffer, encoding, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">decode = function (buffer, encoding, options) {
  if (NODE_ENCODING[encoding]) {
    return buffer.toString(encoding);
  }

  var decoder = Iconv.getDecoder(encoding, options || {});

  var res = decoder.write(buffer);
  var trail = decoder.end();

  return trail ? (res + trail) : res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  this._orgNameStart = packet.offset;
  packet.offset += this._orgNameLength;

  packet.skip(1); //  length of the following fields (always 0x0c)
  this.characterSet = packet.readInt16();
  this.encoding = CharsetToEncoding[this.characterSet];

  this.name = StringParser.<span class="apidocCodeKeywordSpan">decode</span>(this._buf.slice(_nameStart, _nameStart + _nameLength
), this.encoding === 'binary' ? this._clientEncoding : this.encoding);

  this.columnLength = packet.readInt32();
  this.columnType = packet.readInt8();
  this.flags = packet.readInt16();
  this.decimals = packet.readInt8();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.string.encode" id="apidoc.element.mysql2.string.encode">
        function <span class="apidocSignatureSpan">mysql2.string.</span>encode
        <span class="apidocSignatureSpan">(string, encoding, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">encode = function (string, encoding, options) {
  if (NODE_ENCODING[encoding]) {
    return Buffer.from(string, encoding);
  }

  var encoder = Iconv.getEncoder(encoding, options || {});

  var res = encoder.write(string);
  var trail = encoder.end();

  return (trail &amp;&amp; trail.length &gt; 0) ? Buffer.concat([res, trail]) : res;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  return 5;
} else {
  return 9;
}
};

Packet.lengthCodedStringLength = function (str, encoding) {
var buf = StringParser.<span class="apidocCodeKeywordSpan">encode</span>(str, encoding);
var slen = buf.length;
return Packet.lengthCodedNumberLength(slen) + slen;
};

Packet.prototype.writeInt32 = function (n) {
this.buffer.writeUInt32LE(n, this.offset);
this.offset += 4;
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.mysql2.text_row" id="apidoc.module.mysql2.text_row">module mysql2.text_row</a></h1>


    <h2>
        <a href="#apidoc.element.mysql2.text_row.text_row" id="apidoc.element.mysql2.text_row.text_row">
        function <span class="apidocSignatureSpan">mysql2.</span>text_row
        <span class="apidocSignatureSpan">(columns)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TextRow(columns)
{
  this.columns = columns || [];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.text_row.fromPacket" id="apidoc.element.mysql2.text_row.fromPacket">
        function <span class="apidocSignatureSpan">mysql2.text_row.</span>fromPacket
        <span class="apidocSignatureSpan">(packet)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">fromPacket = function (packet) {
  // packet.reset(); // set offset to starting point?
  var columns = [];
  while (packet.haveMoreData()) {
    columns.push(packet.readLengthCodedString());
  }
  return new TextRow(columns);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var command = this;

this.on('error', function (e) {
  connection._fatalError = e;
  connection._protocolError = e;
});

this.handshake = Packets.Handshake.<span class="apidocCodeKeywordSpan">fromPacket</span>(helloPacket);
if (connection.config.debug) {
  console.log('Server hello packet: capability flags:%d=(%s)', this.handshake.capabilityFlags,
    flagNames(this.handshake.capabilityFlags).join(', '));
}
connection.serverCapabilityFlags = this.handshake.capabilityFlags;
connection.serverEncoding = CharsetToEncoding[this.handshake.characterSet];
connection.connectionId = this.handshake.connectionId;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.mysql2.text_row.toPacket" id="apidoc.element.mysql2.text_row.toPacket">
        function <span class="apidocSignatureSpan">mysql2.text_row.</span>toPacket
        <span class="apidocSignatureSpan">(columns, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">toPacket = function (columns, encoding) {
  var sequenceId = 0; // TODO remove, this is calculated now in connecton
  var buffer, packet;
  var length = 0;
  columns.forEach(function (val) {
    if (val === null || typeof (val) == 'undefined') {
      ++length;
      return;
    }
    length += Packet.lengthCodedStringLength(val.toString(10), encoding);
  });

  buffer = Buffer.allocUnsafe(length + 4);
  packet = new Packet(sequenceId, buffer, 0, length + 4);
  packet.offset = 4;
  columns.forEach(function (val) {
    if (val === null) {
      packet.writeNull();
      return;
    }
    if (typeof val == 'undefined') {
      packet.writeInt8(0);
      return;
    }
    packet.writeLengthCodedString(val.toString(10), encoding);
  });
  return packet;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

// ===================================
// outgoing server connection methods
// ===================================

Connection.prototype.writeColumns = function (columns) {
  var connection = this;
  this.writePacket(Packets.ResultSetHeader.<span class="apidocCodeKeywordSpan">toPacket</span>(columns.length));
  columns.forEach(function (column) {
    connection.writePacket(Packets.ColumnDefinition.toPacket(column, connection.serverConfig.encoding));
  });
  this.writeEof();
};

// row is array of columns, not hash
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>